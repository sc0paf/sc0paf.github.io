var Ci=Object.defineProperty;var Si=(n,e,t)=>e in n?Ci(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var D=(n,e,t)=>Si(n,typeof e!="symbol"?e+"":e,t);/* empty css                    */import"./vue-DLivgnz1.js";import{aZ as ft,bp as o,_ as j,a$ as B,o as N,I as x,r as Be,bS as St,aD as oe,aC as ot,A as F,aM as At,J as g,bg as H,F as U,b1 as ze,H as q,aF as fe,W as k,X as m,w as L,ba as Wt,aV as Pt,c as ae,bP as tn,bG as Ni,aB as Le,T as Mn,l as ki,as as xi,au as ke,ap as $t,bc as Mt,bJ as xe,bk as Xe,aR as Tn,bm as Fn,ax as Pn,aE as Ii,bK as Rn,bj as fn,bF as Ai,bB as Mi,aL as Ti,bl as mn,b4 as Fi,G as Pi}from"./@vue-BVyye3pk.js";import{L as Je}from"./lz-string-BZNGtwso.js";import{_ as re,C as Ri}from"./@ivanv-BcjNKVw3.js";import{c as En}from"./nanoevents-BxCKNB1V.js";import{i as Ei}from"./unofficial-galaxy-sdk-C_siawBx.js";import{D as Di}from"./vuedraggable-DDlxE-Ax.js";import{Y as Vi}from"./vue-next-select-B-ddlyPe.js";import{p as $i}from"./vue-textarea-autosize-DLc4kbjP.js";import{s as Bi,u as qi}from"./vue-toastification-C3lujMhM.js";import"./sortablejs-BZuNQ3iR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const Oi="./projInfo-schema.json",Ui="Untitled Casino",Li="Powered by Profectus",Hi="letssac",_i="scopaf",zi="",Wi="",Gi="0.0",ji="Initial Commit",Ji=!0,Yi=!1,Qi=2,Ki=!0,Zi=null,Xi="",er=["main"],tr=3600,nr=1,ir=!0,rr="base64",ar=!1,Y={$schema:Oi,title:Ui,description:Li,id:Hi,author:_i,discordName:zi,discordLink:Wi,versionNumber:Gi,versionTitle:ji,allowGoBack:Ji,defaultShowSmall:Yi,defaultDecimalsShown:Qi,useHeader:Ki,banner:Zi,logo:Xi,initialTabs:er,maxTickLength:tr,offlineLimit:nr,enablePausing:ir,exportEncoding:rr,disableHealthWarning:ar},sr=ft({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}}),P=window.player=sr;function lt(n){return JSON.stringify(n,(e,t)=>o(t)??null)}const or=j({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(n,{emit:e}){const t=e,i=B(!1),r=B(null);function a(){t("click"),r.value!=null&&clearTimeout(r.value),i.value=!1,ot(()=>{i.value=!0,r.value=setTimeout(()=>i.value=!1,500)})}return(u,s)=>(N(),x("button",{onClick:St(a,["stop"]),class:oe(["feedback",{activated:i.value,left:u.left}])},[Be(u.$slots,"default",{},void 0,!0)],2))}}),nn=re(or,[["__scopeId","data-v-f82eae5d"]]),lr={class:"error"},ur={class:"error-title"},cr={class:"error-details",style:{"margin-top":"-10px"}},dr={key:0},fr={class:"instructions"},mr=["href"],pr={key:0,style:{"margin-top":"20px"}},gr={class:"error-details"},vr={key:0,style:{"margin-top":"10px"}},hr={key:1,style:{"margin-top":"10px"}},br=j({__name:"Error",props:{errors:{}},setup(n){const e=n,t=F(()=>e.errors[0]),i=F(()=>e.errors.map(u=>u.stack==null?[]:u.stack.split(`
`))),r=F(()=>e.errors.map(u=>u.cause==null?[]:(typeof u.cause=="string"?u.cause:JSON.stringify(u.cause)).split(`
`)));function a(){let u=lt(P);switch(Y.exportEncoding){default:console.warn(`Unknown save encoding: ${Y.exportEncoding}. Defaulting to lz`);case"lz":u=Je.compressToUTF16(u);break;case"base64":u=btoa(unescape(encodeURIComponent(u)));break;case"plain":break}console.log(u);const s=document.createElement("textarea");s.value=u,document.body.appendChild(s),s.select(),s.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(s)}return At(()=>{P.autosave=!1,P.devSpeed=0}),(u,s)=>(N(),x("div",lr,[g("h1",ur,H(t.value.name)+": "+H(t.value.message),1),g("div",cr,[t.value.cause?(N(),x("div",dr,[(N(!0),x(U,null,ze(r.value[0],c=>(N(),x("div",{key:c},H(c),1))),128))])):q("",!0),t.value.stack?(N(),x("div",{key:1,style:fe(t.value.cause?"margin-top: 10px":"")},[(N(!0),x(U,null,ze(i.value[0],c=>(N(),x("div",{key:c},H(c),1))),128))],4)):q("",!0)]),g("div",fr,[s[2]||(s[2]=k(" Check the console for more details, and consider sharing it with the developers on ")),g("a",{href:o(Y).discordLink||"https://discord.gg/yJ4fjnjU54",class:"discord-link"},"discord",8,mr),s[3]||(s[3]=k("! ")),m(nn,{onClick:a,class:"button",style:{display:"inline-flex"}},{default:L(()=>s[0]||(s[0]=[g("span",{class:"material-icons",style:{"font-size":"16px"}},"content_paste",-1),g("span",{style:{"margin-left":"8px","font-size":"medium"}},"Copy Save",-1)])),_:1}),s[4]||(s[4]=g("br",null,null,-1)),u.errors.length>1?(N(),x("div",pr,s[1]||(s[1]=[g("h3",null,"Other errors",-1)]))):q("",!0),(N(!0),x(U,null,ze(u.errors.slice(1),(c,f)=>(N(),x("div",{key:f,style:{"margin-top":"20px"}},[g("details",gr,[g("summary",null,H(c.name)+": "+H(c.message),1),c.cause?(N(),x("div",vr,[(N(!0),x(U,null,ze(r.value[f+1],w=>(N(),x("div",{key:w},H(w),1))),128))])):q("",!0),c.stack?(N(),x("div",hr,[(N(!0),x(U,null,ze(i.value[f+1],w=>(N(),x("div",{key:w},H(w),1))),128))])):q("",!0)])]))),128))])]))}}),Dn=re(br,[["__scopeId","data-v-2524e23e"]]),Qe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var rn=(n=>(n.Classic="classic",n.Paper="paper",n.Nordic="nordic",n.Aqua="aqua",n))(rn||{});const mt={classic:Qe,paper:{...Qe,variables:{...Qe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Qe,variables:{...Qe.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Qe,variables:{...Qe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}},te=window.state=Wt({lastTenTicks:[],mouseActivity:[!1],hasNaN:!1,NaNPath:[],errors:ft([])}),me=En();"fonts"in document&&(document.fonts.onloadingdone=()=>me.emit("fontsLoaded"));document.onmousemove=function(){te.mouseActivity[te.mouseActivity.length-1]=!0};const yr=j({__name:"Context",emits:["updateNodes"],setup(n,{emit:e}){var h;const t=e,i=B({}),r=new ResizeObserver(c),a=B(null);At(()=>{const b=a.value;b!=null&&r.observe(b)});let u=!0,s=B((h=a.value)==null?void 0:h.getBoundingClientRect());function c(){u&&(u=!1,ot(()=>{var b;s.value=(b=a.value)==null?void 0:b.getBoundingClientRect(),Object.values(i.value).filter(p=>p).forEach(p=>p.rect=p.element.getBoundingClientRect()),t("updateNodes",i.value),u=!0}))}me.on("fontsLoaded",c);const f={attributes:!1,childList:!0,subtree:!1};Pt(_n,(b,p)=>{const y=new MutationObserver(()=>w(b));y.observe(p,f),i.value[b]={element:p,observer:y,rect:p.getBoundingClientRect()},c()}),Pt(zn,b=>{var p;(p=i.value[b])==null||p.observer.disconnect(),i.value[b]=void 0,c()}),Pt(Wn,i),Pt(Gn,s);function w(b){const p=i.value[b];p!=null&&(p.rect=p.element.getBoundingClientRect(),t("updateNodes",i.value))}return(b,p)=>(N(),x(U,null,[Be(b.$slots,"default",{},void 0,!0),g("div",{ref_key:"resizeListener",ref:a,class:"resize-listener"},null,512)],64))}}),Vn=re(yr,[["__scopeId","data-v-4fc505f1"]]),wr={class:"modal-wrapper"},Cr=["width"],Sr={class:"modal-header"},Nr={class:"modal-body"},kr={class:"modal-footer"},Ye=j({__name:"Modal",props:{modelValue:{type:Boolean},preventClosing:{type:Boolean},width:{}},emits:["update:modelValue"],setup(n,{expose:e,emit:t}){const i=n,r=t,a=F(()=>i.modelValue||s.value);function u(){i.preventClosing!==!0&&r("update:modelValue",!1)}const s=B(!1),c=B(null),f=F(()=>{var w;return((w=c.value)==null?void 0:w.nodes)??null});return e({isOpen:a,nodes:f}),(w,h)=>(N(),ae(ki,{to:"#modal-root"},[m(Mn,{name:"modal",onBeforeEnter:h[0]||(h[0]=b=>s.value=!0),onAfterLeave:h[1]||(h[1]=b=>s.value=!1),appear:""},{default:L(()=>[tn(g("div",Le({class:"modal-mask",onPointerdown:St(u,["self"])},w.$attrs),[g("div",wr,[g("div",{class:"modal-container",width:w.width},[g("div",Sr,[Be(w.$slots,"header",{shown:a.value})]),g("div",Nr,[m(Vn,{ref_key:"contextRef",ref:c},{default:L(()=>[Be(w.$slots,"body",{shown:a.value})]),_:3},512)]),g("div",kr,[Be(w.$slots,"footer",{shown:a.value},()=>[g("div",{class:"modal-default-footer"},[h[2]||(h[2]=g("div",{class:"modal-default-flex-grow"},null,-1)),g("button",{class:"button modal-default-button",onClick:u}," Close ")])])])],8,Cr)])],16),[[Ni,w.modelValue]])]),_:3})]))}});class xr{constructor(e){D(this,"map",new Map);D(this,"first");D(this,"last");D(this,"maxSize");this.maxSize=e}get size(){return this.map.size}get(e){const t=this.map.get(e);if(t!==void 0)return t!==this.first&&(t===this.last?(this.last=t.prev,this.last.next=void 0):(t.prev.next=t.next,t.next.prev=t.prev),t.next=this.first,this.first.prev=t,this.first=t),t.value}set(e,t){if(this.maxSize<1)return;if(this.map.has(e))throw new Error("Cannot update existing keys in the cache");const i=new Ir(e,t);for(this.first===void 0?(this.first=i,this.last=i):(i.next=this.first,this.first.prev=i,this.first=i),this.map.set(e,i);this.map.size>this.maxSize;){const r=this.last;this.map.delete(r.key),this.last=r.prev,this.last.next=void 0}}}class Ir{constructor(e,t){D(this,"key");D(this,"value");D(this,"next");D(this,"prev");this.key=e,this.value=t}}const Zt=17,Ar=9e15,Mr=Math.log10(9e15),Tr=1/9e15,Fr=308,Pr=-324,pn=5,Rr=1023,Er=function(){const n=[];for(let t=Pr+1;t<=Fr;t++)n.push(+("1e"+t));const e=323;return function(t){return n[t+e]}}(),Ke=[2,Math.E,3,4,5,6,7,8,9,10],Dr=[[1,1.0891180521811203,1.1789767925673957,1.2701455431742086,1.3632090180450092,1.4587818160364217,1.5575237916251419,1.6601571006859253,1.767485818836978,1.8804192098842727,2],[1,1.1121114330934079,1.231038924931609,1.3583836963111375,1.4960519303993531,1.6463542337511945,1.8121385357018724,1.996971324618307,2.2053895545527546,2.4432574483385254,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.1840100246247336,1.4061375836156955,1.6802272208863964,2.026757028388619,2.4770056063449646,3.080525271755482,3.9191964192627284,5.135152840833187,6.989961179534715,10]],Vr=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]];let S=function(e){return l.fromValue_noAlloc(e)},z=function(n,e,t){return l.fromComponents(n,e,t)},J=function(e,t,i){return l.fromComponents_noNormalize(e,t,i)};const _e=function(e,t){const i=t+1,r=Math.ceil(Math.log10(Math.abs(e))),a=Math.round(e*Math.pow(10,i-r))*Math.pow(10,r-i);return parseFloat(a.toFixed(Math.max(i-r,0)))},Xt=function(n){return Math.sign(n)*Math.log10(Math.abs(n))},$r=function(n){if(!isFinite(n))return n;if(n<-50)return n===Math.trunc(n)?Number.NEGATIVE_INFINITY:0;let e=1;for(;n<10;)e=e*n,++n;n-=1;let t=.9189385332046727;t=t+(n+.5)*Math.log(n),t=t-n;const i=n*n;let r=n;return t=t+1/(12*r),r=r*i,t=t+1/(360*r),r=r*i,t=t+1/(1260*r),r=r*i,t=t+1/(1680*r),r=r*i,t=t+1/(1188*r),r=r*i,t=t+691/(360360*r),r=r*i,t=t+7/(1092*r),r=r*i,t=t+3617/(122400*r),Math.exp(t)/e},$n=.5671432904097838,gn=function(n,e=1e-10){let t,i;if(!Number.isFinite(n)||n===0)return n;if(n===1)return $n;n<10?t=0:t=Math.log(n)-Math.log(Math.log(n));for(let r=0;r<100;++r){if(i=(n*Math.exp(-t)+t*t)/(t+1),Math.abs(i-t)<e*Math.abs(i))return i;t=i}throw Error(`Iteration failed to converge: ${n.toString()}`)};function vn(n,e=1e-10){let t,i,r,a;if(!Number.isFinite(n.mag)||n.eq(l.dZero))return n;if(n.eq(l.dOne))return l.fromNumber($n);t=l.ln(n);for(let u=0;u<100;++u){if(i=t.neg().exp(),r=t.sub(n.mul(i)),a=t.sub(r.div(t.add(1).sub(t.add(2).mul(r).div(l.mul(2,t).add(2))))),l.abs(a.sub(t)).lt(l.abs(a).mul(e)))return a;t=a}throw Error(`Iteration failed to converge: ${n.toString()}`)}const v=class v{constructor(e){D(this,"sign",0);D(this,"mag",0);D(this,"layer",0);e instanceof v?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"&&this.fromString(e)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/Er(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer=0,this.exponent=0))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,i){return new v().fromComponents(e,t,i)}static fromComponents_noNormalize(e,t,i){return new v().fromComponents_noNormalize(e,t,i)}static fromMantissaExponent(e,t){return new v().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new v().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new v().fromDecimal(e)}static fromNumber(e){return new v().fromNumber(e)}static fromString(e){return new v().fromString(e)}static fromValue(e){return new v().fromValue(e)}static fromValue_noAlloc(e){if(e instanceof v)return e;if(typeof e=="string"){const t=v.fromStringCache.get(e);return t!==void 0?t:v.fromString(e)}else return typeof e=="number"?v.fromNumber(e):v.dZero}static abs(e){return S(e).abs()}static neg(e){return S(e).neg()}static negate(e){return S(e).neg()}static negated(e){return S(e).neg()}static sign(e){return S(e).sign}static sgn(e){return S(e).sign}static round(e){return S(e).round()}static floor(e){return S(e).floor()}static ceil(e){return S(e).ceil()}static trunc(e){return S(e).trunc()}static add(e,t){return S(e).add(t)}static plus(e,t){return S(e).add(t)}static sub(e,t){return S(e).sub(t)}static subtract(e,t){return S(e).sub(t)}static minus(e,t){return S(e).sub(t)}static mul(e,t){return S(e).mul(t)}static multiply(e,t){return S(e).mul(t)}static times(e,t){return S(e).mul(t)}static div(e,t){return S(e).div(t)}static divide(e,t){return S(e).div(t)}static recip(e){return S(e).recip()}static reciprocal(e){return S(e).recip()}static reciprocate(e){return S(e).reciprocate()}static cmp(e,t){return S(e).cmp(t)}static cmpabs(e,t){return S(e).cmpabs(t)}static compare(e,t){return S(e).cmp(t)}static isNaN(e){return e=S(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=S(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return S(e).eq(t)}static equals(e,t){return S(e).eq(t)}static neq(e,t){return S(e).neq(t)}static notEquals(e,t){return S(e).notEquals(t)}static lt(e,t){return S(e).lt(t)}static lte(e,t){return S(e).lte(t)}static gt(e,t){return S(e).gt(t)}static gte(e,t){return S(e).gte(t)}static max(e,t){return S(e).max(t)}static min(e,t){return S(e).min(t)}static minabs(e,t){return S(e).minabs(t)}static maxabs(e,t){return S(e).maxabs(t)}static clamp(e,t,i){return S(e).clamp(t,i)}static clampMin(e,t){return S(e).clampMin(t)}static clampMax(e,t){return S(e).clampMax(t)}static cmp_tolerance(e,t,i){return S(e).cmp_tolerance(t,i)}static compare_tolerance(e,t,i){return S(e).cmp_tolerance(t,i)}static eq_tolerance(e,t,i){return S(e).eq_tolerance(t,i)}static equals_tolerance(e,t,i){return S(e).eq_tolerance(t,i)}static neq_tolerance(e,t,i){return S(e).neq_tolerance(t,i)}static notEquals_tolerance(e,t,i){return S(e).notEquals_tolerance(t,i)}static lt_tolerance(e,t,i){return S(e).lt_tolerance(t,i)}static lte_tolerance(e,t,i){return S(e).lte_tolerance(t,i)}static gt_tolerance(e,t,i){return S(e).gt_tolerance(t,i)}static gte_tolerance(e,t,i){return S(e).gte_tolerance(t,i)}static pLog10(e){return S(e).pLog10()}static absLog10(e){return S(e).absLog10()}static log10(e){return S(e).log10()}static log(e,t){return S(e).log(t)}static log2(e){return S(e).log2()}static ln(e){return S(e).ln()}static logarithm(e,t){return S(e).logarithm(t)}static pow(e,t){return S(e).pow(t)}static pow10(e){return S(e).pow10()}static pow_base(e,t){return S(e).pow_base(t)}static root(e,t){return S(e).root(t)}static factorial(e,t){return S(e).factorial()}static gamma(e,t){return S(e).gamma()}static lngamma(e,t){return S(e).lngamma()}static exp(e){return S(e).exp()}static sqr(e){return S(e).sqr()}static sqrt(e){return S(e).sqrt()}static cube(e){return S(e).cube()}static cbrt(e){return S(e).cbrt()}static tetrate(e,t=2,i=J(1,0,1)){return S(e).tetrate(t,i)}static iteratedexp(e,t=2,i=J(1,0,1)){return S(e).iteratedexp(t,i)}static iteratedlog(e,t=10,i=1){return S(e).iteratedlog(t,i)}static layeradd10(e,t){return S(e).layeradd10(t)}static layeradd(e,t,i=10){return S(e).layeradd(t,i)}static slog(e,t=10){return S(e).slog(t)}static lambertw(e){return S(e).lambertw()}static ssqrt(e){return S(e).ssqrt()}static pentate(e,t=2,i=J(1,0,1)){return S(e).pentate(t,i)}static sin(e){return S(e).sin()}static cos(e){return S(e).cos()}static tan(e){return S(e).tan()}static asin(e){return S(e).asin()}static acos(e){return S(e).acos()}static atan(e){return S(e).atan()}static sinh(e){return S(e).sinh()}static cosh(e){return S(e).cosh()}static tanh(e){return S(e).tanh()}static asinh(e){return S(e).asinh()}static acosh(e){return S(e).acosh()}static atanh(e){return S(e).atanh()}static affordGeometricSeries(e,t,i,r){return this.affordGeometricSeries_core(S(e),S(t),S(i),r)}static sumGeometricSeries(e,t,i,r){return this.sumGeometricSeries_core(e,S(t),S(i),r)}static affordArithmeticSeries(e,t,i,r){return this.affordArithmeticSeries_core(S(e),S(t),S(i),S(r))}static sumArithmeticSeries(e,t,i,r){return this.sumArithmeticSeries_core(S(e),S(t),S(i),S(r))}static efficiencyOfPurchase(e,t,i){return this.efficiencyOfPurchase_core(S(e),S(t),S(i))}static randomDecimalForTesting(e){if(Math.random()*20<1)return J(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return J(t,0,1);const i=Math.floor(Math.random()*(e+1));let r=i===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let a=Math.pow(10,r);return Math.random()>.9&&(a=Math.trunc(a)),z(t,i,a)}static affordGeometricSeries_core(e,t,i,r){const a=t.mul(i.pow(r));return v.floor(e.div(a).mul(i.sub(1)).add(1).log10().div(i.log10()))}static sumGeometricSeries_core(e,t,i,r){return t.mul(i.pow(r)).mul(v.sub(1,i.pow(e))).div(v.sub(1,i))}static affordArithmeticSeries_core(e,t,i,r){const u=t.add(r.mul(i)).sub(i.div(2)),s=u.pow(2);return u.neg().add(s.add(i.mul(e).mul(2)).sqrt()).div(i).floor()}static sumArithmeticSeries_core(e,t,i,r){const a=t.add(r.mul(i));return e.div(2).mul(a.mul(2).plus(e.sub(1).mul(i)))}static efficiencyOfPurchase_core(e,t,i){return e.div(t).add(e.div(i))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<Tr)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=Ar)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<Mr&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this.normalize(),this}fromComponents_noNormalize(e,t,i){return this.sign=e,this.layer=t,this.mag=i,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){const t=e,i=v.fromStringCache.get(t);if(i!==void 0)return this.fromDecimal(i);e=e.replace(",","");const r=e.split("^^^");if(r.length===2){const C=parseFloat(r[0]),A=parseFloat(r[1]),I=r[1].split(";");let T=1;if(I.length===2&&(T=parseFloat(I[1]),isFinite(T)||(T=1)),isFinite(C)&&isFinite(A)){const R=v.pentate(C,A,T);return this.sign=R.sign,this.layer=R.layer,this.mag=R.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}const a=e.split("^^");if(a.length===2){const C=parseFloat(a[0]),A=parseFloat(a[1]),I=a[1].split(";");let T=1;if(I.length===2&&(T=parseFloat(I[1]),isFinite(T)||(T=1)),isFinite(C)&&isFinite(A)){const R=v.tetrate(C,A,T);return this.sign=R.sign,this.layer=R.layer,this.mag=R.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}const u=e.split("^");if(u.length===2){const C=parseFloat(u[0]),A=parseFloat(u[1]);if(isFinite(C)&&isFinite(A)){const I=v.pow(C,A);return this.sign=I.sign,this.layer=I.layer,this.mag=I.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}e=e.trim().toLowerCase();let s,c,f=e.split("pt");if(f.length===2){s=10,c=parseFloat(f[0]),f[1]=f[1].replace("(",""),f[1]=f[1].replace(")","");let C=parseFloat(f[1]);if(isFinite(C)||(C=1),isFinite(s)&&isFinite(c)){const A=v.tetrate(s,c,C);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}if(f=e.split("p"),f.length===2){s=10,c=parseFloat(f[0]),f[1]=f[1].replace("(",""),f[1]=f[1].replace(")","");let C=parseFloat(f[1]);if(isFinite(C)||(C=1),isFinite(s)&&isFinite(c)){const A=v.tetrate(s,c,C);return this.sign=A.sign,this.layer=A.layer,this.mag=A.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}const w=e.split("e"),h=w.length-1;if(h===0){const C=parseFloat(e);if(isFinite(C))return this.fromNumber(C),v.fromStringCache.size>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}else if(h===1){const C=parseFloat(e);if(isFinite(C)&&C!==0)return this.fromNumber(C),v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}const b=e.split("e^");if(b.length===2){this.sign=1,b[0].charAt(0)=="-"&&(this.sign=-1);let C="";for(let A=0;A<b[1].length;++A){const I=b[1].charCodeAt(A);if(I>=43&&I<=57||I===101)C+=b[1].charAt(A);else return this.layer=parseFloat(C),this.mag=parseFloat(b[1].substr(A+1)),this.normalize(),v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}}if(h<1)return this.sign=0,this.layer=0,this.mag=0,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this;const p=parseFloat(w[0]);if(p===0)return this.sign=0,this.layer=0,this.mag=0,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this;let y=parseFloat(w[w.length-1]);if(h>=2){const C=parseFloat(w[w.length-2]);isFinite(C)&&(y*=Math.sign(C),y+=Xt(C))}if(!isFinite(p))this.sign=w[0]==="-"?-1:1,this.layer=h,this.mag=y;else if(h===1)this.sign=Math.sign(p),this.layer=1,this.mag=y+Math.log10(Math.abs(p));else if(this.sign=Math.sign(p),this.layer=h,h===2){const C=v.mul(z(1,2,y),S(p));return this.sign=C.sign,this.layer=C.layer,this.mag=C.mag,v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}else this.mag=y;return this.normalize(),v.fromStringCache.maxSize>=1&&v.fromStringCache.set(t,v.fromDecimal(this)),this}fromValue(e){return e instanceof v?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:_e(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:_e(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=pn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):_e(this.m,e)+"e"+_e(this.e,e):this.layer===1?_e(this.m,e)+"e"+_e(this.e,e):this.layer<=pn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+_e(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+_e(this.mag,e)}abs(){return J(this.sign===0?0:1,this.layer,this.mag)}neg(){return J(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?v.dZero:this.layer===0?z(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?v.dZero:this.layer===0?z(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?v.dZero:this.layer===0?z(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?v.dZero:this.layer===0?z(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=S(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return J(0,0,0);let i,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(v.cmpabs(this,t)>0?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return v.fromNumber(i.sign*i.mag+r.sign*r.mag);const a=i.layer*Math.sign(i.mag),u=r.layer*Math.sign(r.mag);if(a-u>=2)return i;if(a===0&&u===-1){if(Math.abs(r.mag-Math.log10(i.mag))>Zt)return i;{const s=Math.pow(10,Math.log10(i.mag)-r.mag),c=r.sign+i.sign*s;return z(Math.sign(c),1,r.mag+Math.log10(Math.abs(c)))}}if(a===1&&u===0){if(Math.abs(i.mag-Math.log10(r.mag))>Zt)return i;{const s=Math.pow(10,i.mag-Math.log10(r.mag)),c=r.sign+i.sign*s;return z(Math.sign(c),1,Math.log10(r.mag)+Math.log10(Math.abs(c)))}}if(Math.abs(i.mag-r.mag)>Zt)return i;{const s=Math.pow(10,i.mag-r.mag),c=r.sign+i.sign*s;return z(Math.sign(c),1,r.mag+Math.log10(Math.abs(c)))}}plus(e){return this.add(e)}sub(e){return this.add(S(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=S(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return J(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return J(this.sign*t.sign,0,1);let i,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(i=this,r=t):(i=t,r=this),i.layer===0&&r.layer===0)return v.fromNumber(i.sign*r.sign*i.mag*r.mag);if(i.layer>=3||i.layer-r.layer>=2)return z(i.sign*r.sign,i.layer,i.mag);if(i.layer===1&&r.layer===0)return z(i.sign*r.sign,1,i.mag+Math.log10(r.mag));if(i.layer===1&&r.layer===1)return z(i.sign*r.sign,1,i.mag+r.mag);if(i.layer===2&&r.layer===1){const a=z(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return z(i.sign*r.sign,a.layer+1,a.sign*a.mag)}if(i.layer===2&&r.layer===2){const a=z(Math.sign(i.mag),i.layer-1,Math.abs(i.mag)).add(z(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return z(i.sign*r.sign,a.layer+1,a.sign*a.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=S(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?v.dNaN:this.layer===0?z(this.sign,0,1/this.mag):z(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=S(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=S(e),i=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return i>r?1:i<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=S(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=S(e);return this.lt(t)?t:this}min(e){const t=S(e);return this.gt(t)?t:this}maxabs(e){const t=S(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=S(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const i=S(e);return this.eq_tolerance(i,t)?0:this.cmp(i)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const i=S(e);if(t==null&&(t=1e-7),this.sign!==i.sign||Math.abs(this.layer-i.layer)>1)return!1;let r=this.mag,a=i.mag;return this.layer>i.layer&&(a=Xt(a)),this.layer<i.layer&&(r=Xt(r)),Math.abs(r-a)<=t*Math.max(Math.abs(r),Math.abs(a))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const i=S(e);return!this.eq_tolerance(i,t)&&this.lt(i)}lte_tolerance(e,t){const i=S(e);return this.eq_tolerance(i,t)||this.lt(i)}gt_tolerance(e,t){const i=S(e);return!this.eq_tolerance(i,t)&&this.gt(i)}gte_tolerance(e,t){const i=S(e);return this.eq_tolerance(i,t)||this.gt(i)}pLog10(){return this.lt(v.dZero)?v.dZero:this.log10()}absLog10(){return this.sign===0?v.dNaN:this.layer>0?z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):z(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?v.dNaN:this.layer>0?z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):z(this.sign,0,Math.log10(this.mag))}log(e){return e=S(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?v.dNaN:this.layer===0&&e.layer===0?z(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):v.div(this.log10(),e.log10())}log2(){return this.sign<=0?v.dNaN:this.layer===0?z(this.sign,0,Math.log2(this.mag)):this.layer===1?z(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?z(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?v.dNaN:this.layer===0?z(this.sign,0,Math.log(this.mag)):this.layer===1?z(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?z(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):z(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=S(e),i=this,r=t;if(i.sign===0)return r.eq(0)?J(1,0,1):i;if(i.sign===1&&i.layer===0&&i.mag===1)return i;if(r.sign===0)return J(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return i;const a=i.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?a.neg():Math.abs(r.toNumber()%2)%2===0?a:v.dNaN:a}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return v.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return z(1,0,t);if(e.sign===0)return v.dOne;e=J(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?z(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?z(-e.sign,e.layer+1,-e.mag):v.dOne}pow_base(e){return S(e).pow(this)}root(e){const t=S(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?v.exp(v.mul(this,v.ln(this).sub(1))):v.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(J(1,0,24)))return v.fromNumber($r(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const i=e*e;let r=e,a=12*r,u=1/a,s=t+u;if(s===t||(t=s,r=r*i,a=360*r,u=1/a,s=t-u,s===t))return v.exp(t);t=s,r=r*i,a=1260*r;let c=1/a;return t=t+c,r=r*i,a=1680*r,c=1/a,t=t-c,v.exp(t)}else return this.layer===1?v.exp(v.mul(this,v.ln(this).sub(1))):v.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?v.dOne:this.layer===0&&this.mag<=709.7?v.fromNumber(Math.exp(this.sign*this.mag)):this.layer===0?z(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?z(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):z(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return v.fromNumber(Math.sqrt(this.sign*this.mag));if(this.layer===1)return z(1,2,Math.log10(this.mag)-.3010299956639812);{const e=v.div(J(this.sign,this.layer-1,this.mag),J(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=J(1,0,1)){if(e===1)return v.pow(this,t);if(e===0)return new v(t);if(this.eq(v.dOne))return v.dOne;if(this.eq(-1))return v.pow(this,t);if(e===Number.POSITIVE_INFINITY){const a=this.toNumber();if(a<=1.444667861009766&&a>=.06598803584531254){if(a>1.444667861009099)return v.fromNumber(Math.E);const u=v.ln(this).neg();return u.lambertw().div(u)}else return a>1.444667861009766?v.fromNumber(Number.POSITIVE_INFINITY):v.dNaN}if(this.eq(v.dZero)){let a=Math.abs((e+1)%2);return a>1&&(a=2-a),v.fromNumber(a)}if(e<0)return v.iteratedlog(t,this,-e);t=S(t);const i=e;e=Math.trunc(e);const r=i-e;if(this.gt(v.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let a=0;a<e;++a){const u=t;if(t=this.pow(t),u.eq(t))return t}if(r!=0){const a=this.pow(t);return t.mul(1-r).add(a.mul(r))}return t}r!==0&&(t.eq(v.dOne)?this.gt(10)?t=this.pow(r):(t=v.fromNumber(v.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return J(t.sign,t.layer+(e-a-1),t.mag);if(a>1e4)return t}return t}iteratedexp(e=2,t=J(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return v.tetrate(e,-t,this);e=S(e);let i=v.fromDecimal(this);const r=t;t=Math.trunc(t);const a=r-t;if(i.layer-e.layer>3){const u=Math.min(t,i.layer-e.layer-3);t-=u,i.layer-=u}for(let u=0;u<t;++u){if(i=i.log(e),!isFinite(i.layer)||!isFinite(i.mag))return i.normalize();if(u>1e4)return i}return a>0&&a<1&&(e.eq(10)?i=i.layeradd10(-a):i=i.layeradd(-a,e)),i}slog(e=10,t=100){let i=.001,r=!1,a=!1,u=this.slog_internal(e).toNumber();for(let s=1;s<t;++s){const f=new v(e).tetrate(u).gt(this);if(s>1&&a!=f&&(r=!0),a=f,r?i/=2:i*=2,i=Math.abs(i)*(f?-1:1),u+=i,i===0)break}return v.fromNumber(u)}slog_internal(e=10){if(e=S(e),e.lte(v.dZero)||e.eq(v.dOne))return v.dNaN;if(e.lt(v.dOne))return this.eq(v.dOne)?v.dZero:this.eq(v.dZero)?v.dNegOne:v.dNaN;if(this.mag<0||this.eq(v.dZero))return v.dNegOne;let t=0,i=v.fromDecimal(this);if(i.layer-e.layer>3){const r=i.layer-e.layer-3;t+=r,i.layer-=r}for(let r=0;r<100;++r)if(i.lt(v.dZero))i=v.pow(e,i),t-=1;else{if(i.lte(v.dOne))return v.fromNumber(t+v.slog_critical(e.toNumber(),i.toNumber()));t+=1,i=v.log(i,e)}return v.fromNumber(t)}static slog_critical(e,t){return e>10?t-1:v.critical_section(e,t,Vr)}static tetrate_critical(e,t){return v.critical_section(e,t,Dr)}static critical_section(e,t,i){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,a=0;for(let s=0;s<Ke.length;++s)if(Ke[s]==e){r=i[s][Math.floor(t)],a=i[s][Math.ceil(t)];break}else if(Ke[s]<e&&Ke[s+1]>e){const c=(e-Ke[s])/(Ke[s+1]-Ke[s]);r=i[s][Math.floor(t)]*(1-c)+i[s+1][Math.floor(t)]*c,a=i[s][Math.ceil(t)]*(1-c)+i[s+1][Math.ceil(t)]*c;break}const u=t-Math.floor(t);return r<=0||a<=0?r*(1-u)+a*u:Math.pow(e,Math.log(r)/Math.log(e)*(1-u)+Math.log(a)/Math.log(e)*u)}layeradd10(e){e=v.fromValue_noAlloc(e).toNumber();const t=v.fromDecimal(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const i=Math.trunc(e);e-=i,t.layer+=i}if(e<=-1){const i=Math.trunc(e);if(e-=i,t.layer+=i,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?v.tetrate(t,r):Number.isFinite(r)?r>=-1?v.log(v.tetrate(t,r+1),t):v.log(v.log(v.tetrate(t,r+2),t),t):v.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return v.fromNumber(gn(this.toNumber()));if(this.layer===0)return v.fromNumber(gn(this.sign*this.mag));if(this.layer===1)return vn(this);if(this.layer===2)return vn(this);if(this.layer>=3)return J(this.sign,this.layer-1,this.mag);throw new Error("Unhandled behavior in lambertw()")}ssqrt(){if(this.sign==1&&this.layer>=3)return J(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=J(1,0,1)){t=S(t);const i=e;e=Math.trunc(e);const r=i-e;r!==0&&(t.eq(v.dOne)?(++e,t=v.fromNumber(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let a=0;a<e;++a){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(a>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.sin(this.sign*this.mag)):J(0,0,0)}cos(){return this.mag<0?v.dOne:this.layer===0?v.fromNumber(Math.cos(this.sign*this.mag)):J(0,0,0)}tan(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.tan(this.sign*this.mag)):J(0,0,0)}asin(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.asin(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?v.fromNumber(Math.acos(this.toNumber())):this.layer===0?v.fromNumber(Math.acos(this.sign*this.mag)):J(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?v.fromNumber(Math.atan(this.sign*this.mag)):v.fromNumber(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return v.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return v.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?J(Number.NaN,Number.NaN,Number.NaN):v.ln(this.add(1).div(v.fromNumber(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(v.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};D(v,"dZero"),D(v,"dOne"),D(v,"dNegOne"),D(v,"dTwo"),D(v,"dTen"),D(v,"dNaN"),D(v,"dInf"),D(v,"dNegInf"),D(v,"dNumberMax"),D(v,"dNumberMin"),D(v,"fromStringCache",new xr(Rr));let l=v;l.dZero=J(0,0,0);l.dOne=J(1,0,1);l.dNegOne=J(-1,0,1);l.dTwo=J(1,0,2);l.dTen=J(1,0,10);l.dNaN=J(Number.NaN,Number.NaN,Number.NaN);l.dInf=J(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);l.dNegInf=J(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);l.dNumberMax=z(1,0,Number.MAX_VALUE);l.dNumberMin=z(1,0,Number.MIN_VALUE);S=l.fromValue_noAlloc;z=l.fromComponents;J=l.fromComponents_noNormalize;l.fromMantissaExponent;l.fromMantissaExponent_noNormalize;const Br=new l(1);function bt(n,e,t=!0){let i=l.log10(n).floor(),r=l.div(n,l.pow(10,i));r.toStringWithDecimalPlaces(e)==="10"&&(r=Br,i=i.add(1));const a=i.gte(1e9)?Pe(i,Math.max(Math.max(e,3),Y.defaultDecimalsShown)):i.gte(1e4)?Bt(i,0):i.toStringWithDecimalPlaces(0);return t?r.toStringWithDecimalPlaces(e)+"e"+a:"e"+a}function Bt(n,e){if(n==null)return"NaN";if(n=new l(n),n.mag<.001)return 0 .toFixed(e);const i=n.toStringWithDecimalPlaces(e).split(".");return i[0]=i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),i.length===1?i[0]:i[0]+"."+i[1]}function Bn(n,e){return n==null?"NaN":(n=new l(n),n.mag<1e-4?0 .toFixed(e):(n.mag<.1&&e!==0&&(e=Math.max(Math.max(e,n.log10().negate().ceil().toNumber()),Y.defaultDecimalsShown)),n.toStringWithDecimalPlaces(e)))}const qr=new l("eeee1000"),Or=new l("e100000"),hn=new l("e1000"),qn=new l(1e9),Ur=new l(1e6),Lr=new l(1e3),Hr=new l(.98),_r=new l(.001),On=new l(0);function Pe(n,e,t){if(e==null&&(e=Y.defaultDecimalsShown),t=t??Y.defaultShowSmall,n=new l(n),isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag))return"NaN";if(n.sign<0)return"-"+Pe(n.neg(),e);if(n.mag===Number.POSITIVE_INFINITY)return"Infinity";if(n.gte(qr)){const i=n.slog();return i.gte(Ur)?"F"+Pe(i.floor()):l.pow(10,i.sub(i.floor())).toStringWithDecimalPlaces(3)+"F"+Bt(i.floor(),0)}else{if(n.gte(Or))return bt(n,0,!1);if(n.gte(hn))return bt(n,0);if(n.gte(qn))return bt(n,e);if(n.gte(Lr))return Bt(n,0);if(n.gte(_r)||!t)return Bn(n,e);if(n.eq(On))return 0 .toFixed(e)}return n=Ln(n),n.lt(hn)?bt(n,e).replace(/([^(?:e|F)]*)$/,"-$1"):Pe(n,e)+"⁻¹"}function Ae(n){return n=new l(n),n.sign<0?"-"+Ae(n.neg()):n.gte(qn)||n.lte(Hr)&&!n.eq(On)?Pe(n):Pe(n,0)}function Un(n){return l.lt(n,0)?"-"+Un(l.neg(n)):l.gt(n,2**51)?Pe(l.div(n,31536e3))+"y":(n=new l(n).toNumber(),n<60?Pe(n)+"s":n<3600?Ae(Math.floor(n/60))+"m "+Pe(n%60)+"s":n<86400?Ae(Math.floor(n/3600))+"h "+Ae(Math.floor(n/60)%60)+"m "+Ae(n%60)+"s":n<31536e3?Ae(Math.floor(n/84600)%365)+"d "+Ae(Math.floor(n/3600)%24)+"h "+Ae(Math.floor(n/60)%60)+"m":Ae(Math.floor(n/31536e3))+"y "+Ae(Math.floor(n/84600)%365)+"d "+Ae(Math.floor(n/3600)%24)+"h")}function zr(n,e,t){n=new l(n);let i=n.toStringWithDecimalPlaces(e);return new l(i).gte(t)&&(i=l.sub(t,Math.pow(.1,e)).toStringWithDecimalPlaces(e)),i}function Wr(n,e){return Pe(n,e,!0)}function Ln(n){let e=l.log10(n).ceil();const t=l.div(n,l.pow(10,e));return e=e.neg(),n=new l(10).pow(e).times(t),n}const Gr=Object.freeze(Object.defineProperty({__proto__:null,commaFormat:Bt,default:l,exponentialFormat:bt,format:Pe,formatSmall:Wr,formatTime:Un,formatWhole:Ae,invertOOM:Ln,regularFormat:Bn,toPlaces:zr},Symbol.toStringTag,{value:"Module"})),{exponentialFormat:jr,commaFormat:Jr,regularFormat:Yr,format:Ee,formatWhole:et,formatTime:Gt,toPlaces:Qr,formatSmall:Kr,invertOOM:Zr}=Gr;window.Decimal=l;window.exponentialFormat=jr;window.commaFormat=Jr;window.regularFormat=Yr;window.format=Ee;window.formatWhole=et;window.formatTime=Gt;window.toPlaces=Qr;window.formatSmall=Kr;window.invertOOM=Zr;const We=Symbol("ProxyState"),qt=Symbol("AfterEvaluation");function Se(n,e={}){const t=e;let i=!1,r=!1;const a=[];function u(){if(!i){if(r)throw new Error("Cyclical dependency detected. Cannot evaluate lazy proxy.");r=!0,Object.assign(t,n.call(t,t)),i=!0,a.forEach(c=>c(t))}return t}function s(c){i?c(t):a.push(c)}return new Proxy(t,{get(c,f){if(f===We)return u();if(f===qt)return s;const w=u()[f];return w!=null&&typeof w=="object"&&$e in w?w[$e]:w},set(c,f,w){return u()[f]=w,!0},has(c,f){return f===We||f===qt?!0:Reflect.has(u(),f)},ownKeys(){return Reflect.ownKeys(u())},getOwnPropertyDescriptor(c,f){return i||(Object.assign(t,n.call(t,t)),i=!0),Object.getOwnPropertyDescriptor(c,f)}})}function Xr(n,e){qt in n?n[qt](e):e(n)}function ea(n){let e=n.replace(/([A-Z])/g," $1");return e=e.charAt(0).toUpperCase()+e.slice(1),e}function ta(n){return(n[0]+n.slice(1).replace(/[A-Z]/g,e=>`-${e}`)).toLowerCase()}function na(n){return typeof n=="function"}var K=(n=>(n.Up="Up",n.Down="Down",n.Left="Left",n.Right="Right",n.Default="Up",n))(K||{});function E(n){return na(n)&&n.length===0?F(n):n}const Hn=l.ln(10);function Dt(n){return n}function vt(n,...e){const t=e.find(i=>M(i));return t==null?(console.error("Could not invert due to no input being a variable"),0):t.invert(n)}function ia(n,e){return M(e)?e.invert(l.neg(n)):(console.error("Could not invert due to no input being a variable"),0)}function ra(n,e){return M(e)?e.isIntegrable()?d.neg(e.getIntegralFormula(n)):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function aa(n){return d.neg(n)}function sa(n,e,t){return M(e)?e.invert(l.sub(n,ce(t))):M(t)?t.invert(l.sub(n,ce(e))):(console.error("Could not invert due to no input being a variable"),0)}function oa(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.times(t,e.innermostVariable??0).add(i)}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.times(e,t.innermostVariable??0).add(i)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function la(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.add(i,t)}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.add(i,e)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ua(n,e,t){return M(e)?e.invert(l.add(n,ce(t))):M(t)?t.invert(l.sub(ce(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function ca(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.sub(i,d.times(t,e.innermostVariable??0))}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.times(e,t.innermostVariable??0).sub(i)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function da(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.sub(i,t)}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.sub(i,e)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function fa(n,e,t){return M(e)?e.invert(l.div(n,ce(t))):M(t)?t.invert(l.div(n,ce(e))):(console.error("Could not invert due to no input being a variable"),0)}function ma(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.times(i,t)}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.times(i,e)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function pa(n,e,t){return M(e)?d.div(n,t):M(t)?d.div(n,e):(console.error("Could not apply substitution due to no input being a variable"),d.constant(0))}function ga(n,e,t){return M(e)?e.invert(l.mul(n,ce(t))):M(t)?t.invert(l.div(ce(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function va(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.div(i,t)}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.div(e,i)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ha(n,e,t){return M(e)?d.mul(n,t):M(t)?d.mul(n,e):(console.error("Could not apply substitution due to no input being a variable"),d.constant(0))}function ba(n,e){return M(e)?e.invert(l.recip(n)):(console.error("Could not invert due to no input being a variable"),0)}function ya(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.ln(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function wa(n,e){return M(e)?e.invert(l.pow10(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ca(n){return l.ln(n).sub(1).times(n).div(Hn)}function Sa(n,e){if(M(e)){const t=Hn.times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Na(n,e){return M(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n)],evaluate:Ca,invert:Sa}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function ka(n,e,t){return M(e)?e.invert(l.pow(ce(t),n)):M(t)?t.invert(l.root(ce(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function xa(n,e){return l.ln(n).sub(1).times(n).div(l.ln(e))}function Ia(n,e,t){if(M(e)){const i=l.ln(ce(t)).times(n);return e.invert(i.div(i.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Aa(n,e,t){return M(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n),t],evaluate:xa,invert:Ia}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Ma(n,e){return M(e)?e.invert(l.pow(2,n)):(console.error("Could not invert due to no input being a variable"),0)}function Ta(n){return l.ln(n).sub(1).times(n).div(l.ln(2))}function Fa(n,e){if(M(e)){const t=l.ln(2).times(n);return e.invert(t.div(t.div(Math.E).lambertw()))}return console.error("Could not invert due to no input being a variable"),0}function Pa(n,e){return M(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n)],evaluate:Ta,invert:Fa}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function Ra(n,e){return M(e)?e.invert(l.exp(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ea(n){return l.ln(n).sub(1).times(n)}function Da(n,e){return M(e)?e.invert(l.div(n,l.div(n,Math.E).lambertw())):(console.error("Could not invert due to no input being a variable"),0)}function Va(n,e){return M(e)?e.isIntegrable()?new d({inputs:[e.getIntegralFormula(n)],evaluate:Ea,invert:Da}):(console.error("Could not integrate due to variable not being integrable"),d.constant(0)):(console.error("Could not integrate due to no input being a variable"),d.constant(0))}function $a(n,e,t){return M(e)?e.invert(l.root(n,ce(t))):M(t)?t.invert(l.ln(n).div(l.ln(ce(e)))):(console.error("Could not invert due to no input being a variable"),0)}function Ba(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n),r=d.add(t,1);return d.pow(i,r).div(r)}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n);return d.pow(e,i).div(d.ln(e))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function qa(n,e){return M(e)?e.invert(l.root(n,10)):(console.error("Could not invert due to no input being a variable"),0)}function Oa(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.pow10(t).div(d.ln(10))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ua(n,e,t){return M(e)?e.invert(l.ln(n).div(l.ln(ce(t)))):M(t)?t.invert(l.root(ce(e),n)):(console.error("Could not invert due to no input being a variable"),0)}function La(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.pow(t,i).div(d.ln(t))}else if(M(t)){if(!t.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=t.getIntegralFormula(n),r=d.add(e,1);return d.pow(i,r).div(r)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ha(n,e,t){return M(e)?e.invert(l.root(n,l.recip(ce(t)))):M(t)?t.invert(l.ln(ce(e)).div(l.ln(n))):(console.error("Could not invert due to no input being a variable"),0)}function _a(n,e,t){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const i=e.getIntegralFormula(n);return d.pow(i,d.recip(t).add(1)).times(t).div(d.add(t,1))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function za(n,e){return M(e)?e.invert(l.ln(n)):(console.error("Could not invert due to no input being a variable"),0)}function Wa(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.exp(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ga(n,e=2,t=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(e,1e308).toNumber();return l.tetrate(n,i,t)}function ja(n,e,t,i){return M(e)?e.invert(l.ssqrt(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ja(n,e=2,t=l.fromComponents_noNormalize(1,0,1)){const i=l.minabs(e,1e308).toNumber();return l.iteratedexp(n,i,new l(t))}function Ya(n,e,t,i){return M(e)?e.invert(l.iteratedlog(n,Math.E,l.minabs(1e308,ce(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Qa(n,e=10,t=2){const i=l.minabs(t,1e308).toNumber();return l.iteratedlog(n,e,i)}function Ka(n,e=10){const t=l.minabs(e,1e308).toNumber();return l.slog(n,t)}function Za(n,e,t){return M(e)?e.invert(l.tetrate(n,l.minabs(1e308,ce(t)).toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function Xa(n,e,t){const i=l.minabs(e,1e308).toNumber();return l.layeradd(n,i,t)}function es(n,e,t,i){return M(e)?e.invert(l.layeradd(n,l.minabs(1e308,ce(t)).negate().toNumber())):(console.error("Could not invert due to no input being a variable"),0)}function ts(n,e){return M(e)?e.invert(l.pow(Math.E,n).times(n)):(console.error("Could not invert due to no input being a variable"),0)}function ns(n,e){return M(e)?e.invert(l.tetrate(n,2)):(console.error("Could not invert due to no input being a variable"),0)}function is(n,e,t){const i=l.minabs(e,1e308).toNumber();return l.pentate(n,i,t)}function rs(n,e){return M(e)?e.invert(l.asin(n)):(console.error("Could not invert due to no input being a variable"),0)}function as(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cos(t).neg()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ss(n,e){return M(e)?e.invert(l.acos(n)):(console.error("Could not invert due to no input being a variable"),0)}function os(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.sin(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ls(n,e){return M(e)?e.invert(l.atan(n)):(console.error("Could not invert due to no input being a variable"),0)}function us(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cos(t).ln().neg()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function cs(n,e){return M(e)?e.invert(l.sin(n)):(console.error("Could not invert due to no input being a variable"),0)}function ds(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.asin(t).times(t).add(d.sqrt(d.sub(1,d.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function fs(n,e){return M(e)?e.invert(l.cos(n)):(console.error("Could not invert due to no input being a variable"),0)}function ms(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.acos(t).times(t).sub(d.sqrt(d.sub(1,d.pow(t,2))))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ps(n,e){return M(e)?e.invert(l.tan(n)):(console.error("Could not invert due to no input being a variable"),0)}function gs(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.atan(t).times(t).sub(d.ln(d.pow(t,2).add(1)).div(2))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function vs(n,e){return M(e)?e.invert(l.asinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function hs(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cosh(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function bs(n,e){return M(e)?e.invert(l.acosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function ys(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.sinh(t)}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ws(n,e){return M(e)?e.invert(l.atanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Cs(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.cosh(t).ln()}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Ss(n,e){return M(e)?e.invert(l.sinh(n)):(console.error("Could not invert due to no input being a variable"),0)}function Ns(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.asinh(t).times(t).sub(d.pow(t,2).add(1).sqrt())}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function ks(n,e){return M(e)?e.invert(l.cosh(n)):(console.error("Could not invert due to no input being a variable"),0)}function xs(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.acosh(t).times(t).sub(d.add(t,1).sqrt().times(d.sub(t,1).sqrt()))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function Is(n,e){return M(e)?e.invert(l.tanh(n)):(console.error("Could not invert due to no input being a variable"),0)}function As(n,e){if(M(e)){if(!e.isIntegrable())return console.error("Could not integrate due to variable not being integrable"),d.constant(0);const t=e.getIntegralFormula(n);return d.atanh(t).times(t).add(d.sub(1,d.pow(t,2)).ln().div(2))}return console.error("Could not integrate due to no input being a variable"),d.constant(0)}function nt(n){return(e,t)=>new d({inputs:[e,t],evaluate:n,invert:Dt})}function M(n){return n instanceof Nt&&n.hasVariable()}function ce(n,e){return n instanceof Nt?n.evaluate(e):o(n)}function Ms(){return d.pow(this,2).div(2)}function Ts(){return this}const _=class _{constructor(e){D(this,"inputs");D(this,"internalEvaluate");D(this,"internalInvert");D(this,"internalIntegrate");D(this,"internalIntegrateInner");D(this,"applySubstitution");D(this,"description");D(this,"internalVariables");D(this,"innermostVariable");D(this,"negate",this.neg);D(this,"negated",this.neg);D(this,"sgn",this.sign);D(this,"plus",this.add);D(this,"subtract",this.sub);D(this,"minus",this.sub);D(this,"multiply",this.mul);D(this,"times",this.mul);D(this,"divide",this.div);D(this,"divideBy",this.div);D(this,"dividedBy",this.div);D(this,"reciprocal",this.recip);D(this,"reciprocate",this.recip);D(this,"logarithm",this.log);let t;"inputs"in e&&(e.inputs=e.inputs.map(i=>typeof i=="object"&&$e in i?i[$e]:i)),"variable"in e?(typeof e.variable=="object"&&$e in e.variable&&(e.variable=e.variable[$e]),t=this.setupVariable(e)):"evaluate"in e?t=this.setupFormula(e):t=this.setupConstant(e),this.inputs=t.inputs,this.internalVariables=t.internalVariables,this.innermostVariable=t.innermostVariable,this.internalEvaluate=t.internalEvaluate,this.internalInvert=t.internalInvert,this.internalIntegrate=t.internalIntegrate,this.internalIntegrateInner=t.internalIntegrateInner,this.applySubstitution=t.applySubstitution,this.description=e.description}setupVariable({variable:e}){return{inputs:[e],internalVariables:1,innermostVariable:e,internalIntegrate:Ms,internalIntegrateInner:Ts,applySubstitution:Dt}}setupConstant({inputs:e}){return e.length!==1&&console.error("Evaluate function is required if inputs is not length 1"),{inputs:e,internalVariables:0}}setupFormula(e){const{inputs:t,evaluate:i,invert:r,integrate:a,integrateInner:u,applySubstitution:s}=e,c=t.reduce((p,y)=>p+(y instanceof _?y.internalVariables:0),0),f=t.find(p=>p instanceof _&&p.hasVariable()),w=c===1?f==null?void 0:f.innermostVariable:void 0,h=(f==null?void 0:f.isInvertible())??!1,b=(f==null?void 0:f.isIntegrable())??!1;return{inputs:t,internalEvaluate:i,internalInvert:h?r:void 0,internalIntegrate:b?a:void 0,internalIntegrateInner:u,applySubstitution:s,innermostVariable:w,internalVariables:c}}isInvertible(){return this.hasVariable()&&(this.internalInvert!=null||this.internalEvaluate==null)}isIntegrable(){return this.hasVariable()&&this.internalIntegrate!=null}isIntegralInvertible(){return this.isIntegrable()?this.getIntegralFormula().isInvertible():!1}hasVariable(){return this.internalVariables===1}evaluate(e){var t;return((t=this.internalEvaluate)==null?void 0:t.call(this,...this.inputs.map(i=>ce(i,e))))??(this.hasVariable()?e:null)??ce(this.inputs[0])}equals(e){return this.inputs.length===e.inputs.length&&this.inputs.every((t,i)=>t instanceof _&&e.inputs[i]instanceof _?t.equals(e.inputs[i]):!(t instanceof _)&&!(e.inputs[i]instanceof _)&&l.eq(o(t),o(e.inputs[i])))&&this.internalEvaluate===e.internalEvaluate&&this.internalInvert===e.internalInvert&&this.internalIntegrate===e.internalIntegrate&&this.internalVariables===e.internalVariables}static constant(e){return new d({inputs:[e]})}static variable(e){return new d({variable:e})}static stringify(e){return e instanceof _?e.description!=null?e.description:e.internalEvaluate==null?e.hasVariable()?"x":Ee(e.inputs[0]??0):`${e.internalEvaluate.name}(${e.inputs.map(d.stringify).join(", ")})`:Ee(o(e))}static step(e,t,i){const r=i(d.variable(0)),a=E(t);function u(c){return l.lt(c,o(a))?c:l.add(r.evaluate(l.sub(c,o(a))),o(a))}function s(c,f){return M(f)&&r.isInvertible()?(l.gt(c,o(a))&&(c=l.add(r.invert(l.sub(c,o(a))),o(a))),f.invert(c)):(console.error("Could not invert due to no input being a variable"),0)}return new d({inputs:[e],evaluate:u,invert:r.isInvertible()&&r.hasVariable()?s:void 0,description:"indeterminate"})}static if(e,t,i,r){const a=B(0),u=d.variable(a),s=i(u),c=r==null?void 0:r(u),f=E(t);function w(b){return o(f)?(a.value=b,s.evaluate()):c?(a.value=b,c.evaluate()):b}function h(b,p){return!M(p)||!s.isInvertible()||c!=null&&!c.isInvertible()?(console.error("Could not invert due to no input being a variable"),0):o(f)?p.invert(s.invert(b)):c?p.invert(c.invert(b)):p.invert(b)}return new d({inputs:[e],evaluate:w,invert:s.isInvertible()&&s.hasVariable()?h:void 0,description:"indeterminate"})}static conditional(e,t,i,r){return d.if(e,t,i,r)}static abs(e){return new d({inputs:[e],evaluate:l.abs})}static neg(e){return new d({inputs:[e],evaluate:l.neg,invert:ia,applySubstitution:aa,integrate:ra})}static sign(e){return new d({inputs:[e],evaluate:l.sign})}static round(e){return new d({inputs:[e],evaluate:l.round,invert:vt})}static floor(e){return new d({inputs:[e],evaluate:l.floor,invert:vt})}static ceil(e){return new d({inputs:[e],evaluate:l.ceil,invert:vt})}static trunc(e){return new d({inputs:[e],evaluate:l.trunc,invert:vt})}static add(e,t){return new d({inputs:[e,t],evaluate:l.add,invert:sa,integrate:oa,integrateInner:la,applySubstitution:Dt})}static sub(e,t){return new d({inputs:[e,t],evaluate:l.sub,invert:ua,integrate:ca,integrateInner:da,applySubstitution:Dt})}static mul(e,t){return new d({inputs:[e,t],evaluate:l.mul,invert:fa,integrate:ma,applySubstitution:pa})}static div(e,t){return new d({inputs:[e,t],evaluate:l.div,invert:ga,integrate:va,applySubstitution:ha})}static recip(e){return new d({inputs:[e],evaluate:l.recip,invert:ba,integrate:ya})}static clamp(e,t,i){return new d({inputs:[e,t,i],evaluate:l.clamp,invert:vt})}static pLog10(e){return new d({inputs:[e],evaluate:l.pLog10})}static absLog10(e){return new d({inputs:[e],evaluate:l.absLog10})}static log10(e){return new d({inputs:[e],evaluate:l.log10,invert:wa,integrate:Na})}static log(e,t){return new d({inputs:[e,t],evaluate:l.log,invert:ka,integrate:Aa})}static log2(e){return new d({inputs:[e],evaluate:l.log2,invert:Ma,integrate:Pa})}static ln(e){return new d({inputs:[e],evaluate:l.ln,invert:Ra,integrate:Va})}static pow(e,t){return new d({inputs:[e,t],evaluate:l.pow,invert:$a,integrate:Ba})}static pow10(e){return new d({inputs:[e],evaluate:l.pow10,invert:qa,integrate:Oa})}static pow_base(e,t){return new d({inputs:[e,t],evaluate:l.pow_base,invert:Ua,integrate:La})}static root(e,t){return new d({inputs:[e,t],evaluate:l.root,invert:Ha,integrate:_a})}static factorial(e){return new d({inputs:[e],evaluate:l.factorial})}static gamma(e){return new d({inputs:[e],evaluate:l.gamma})}static lngamma(e){return new d({inputs:[e],evaluate:l.lngamma})}static exp(e){return new d({inputs:[e],evaluate:l.exp,invert:za,integrate:Wa})}static sqr(e){return d.pow(e,2)}static sqrt(e){return d.root(e,2)}static cube(e){return d.pow(e,3)}static cbrt(e){return d.root(e,3)}static tetrate(e,t=2,i=l.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,i],evaluate:Ga,invert:ja})}static iteratedexp(e,t=2,i=l.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,i],evaluate:Ja,invert:Ya})}static iteratedlog(e,t=10,i=1){return new d({inputs:[e,t,i],evaluate:Qa})}static slog(e,t=10){return new d({inputs:[e,t],evaluate:Ka,invert:Za})}static layeradd10(e,t){return new d({inputs:[e,t],evaluate:l.layeradd10})}static layeradd(e,t,i=10){return new d({inputs:[e,t,i],evaluate:Xa,invert:es})}static lambertw(e){return new d({inputs:[e],evaluate:l.lambertw,invert:ts})}static ssqrt(e){return new d({inputs:[e],evaluate:l.ssqrt,invert:ns})}static pentate(e,t=2,i=l.fromComponents_noNormalize(1,0,1)){return new d({inputs:[e,t,i],evaluate:is})}static sin(e){return new d({inputs:[e],evaluate:l.sin,invert:cs,integrate:as})}static cos(e){return new d({inputs:[e],evaluate:l.cos,invert:fs,integrate:os})}static tan(e){return new d({inputs:[e],evaluate:l.tan,invert:ps,integrate:us})}static asin(e){return new d({inputs:[e],evaluate:l.asin,invert:rs,integrate:ds})}static acos(e){return new d({inputs:[e],evaluate:l.acos,invert:ss,integrate:ms})}static atan(e){return new d({inputs:[e],evaluate:l.atan,invert:ls,integrate:gs})}static sinh(e){return new d({inputs:[e],evaluate:l.sinh,invert:Ss,integrate:hs})}static cosh(e){return new d({inputs:[e],evaluate:l.cosh,invert:ks,integrate:ys})}static tanh(e){return new d({inputs:[e],evaluate:l.tanh,invert:Is,integrate:Cs})}static asinh(e){return new d({inputs:[e],evaluate:l.asinh,invert:vs,integrate:Ns})}static acosh(e){return new d({inputs:[e],evaluate:l.acosh,invert:bs,integrate:xs})}static atanh(e){return new d({inputs:[e],evaluate:l.atanh,invert:ws,integrate:As})}stringify(){return d.stringify(this)}step(e,t){return d.step(this,e,t)}if(e,t){return d.if(this,e,t)}conditional(e,t){return d.if(this,e,t)}abs(){return d.abs(this)}neg(){return d.neg(this)}sign(){return d.sign(this)}round(){return d.round(this)}floor(){return d.floor(this)}ceil(){return d.ceil(this)}trunc(){return d.trunc(this)}add(e){return d.add(this,e)}sub(e){return d.sub(this,e)}mul(e){return d.mul(this,e)}div(e){return d.div(this,e)}recip(){return d.recip(this)}max(e){return d.max(this,e)}min(e){return d.min(this,e)}maxabs(e){return d.maxabs(this,e)}minabs(e){return d.minabs(this,e)}clamp(e,t){return d.clamp(this,e,t)}clampMin(e){return d.clampMin(this,e)}clampMax(e){return d.clampMax(this,e)}pLog10(){return d.pLog10(this)}absLog10(){return d.absLog10(this)}log10(){return d.log10(this)}log(e){return d.log(this,e)}log2(){return d.log2(this)}ln(){return d.ln(this)}pow(e){return d.pow(this,e)}pow10(){return d.pow10(this)}pow_base(e){return d.pow_base(this,e)}root(e){return d.root(this,e)}factorial(){return d.factorial(this)}gamma(){return d.gamma(this)}lngamma(){return d.lngamma(this)}exp(){return d.exp(this)}sqr(){return d.pow(this,2)}sqrt(){return d.root(this,2)}cube(){return d.pow(this,3)}cbrt(){return d.root(this,3)}tetrate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return d.tetrate(this,e,t)}iteratedexp(e=2,t=l.fromComponents_noNormalize(1,0,1)){return d.iteratedexp(this,e,t)}iteratedlog(e=10,t=1){return d.iteratedlog(this,e,t)}slog(e=10){return d.slog(this,e)}layeradd10(e){return d.layeradd10(this,e)}layeradd(e,t){return d.layeradd(this,e,t)}lambertw(){return d.lambertw(this)}ssqrt(){return d.ssqrt(this)}pentate(e=2,t=l.fromComponents_noNormalize(1,0,1)){return d.pentate(this,e,t)}sin(){return d.sin(this)}cos(){return d.cos(this)}tan(){return d.tan(this)}asin(){return d.asin(this)}acos(){return d.acos(this)}atan(){return d.atan(this)}sinh(){return d.sinh(this)}cosh(){return d.cosh(this)}tanh(){return d.tanh(this)}asinh(){return d.asinh(this)}acosh(){return d.acosh(this)}atanh(){return d.atanh(this)}};D(_,"negate",_.neg),D(_,"negated",_.neg),D(_,"sgn",_.sign),D(_,"plus",_.add),D(_,"subtract",_.sub),D(_,"minus",_.sub),D(_,"multiply",_.mul),D(_,"times",_.mul),D(_,"divide",_.div),D(_,"divideBy",_.div),D(_,"dividedBy",_.div),D(_,"reciprocal",_.recip),D(_,"reciprocate",_.recip),D(_,"max",nt(l.max)),D(_,"min",nt(l.min)),D(_,"minabs",nt(l.minabs)),D(_,"maxabs",nt(l.maxabs)),D(_,"clampMin",nt(l.clampMin)),D(_,"clampMax",nt(l.clampMax)),D(_,"logarithm",_.log);let Nt=_;class d extends Nt{constructor(){super(...arguments);D(this,"integralFormula")}invert(t){return this.internalInvert&&this.hasVariable()?this.internalInvert.call(this,t,...this.inputs):this.inputs.length===1&&this.hasVariable()?t:(console.error("Cannot invert non-invertible formula"),0)}evaluateIntegral(t){return this.isIntegrable()?this.getIntegralFormula().evaluate(t):(console.error("Cannot evaluate integral of formula without integral"),0)}invertIntegral(t){return!this.isIntegrable()||!this.getIntegralFormula().isInvertible()?(console.error("Cannot invert integral of formula without invertible integral"),0):this.getIntegralFormula().invert(t)}calculateConstantOfIntegration(){const t=this.getIntegralFormula().evaluate(1),i=l.add(this.evaluate(0),this.evaluate(1)).div(2);return l.sub(i,t)}getIntegralFormula(t){if(this.integralFormula!=null&&t==null)return this.integralFormula;if(t==null){if(this.applySubstitution==null){if(t=[],this.internalIntegrate==null)return console.error("Cannot integrate formula with non-integrable operation"),d.constant(0);let i=this.internalIntegrate.call(this,t,...this.inputs);t.forEach(r=>i=r(i)),this.integralFormula=i}else if(this.internalIntegrate)this.integralFormula=this.internalIntegrate.call(this,void 0,...this.inputs);else if(this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable())this.integralFormula=this;else return console.error("Cannot integrate formula without variable"),d.constant(0);return this.integralFormula}else return this.applySubstitution==null?(console.error("Cannot have two complex operations in an integrable formula"),d.constant(0)):(t.push(i=>this.applySubstitution.call(this,i,...this.inputs)),this.internalIntegrateInner?this.internalIntegrateInner.call(this,t,...this.inputs):this.internalIntegrate?this.internalIntegrate.call(this,t,...this.inputs):this.inputs.length===1&&this.internalEvaluate==null&&this.hasVariable()?this:(console.error("Cannot integrate formula without variable"),d.constant(0)))}}function Fs(n,e,t=!0,i,r=l.dInf){const a=E(t),u=E(i),s=E(r);return F(()=>{const c=o(s);if(l.eq(c,1))return l.gte(e.value,n.evaluate())?l.dOne:l.dZero;const f=o(a),w=o(u)??(f?10:0);let h=0;if(l.gt(c,w)){if(!n.isInvertible())return console.error("Cannot calculate max affordable of non-invertible formula with more maxBulkAmount than directSum"),0;if(f){if(!n.isIntegralInvertible())return console.error("Cannot calculate max affordable of formula with non-invertible integral"),0;h=l.floor(n.invertIntegral(l.add(e.value,n.evaluateIntegral()))).sub(o(n.innermostVariable)??0)}else h=l.floor(n.invert(e.value))}if(h=l.clampMax(h,c),w>0){const b=h;h=l.sub(h,w).clampMin(0);let p;for(f?p=Vt(n,h,!0,0):p=n.evaluate(l.add(o(n.innermostVariable)??0,h));l.lt(h,c)&&l.lt(h,Number.MAX_SAFE_INTEGER)&&l.add(b,1).gte(h);){const y=n.evaluate(h.add(o(n.innermostVariable)??0));if(l.add(p,y).lte(e.value))h=h.add(1),p=l.add(p,y);else break}}return h})}function Vt(n,e,t=!0,i){if(l.eq(e,1))return n.evaluate();const r=o(n.innermostVariable)??0;let a=l.add(e,r);const u=a;i??(i=t?10:0),a=a.sub(i).clampMin(r);let s=0;if(l.gt(e,i)){if(!n.isInvertible())return console.error("Cannot calculate cost with indirect sum of non-invertible formula"),0;if(t){if(!n.isIntegrable())return console.error("Cannot calculate cost with cumulative cost of non-integrable formula"),0;if(s=l.sub(n.evaluateIntegral(a),n.evaluateIntegral()),u.gt(1e308))return l.add(s,l.sub(u,a).times(n.evaluate(a)))}else if(s=n.evaluate(a),a=a.add(1),u.gt(1e308))return l.sub(u,a).add(1).times(s)}for(let c=a.toNumber();c<u.toNumber();c++)s=l.add(s,n.evaluate(c));return s}const Ge=Symbol("PersistentState"),Ue=Symbol("DefaultValue"),Ot=Symbol("StackTrace"),Ut=Symbol("Deleted"),$e=Symbol("NonPersistent"),Ze=Symbol("SaveDataPath"),ut=Symbol("SkipPersistence");function Ps(){var n;return((n=new Error().stack)==null?void 0:n.split(`
`).slice(3,5).map(e=>e.trim()).join(`
`))??""}function bn(n,e){var t;l.isNaN(e)&&(te.hasNaN||(P.autosave=!1,te.hasNaN=!0,te.NaNPath=n[Ze],te.NaNPersistent=n),console.error(`Attempted to save NaN value to ${(t=n[Ze])==null?void 0:t.join(".")}`)),n[Ge].value=e}function O(n,e=!0){const t=ke(n)?n:B(n);ke(n)&&(n=n.value);const i=F({get(){return t.value},set(a){e?bn(r,a):r[Ge].value=a}});i[Ue]=n;const r={get value(){return t.value},set value(a){e?bn(r,a):r[Ge].value=a},__v_isRef:!0,[Ge]:t,[Ue]:n,[Ot]:Ps(),[Ut]:!1,[$e]:i,[Ze]:void 0};return Me.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",r,`
Created at:
`+r[Ot]):rt[Me[Me.length-1]].add(r),r}function Rs(n){return n!=null&&typeof n=="object"&&Ge in n}function X(n){return!(We in n)&&$e in n?n[$e]:new Proxy(n,{get(e,t){if(t!==Ge)return t===ut?!0:e[t]},set(e,t,i){return e[t]=i,!0},has(e,t){return t===Ge?!1:t===ut?!0:Reflect.has(e,t)}})}function Es(n){Me.length===0?console.warn("Deleting a persistent ref outside of a layer. Ignoring...",n):rt[Me[Me.length-1]].delete(n),n[Ut]=!0}me.on("addLayer",(n,e)=>{const t=[],i=(r,a=[])=>{let u=!1;return Object.keys(r).forEach(s=>{let c=r[s];if(c!=null&&typeof c=="object"){if(ut in c&&c[ut]===!0)return;if(We in c&&(c=c[We]),Rs(c)){if(u=!0,c[Ut]){console.warn("Deleted persistent ref present in returned object. Ignoring...",c,`
Created at:
`+c[Ot]);return}rt[n.id].delete(c);const f=[n.id,...a,s];c[Ze]!=null&&JSON.stringify(f)!==JSON.stringify(c[Ze])&&console.error(`Persistent ref is being saved to \`${f.join(".")}\` when it's already present at \`${c[Ze].join(".")}\`.`,"This can cause unexpected behavior when loading saves between updates."),c[Ze]=f;const w=a.reduce((b,p)=>(p in b||(b[p]={}),b[p]),e),h=w[s];w[s]=c[Ge],xi(w)?h!=null?w[s]=h:w[s]=c[Ue]:h!=null?w[s].value=h:w[s].value=c[Ue]}else!(c instanceof l)&&!(c instanceof d)&&!ke(c)&&!t.includes(c)&&(typeof c.type=="symbol"&&t.push(c),i(c,[...a,s])&&(Array.isArray(c)&&!Array.isArray(r)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",We in r?r[We]:r,s):u=!0))}}),u};i(n[We]),rt[n.id].forEach(r=>{r[Ut]||console.error(`Created persistent ref in "${n.id}" without registering it to the layer!`,`(Hint: Ref value: ${r.value}, Default: ${r[Ue]} Type: ${typeof r.value})`,`Make sure to include everything persistent in the returned object.

Created at:
`+r[Ot])}),rt[n.id].clear()});const _n=Symbol("RegisterNode"),zn=Symbol("UnregisterNode"),Wn=Symbol("Nodes"),Gn=Symbol("Bounds"),Ce=Wt({});window.layers=Ce;const rt={},Me=[];function pt(n,e){return Se(()=>{const t=En();Me.push(n),rt[n]=new Set;const i={id:n,emitter:t,...t,nodes:B({}),minimized:O(!1,!1)},r=e(i),{color:a,display:u,classes:s,style:c,name:f,forceHideGoBack:w,minWidth:h,minimizable:b,minimizedDisplay:p,...y}=r;if(Me[Me.length-1]==null||Me[Me.length-1]!==n)throw new Error(`Adding layers stack in invalid state. This should not happen
Stack: ${Me}
Trying to pop ${n}`);Me.pop();const C=E(c),A={...i,...y,color:E(a),display:u,classes:E(s),style:F(()=>{let I=o(A.minWidth);return(typeof I=="number"||!Number.isNaN(parseInt(I)))&&(I=I+"px"),{...o(C),...i.minimized.value?{flexGrow:"0",flexShrink:"0",width:"60px",minWidth:"",flexBasis:"",margin:"0"}:{flexGrow:"",flexShrink:"",width:"",minWidth:I,flexBasis:I,margin:""}}}),name:E(f)??n,forceHideGoBack:E(w),minWidth:E(h)??600,minimizable:E(b)??!0,minimizedDisplay:p};return A})}function Ds(n,e){if(console.info("Adding layer",n.id),Ce[n.id]!=null){console.error("Attempted to add layer with same ID as existing layer",n.id,Ce[n.id]);return}e.layers??(e.layers={}),e.layers[n.id]==null&&(e.layers[n.id]={}),Ce[n.id]=n,me.emit("addLayer",n,e.layers[n.id])}function Vs(n){console.info("Removing layer",n.id),me.emit("removeLayer",n),delete Ce[n.id]}me.on("update",function(e){Object.values(Ce).forEach(t=>{t==null||t.emit("preUpdate",e)}),Object.values(Ce).forEach(t=>{t==null||t.emit("update",e)}),Object.values(Ce).forEach(t=>{t==null||t.emit("postUpdate",e)})});const $s=j({__name:"Node",props:{id:{}},setup(n){const e=n,t=$t(_n,()=>{}),i=$t(zn,()=>{}),r=Mt(null),a=F(()=>r.value&&r.value.parentElement);return xe([a,Xe(e,"id")],([u,s],[c,f])=>{c&&i(o(f)),u&&t(s,u)}),Tn(()=>i(e.id)),(u,s)=>(N(),x("div",{class:"node",ref_key:"node",ref:r},null,512))}}),yt=re($s,[["__scopeId","data-v-4673aca5"]]),Bs=j({__name:"Spacer",props:{width:{default:"8px"},height:{default:"17px"}},setup(n){return(e,t)=>(N(),x("div",{style:fe({width:e.width,height:e.height})},null,4))}});function tt(n,e="points",t=0,i=void 0){const r=ke(n)?n:O(n);if(r.displayName=e,r.precision=t,r.small=i,!ke(n)){const a=r[$e];a.displayName=e,a.precision=t,a.small=i}return r}function jn(n){const e=O(n.value);return xe(n,t=>{Ft.value||l.gt(t,e.value)&&(e.value=t)}),e}function Jn(n){const e=O(n.value);return xe(n,(t,i)=>{Ft.value||l.gt(t,i)&&(e.value=l.add(e.value,l.sub(t,i)))}),e}const qs=new l("10^^8"),Os=new l("1e100");function Us(n,e){const t=B(0),i=B(0),r=B(0);return me.on("update",u=>{if(i.value=0,l.lte(n.value,Os)){r.value=n.value;return}let s=n.value,c=r.value;if(r.value=s,l.gt(s,c))if(l.gte(s,qs))s=l.slog(s,1e10),c=l.slog(c,1e10),t.value=s.sub(c).div(u),i.value=-1;else for(;l.div(s,c).log(10).div(u).gte("100")&&i.value<=5&&l.gt(c,0);)s=l.log10(s),c=l.log10(c),t.value=s.sub(c).div(u),i.value++}),F(()=>i.value===0?e?Ee(e.value,n.precision,n.small)+" "+n.displayName+"/s":"":Ee(t.value)+" OOM"+(i.value<0?"^OOM":"^"+i.value)+"s/sec")}function ct(n,e){const t=e??n.value;return l.eq(n.precision,0)?et(n.small?t:l.floor(t)):Ee(t,n.precision,n.small)}const Ls={class:"table"},Hs=j({__name:"Column",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=F(()=>mt[ee.theme].mergeAdjacent&&e.dontMerge!==!0);return(i,r)=>(N(),x("div",Ls,[g("div",{class:oe(["col",{mergeAdjacent:t.value}])},[Be(i.$slots,"default")],2)]))}}),_s={class:"table"},zs=j({__name:"Row",props:{dontMerge:{type:Boolean}},setup(n){const e=n,t=F(()=>mt[ee.theme].mergeAdjacent&&e.dontMerge!==!0);return(i,r)=>(N(),x("div",_s,[g("div",{class:oe(["row",{mergeAdjacent:t.value}])},[Be(i.$slots,"default")],2)]))}});let Ws=0;function Gs(n="feature-"){return n+Ws++}var jt=(n=>(n[n.Visible=0]="Visible",n[n.Hidden=1]="Hidden",n[n.None=2]="None",n))(jt||{});function Jt(n){const e=o(n);return e!==2&&e!==!1}function js(n){return o(n)===1}function an(n,...e){const t=[],i=r=>{Object.keys(r).forEach(a=>{const u=r[a];u!=null&&typeof u=="object"&&u.__v_isVNode!==!0&&(e.includes(u.type)?t.push(u):!(u instanceof l)&&!ke(u)&&i(u))})};return i(n),t}const Js=j({__name:"VueFeature",props:{id:{},components:{},wrappers:{},visibility:{default:!0},style:{default:()=>({})},classes:{default:()=>({})}},setup(n){const e=n,t=()=>e.wrappers.reduce((i,r)=>()=>r(i),()=>m(U,null,[e.components.map(i=>W(i))]))();return(i,r)=>o(Jt)(o(i.visibility))?(N(),x("div",{key:0,style:fe([{visibility:o(js)(o(i.visibility))?"hidden":void 0},o(i.style)]),class:oe({feature:!0,...o(i.classes)})},[m(t),m(yt,{id:i.id},null,8,["id"])],6)):q("",!0)}});function Yn(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pn(n)}const Qn=Symbol("VueFeature");function He(n,e,t){return{id:Gs(n),visibility:E(e.visibility),classes:E(e.classes),style:E(e.style),components:t==null?[]:[t],wrappers:[],[Qn]:!0}}function W(n,e){if(typeof n=="object"&&Qn in n){const{id:t,visibility:i,style:r,classes:a,components:u,wrappers:s}=n;return m(Js,{id:t,visibility:i,style:r,classes:a,components:u,wrappers:s},null)}return n=Fn(n),(e==null?void 0:e(n))??n}function sn(...n){let e;return m(zs,null,Yn(e=n.map(t=>W(t)))?e:{default:()=>[e]})}function Kn(...n){let e;return m(Hs,null,Yn(e=n.map(t=>W(t)))?e:{default:()=>[e]})}function yn(n,e){return n.reduce((t,i)=>m(U,null,[t,e,W(i)]),m(U,null,null))}function Yt(n){return n!=null&&typeof n=="object"&&"type"in n&&"children"in n}function Zn(n,e){const t=B(null),i=B(void 0);function r(s){t.value==null&&(t.value=setInterval(u,250)),i.value=s,e!=null&&(e.value=!0)}function a(){t.value!=null&&(clearInterval(t.value),t.value=null),e!=null&&(e.value=!1)}function u(){n(i.value)}return Tn(a),{start:r,stop:a,handleHolding:u}}function Ys(n){return Object.keys(n).reduce((e,t)=>(e[ta(t)]=n[t],e),{})}const Qs=["x1","y1","x2","y2"],Ks=j({__name:"Link",props:{link:{},startNode:{},endNode:{},boundingRect:{}},setup(n){const e=n,t=F(()=>{const a=e.startNode.rect,u=e.boundingRect,s=u?{x:a.x+a.width/2-u.x,y:a.y+a.height/2-u.y}:{x:0,y:0};return e.link.offsetStart&&(s.x+=e.link.offsetStart.x,s.y+=e.link.offsetStart.y),s}),i=F(()=>{const a=e.endNode.rect,u=e.boundingRect,s=u?{x:a.x+a.width/2-u.x,y:a.y+a.height/2-u.y}:{x:0,y:0};return e.link.offsetEnd&&(s.x+=e.link.offsetEnd.x,s.y+=e.link.offsetEnd.y),s}),r=F(()=>Ys(e.link));return(a,u)=>(N(),x("line",Le({"stroke-width":"15px",stroke:"white"},r.value,{x1:t.value.x,y1:t.value.y,x2:i.value.x,y2:i.value.y}),null,16,Qs))}}),Zs=j({__name:"Links",props:{links:{}},setup(n){var f;const e=n;function t(){var w;s.value=(w=r.value)==null?void 0:w.getBoundingClientRect()}const i=new ResizeObserver(t),r=Mt(null),a=$t(Wn,B({})),u=$t(Gn,B(void 0)),s=B((f=r.value)==null?void 0:f.getBoundingClientRect());xe(u,t),At(()=>{const w=r.value;w!=null&&i.observe(w),t()});const c=F(()=>{var h;const w=a.value;return((h=o(e.links))==null?void 0:h.filter(b=>{var p,y;return((p=w[b.startNode.id])==null?void 0:p.rect)&&((y=w[b.endNode.id])==null?void 0:y.rect)}))??[]});return(w,h)=>(N(),x(U,null,[c.value?(N(),x("svg",Ii(Le({key:0},w.$attrs)),[(N(!0),x(U,null,ze(c.value,(b,p)=>(N(),ae(Ks,{key:p,link:b,boundingRect:s.value,startNode:o(a)[b.startNode.id],endNode:o(a)[b.endNode.id]},null,8,["link","boundingRect","startNode","endNode"]))),128))],16)):q("",!0),g("div",{ref_key:"resizeListener",ref:r,class:"resize-listener"},null,512)],64))}}),Xs=re(Zs,[["__scopeId","data-v-95f1a2c2"]]),eo=j({__name:"Tree",props:{nodes:{},leftSideNodes:{},rightSideNodes:{},branches:{}},setup(n){const e=n,t=()=>o(e.nodes).map(a=>m("span",{class:"row tree-row",style:"margin: 50px auto;"},[a.map(u=>W(u))])),i=()=>e.leftSideNodes==null?m(U,null,null):m("span",{class:"left-side-nodes small"},[o(e.leftSideNodes).map(a=>W(a))]),r=()=>e.rightSideNodes==null?m(U,null,null):m("span",{class:"side-nodes small"},[o(e.rightSideNodes).map(a=>W(a))]);return(a,u)=>(N(),x(U,null,[m(t),a.leftSideNodes?(N(),ae(i,{key:0})):q("",!0),a.rightSideNodes?(N(),ae(r,{key:1})):q("",!0),a.branches?(N(),ae(Xs,{key:2,links:o(a.branches)},null,8,["links"])):q("",!0)],64))}}),to=re(eo,[["__scopeId","data-v-b63a12ba"]]),no=j({__name:"TreeNode",props:{canClick:{},display:{},color:{},glowColor:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?m(U,null,null):W(t.display,s=>m("div",null,[s])),{start:a,stop:u}=Zn(()=>i("hold"));return(s,c)=>(N(),x("button",{style:fe({backgroundColor:o(s.color),boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 20px ${o(s.glowColor)}`}),class:oe({treeNode:!0,can:o(s.canClick)}),onClick:c[0]||(c[0]=f=>i("click",f)),onMousedown:c[1]||(c[1]=(...f)=>o(a)&&o(a)(...f)),onMouseleave:c[2]||(c[2]=(...f)=>o(u)&&o(u)(...f)),onMouseup:c[3]||(c[3]=(...f)=>o(u)&&o(u)(...f)),onTouchstartPassive:c[4]||(c[4]=(...f)=>o(a)&&o(a)(...f)),onTouchendPassive:c[5]||(c[5]=(...f)=>o(u)&&o(u)(...f)),onTouchcancelPassive:c[6]||(c[6]=(...f)=>o(u)&&o(u)(...f))},[m(r)],38))}}),io=re(no,[["__scopeId","data-v-80b5b7b8"]]),ro=Symbol("TreeNode"),ao=Symbol("Tree");function so(n){return Se(()=>{const e=(n==null?void 0:n())??{},{canClick:t,color:i,display:r,glowColor:a,onClick:u,onHold:s,...c}=e,f={type:ro,...c,...He("treeNode",e,()=>m(io,{canClick:f.canClick,display:f.display,onClick:f.onClick,onHold:f.onHold,color:f.color,glowColor:f.glowColor},null)),canClick:E(t)??!0,color:E(i),display:r,glowColor:E(a),onClick:u==null?void 0:function(w){o(f.canClick)!==!1&&u.call(f,w)},onHold:s==null?void 0:function(){o(f.canClick)!==!1&&s.call(f)}};return f})}function oo(n){return Se(()=>{const e=n(),{branches:t,nodes:i,leftSideNodes:r,rightSideNodes:a,resetPropagation:u,onReset:s,style:c,...f}=e,w=E(c);e.style=()=>({position:"static",...o(w)??{}});const h=t==null?void 0:E(t),b={type:ao,...f,...He("tree",e,()=>m(to,{nodes:b.nodes,leftSideNodes:b.leftSideNodes,rightSideNodes:b.rightSideNodes,branches:b.branches},null)),branches:h,isResetting:B(!1),resettingNode:Mt(null),nodes:E(i),leftSideNodes:E(r),rightSideNodes:E(a),links:h==null?[]:X(h),resetPropagation:u,onReset:s,reset:function(p){var y,C;b.isResetting.value=!0,b.resettingNode.value=p,(y=b.resetPropagation)==null||y.call(b,b,p),(C=b.onReset)==null||C.call(b,p),b.isResetting.value=!1,b.resettingNode.value=null}};return b})}const lo=function(n,e){var a;const t=o(n.branches);if(t==null)return;const i=[];let r=[e];for(;r.length!==0;){const u=[];for(const s of r)for(const c of t.filter(f=>f.startNode===s))[...i,...r].includes(c.endNode)||(u.push(c.endNode),(a=c.endNode.reset)==null||a.reset());i.push(...r),r=u}};function uo(n,e=null,t=0){const i=E(t);return()=>e==null||l.gte(n.value,o(i))?ct(n)+" "+n.displayName:`Reach ${l.eq(e.precision,0)?et(o(i)):Ee(o(i),e.precision)} ${e.displayName} to unlock (You have ${l.eq(e.precision,0)?et(e.value):Ee(e.value,e.precision)})`}function ne(n){return Se(e=>{const t=n.call(e),{visibility:i,cost:r,resource:a,requiresPay:u,cumulativeCost:s,maxBulkAmount:c,directSum:f,pay:w}=t,h={resource:a,visibility:E(i)??jt.Visible,cost:E(r),requiresPay:E(u)??!0,cumulativeCost:E(s)??!0,maxBulkAmount:E(c)??1,directSum:E(f),partialDisplay:b=>m("span",{style:l.gt(o(h.requirementMet),0)?"":"color: var(--danger)"},[ct(a,h.cost instanceof d?Vt(h.cost,b??1,o(h.cumulativeCost),o(h.directSum)):o(h.cost))," ",a.displayName]),display:b=>m("div",null,[o(h.requiresPay)?"Costs: ":"Requires: ",ct(a,h.cost instanceof d?Vt(h.cost,b??1,o(h.cumulativeCost),o(h.directSum)):o(h.cost))," ",a.displayName]),canMaximize:F(()=>{if(!(h.cost instanceof d))return!1;const b=o(h.maxBulkAmount);if(l.lte(b,1))return!1;const p=o(h.cumulativeCost),y=o(h.directSum)??(p?10:0);return l.lte(b,y)?!0:!(!h.cost.isInvertible()||p===!0&&!h.cost.isIntegrable())}),requirementMet:r instanceof d?Fs(r,a,s??!0,f,c):F(()=>l.gte(a.value,o(h.cost))?1:0),pay:w??function(b){const p=h.cost instanceof d?Vt(h.cost,b??1,o(h.cumulativeCost),o(h.directSum)):o(h.cost);a.value=l.sub(a.value,p).max(0)}};return h})}function Xn(n){return Se(()=>({requirementMet:F(()=>Jt(n)),visibility:jt.None,requiresPay:!1}))}function on(n){if(Array.isArray(n))return n.every(on);const e=o(n.requirementMet);return typeof e=="boolean"?e:l.gt(e,0)}function ei(n){if(Array.isArray(n))return n.map(ei).reduce(l.min);const e=o(n.requirementMet);return typeof e=="boolean"?e?l.dInf:0:l.gt(e,1)&&o(n.canMaximize)!==!0?1:e}function Ne(n,e=1){var t;if(Array.isArray(n)&&(n=n.filter(i=>Jt(i.visibility??!0)),n.length===1&&(n=n[0])),Array.isArray(n)){n=n.filter(a=>"partialDisplay"in a);const i=n.filter(a=>o(a.requiresPay)),r=n.filter(a=>!o(a.requiresPay));return m(U,null,[i.length>0?m("div",null,[k("Costs:")," ",yn(i.map(a=>a.partialDisplay(e)),m(U,null,[k(", ")]))]):null,r.length>0?m("div",null,[k("Requires:")," ",yn(r.map(a=>a.partialDisplay(e)),m(U,null,[k(", ")]))]):null])}return((t=n.display)==null?void 0:t.call(n))??m(U,null,null)}function ti(n,e=1){var t;Array.isArray(n)?n.filter(i=>o(i.requiresPay)).forEach(i=>{var r;return(r=i.pay)==null?void 0:r.call(i,e)}):o(n.requiresPay)&&((t=n.pay)==null||t.call(n,e))}const co=Symbol("Conversion");function fo(n){return Se(()=>{const e=n(),{baseResource:t,gainResource:i,formula:r,currentGain:a,actualGain:u,currentAt:s,nextAt:c,convert:f,spend:w,buyMax:h,onConvert:b,...p}=e,y=a==null?F(()=>{let A=l.floor(C.formula.evaluate(t.value)).max(0);return o(C.buyMax)===!1&&(A=A.min(1)),A}):E(a),C={type:co,...p,baseResource:t,gainResource:i,formula:r(d.variable(t)),currentGain:y,actualGain:u==null?y:E(u),currentAt:s==null?F(()=>C.formula.invert(l.floor(o(C.currentGain)))):E(s),nextAt:c==null?F(()=>C.formula.invert(l.floor(o(C.currentGain)).add(1))):E(c),convert:f??function(){const A=o(C.currentGain);i.value=l.add(i.value,A),C.spend(A),b==null||b(A)},spend:w??(()=>t.value=0),buyMax:E(h)??!0,onConvert:b};return C})}function ni(n){return fo(n)}const mo={class:"key"},po=j({__name:"Hotkey",props:{hotkey:{}},setup(n){const e=n;let t="",i=!1,r=!1,a=!1;return Rn(()=>{t=e.hotkey.key,i=t.startsWith("ctrl+"),i&&(t=t.slice(5)),r=t.startsWith("shift+"),r&&(t=t.slice(6)),a=t.length==1&&t.toLowerCase()!=t.toUpperCase(),a&&(t=t.toUpperCase())}),(u,s)=>(N(),x(U,null,[o(i)?(N(),x(U,{key:0},[s[0]||(s[0]=g("div",{class:"key"},"Ctrl",-1)),s[1]||(s[1]=k("+"))],64)):q("",!0),o(r)?(N(),x(U,{key:1},[s[2]||(s[2]=g("div",{class:"key"},"Shift",-1)),s[3]||(s[3]=k("+"))],64)):q("",!0),g("div",mo,H(o(t)),1)],64))}}),go=re(po,[["__scopeId","data-v-7bcb4952"]]),kt=Wt({}),ln=Symbol("Hotkey"),ht=[")","!","@","#","$","%","^","&","*","("];function vo(n){return Se(()=>{const e=n(),{enabled:t,description:i,key:r,onPress:a,...u}=e;return{type:ln,...u,enabled:E(t)??!0,description:E(i),key:r,onPress:a}})}me.on("addLayer",n=>{an(n,ln).forEach(e=>{kt[e.key]=e})});me.on("removeLayer",n=>{an(n,ln).forEach(e=>{kt[e.key]=void 0})});document.onkeydown=function(n){var i;if(((i=n.target)==null?void 0:i.tagName)==="INPUT"||at.value&&!P.keepGoing)return;const e=[n.key];n.shiftKey&&n.ctrlKey?(e.splice(0,1),e.push("ctrl+shift+"+n.key.toUpperCase()),e.push("shift+ctrl+"+n.key.toUpperCase()),ht.includes(n.key)?(e.push("ctrl+shift+"+ht.indexOf(n.key)),e.push("shift+ctrl+"+ht.indexOf(n.key))):(e.push("ctrl+shift+"+n.key.toLowerCase()),e.push("shift+ctrl+"+n.key.toLowerCase()))):ht.includes(n.key)?(e.push("shift+"+n.key),e.push("shift+"+ht.indexOf(n.key))):n.shiftKey?(e.push("shift+"+n.key.toUpperCase()),e.push("shift+"+n.key.toLowerCase())):n.ctrlKey&&(e.splice(0,1),e.push("ctrl+"+n.key));const t=kt[e.find(r=>r in kt)??""];t!=null&&o(t.enabled)!==!1&&(n.preventDefault(),t.onPress())};me.on("setupVue",()=>Go(()=>{const n=Object.values(kt).filter(e=>o(e==null?void 0:e.enabled));return n.length===0?"":m("div",null,[m("br",null,null),m("h4",null,[k("Hotkeys")]),m("div",{style:"column-count: 2"},[n.map(e=>m("div",null,[m(go,{hotkey:e},null),k(" "),o(e==null?void 0:e.description)]))])])}));const ho=Symbol("Reset");function ii(n){return Se(()=>{const e=n(),{thingsToReset:t,onReset:i,...r}=e,a={type:ho,...r,onReset:i,thingsToReset:E(t),reset:function(){const u=s=>{if(s!=null&&typeof s=="object"&&!(s instanceof l)&&!(s instanceof d)){if(ut in s&&s[ut]===!0)return;if(Ue in s){const c=s;c.value=c[Ue]}else!(s instanceof l)&&!ke(s)&&Object.values(s).forEach(c=>u(c))}};o(a.thingsToReset).forEach(u),me.emit("reset",a),i==null||i()}};return a})}const Rt={};me.on("removeLayer",n=>{var e;(e=Rt[n.id])==null||e.call(Rt),Rt[n.id]=void 0});const bo=j({__name:"Sticky",setup(n){const e=B("0"),t=new ResizeObserver(r),i=Mt(null);function r(){let a=i.value;if(a==null)return;let u=0;for(;a.previousSibling;){const s=a.previousSibling;s.dataset&&"vSticky"in s.dataset&&(u+=s.offsetHeight),a=s}e.value=u+"px"}return ot(r),document.fonts.ready.then(r),At(()=>{var u;const a=(u=i.value)==null?void 0:u.parentElement;a&&t.observe(a)}),(a,u)=>(N(),x("div",{class:"sticky",style:fe({top:e.value}),ref_key:"element",ref:i,"data-v-sticky":""},[Be(a.$slots,"default",{},void 0,!0)],4))}}),yo=re(bo,[["__scopeId","data-v-10a04be9"]]),wo=j({__name:"Resource",props:{resource:{},color:{}},setup(n){const e=n,t=F(()=>ct(e.resource));return(i,r)=>(N(),x("h2",{style:fe({color:i.color,"text-shadow":"0px 0px 10px "+i.color})},H(t.value),5))}}),Co={key:0},So={key:1},dt=j({__name:"MainDisplay",props:{resource:{},color:{},classes:{},style:{},effectDisplay:{}},setup(n){const e=n,t=B(null),i=()=>Fn(e.effectDisplay),r=F(()=>l.lt(e.resource.value,"1e1000"));return(a,u)=>(N(),ae(yo,null,{default:L(()=>{var s;return[g("div",{class:oe(["main-display-container",a.classes??{}]),style:fe([{height:`${(((s=t.value)==null?void 0:s.clientHeight)??0)+20}px`},a.style??{}])},[g("div",{class:"main-display",ref_key:"displayRef",ref:t},[r.value?(N(),x("span",Co,"You have ")):q("",!0),m(wo,{resource:a.resource,color:a.color||"white"},null,8,["resource","color"]),k(" "+H(a.resource.displayName)+" ",1),a.effectDisplay?(N(),x("span",So,[u[0]||(u[0]=k(", ")),m(i)])):q("",!0)],512)],6)]}),_:1}))}}),No={key:0,class:"material-icons pinned"},ko=j({__name:"Tooltip",props:{pinned:{},display:{},style:{},classes:{},direction:{},xoffset:{},yoffset:{}},setup(n){const e=n,t=B(!1),i=F(()=>{var s;return((s=e.pinned)==null?void 0:s.value)===!0||t.value}),r=()=>W(e.display);function a(s){const c=e.pinned;s.shiftKey&&c!=null&&(c.value=!c.value,s.stopPropagation(),s.preventDefault())}const u=F(()=>{var s;return((s=e.pinned)==null?void 0:s.value)===!0&&mt[ee.theme].showPin});return(s,c)=>(N(),x("div",{class:oe(["tooltip-container",{shown:i.value}]),onMouseenter:c[0]||(c[0]=f=>t.value=!0),onMouseleave:c[1]||(c[1]=f=>t.value=!1),onClickCapture:a},[Be(s.$slots,"default",{},void 0,!0),m(Mn,{name:"fade"},{default:L(()=>[i.value?(N(),x("div",{key:0,class:oe(["tooltip",{top:o(s.direction)===o(K).Up,left:o(s.direction)===o(K).Left,right:o(s.direction)===o(K).Right,bottom:o(s.direction)===o(K).Down,...o(s.classes)}]),style:fe([{"--xoffset":o(s.xoffset)||"0px","--yoffset":o(s.yoffset)||"0px"},o(s.style)??{}])},[u.value?(N(),x("span",No,"push_pin")):q("",!0),m(r)],6)):q("",!0)]),_:1})],34))}}),de=re(ko,[["__scopeId","data-v-ad4ea959"]]);function xo(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Pn(n)}function Io(n,e){const t=O(!1,!1),i=Se(()=>{const r=e(),{pinnable:a,display:u,direction:s,xoffset:c,yoffset:f,...w}=r;return a===!1&&Es(t),{...w,...He("tooltip",r),pinnable:a??!0,pinned:a===!1?void 0:t,display:u,direction:E(s??K.Up),xoffset:E(c),yoffset:E(f)}});Xr(n,r=>{i.id,r.tooltip=i,r.wrappers.push(a=>Jt(i.visibility??!0)?m(de,{pinned:i.pinned,display:i.display,classes:i.classes,style:i.style,direction:i.direction,xoffset:i.xoffset,yoffset:i.yoffset},xo(a)?a:{default:()=>[a]}):m(U,null,[a]))})}const Ao=["disabled"],Mo=j({__name:"Clickable",props:{canClick:{},display:{},isHolding:{},buttonStyle:{}},emits:["click","hold"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.display==null?m(U,null,null):W(t.display),{start:a,stop:u}=Zn(()=>i("hold"),t.isHolding);return(s,c)=>(N(),x("button",{onClick:c[0]||(c[0]=f=>i("click",f)),onMousedown:c[1]||(c[1]=(...f)=>o(a)&&o(a)(...f)),onMouseleave:c[2]||(c[2]=(...f)=>o(u)&&o(u)(...f)),onMouseup:c[3]||(c[3]=(...f)=>o(u)&&o(u)(...f)),onTouchstartPassive:c[4]||(c[4]=(...f)=>o(a)&&o(a)(...f)),onTouchendPassive:c[5]||(c[5]=(...f)=>o(u)&&o(u)(...f)),onTouchcancelPassive:c[6]||(c[6]=(...f)=>o(u)&&o(u)(...f)),class:oe({clickable:!0,can:o(s.canClick),locked:!o(s.canClick)}),style:fe(o(s.buttonStyle)),disabled:!o(s.canClick)},[m(r)],46,Ao))}}),Qt=re(Mo,[["__scopeId","data-v-a0559fa3"]]),To=Symbol("Clickable");function ri(n){return Se(()=>{const e=(n==null?void 0:n())??{},{canClick:t,display:i,onClick:r,onHold:a,buttonStyle:u,...s}=e;let c;typeof i=="object"&&!Yt(i)?c=()=>m("span",null,[i.title!=null?m("div",null,[W(i.title,w=>m("h3",null,[w]))]):null,W(i.description,w=>m("div",null,[w]))]):i!=null&&(c=i);const f={type:To,...s,...He("clickable",e,()=>m(Qt,{canClick:f.canClick,onClick:f.onClick,onHold:f.onHold,isHolding:f.isHolding,buttonStyle:f.buttonStyle,display:f.display},null)),canClick:E(t)??!0,buttonStyle:E(u),display:c,onClick:r==null?void 0:function(w){o(f.canClick)!==!1&&r.call(f,w)},onHold:a==null?void 0:function(){o(f.canClick)!==!1&&a.call(f)},isHolding:B(!1)};return f})}function ai(n){const e=ri(()=>{const t=n(),{conversion:i,tree:r,treeNode:a,resetTime:u,resetDescription:s,showNextAt:c,minimumGain:f,display:w,canClick:h,onClick:b,...p}=t;return{...p,conversion:i,tree:r,treeNode:a,resetTime:u,resetDescription:E(s)??F(()=>l.lt(i.gainResource.value,1e3)?"Reset for ":""),showNextAt:E(c)??!0,minimumGain:E(f)??1,canClick:E(h)??F(()=>l.gte(o(i.actualGain),o(e.minimumGain))),display:w??(()=>m("span",null,[o(e.resetDescription),m("b",null,[ct(i.gainResource,l.max(o(i.actualGain),o(e.minimumGain)))])," ",i.gainResource.displayName,o(e.showNextAt)!=null?m("div",null,[m("br",null,null),o(i.buyMax)?"Next:":"Req:"," ",ct(i.baseResource,!o(i.buyMax)&&l.gte(o(i.actualGain),1)?o(i.currentAt):o(i.nextAt))," ",i.baseResource.displayName]):null])),onClick:function(y){o(e.canClick)!==!1&&(i.convert(),r.reset(a),u&&(u.value=u[Ue]),b==null||b.call(e,y))}}});return e}function Tt(n){const e=so(()=>{const t=n(),{display:i,append:r,layerID:a,...u}=t;return{...u,layerID:a,display:i??a,append:E(r)??!0,onClick(){if(o(e.append))if(P.tabs.includes(a)){const s=P.tabs.lastIndexOf(a);P.tabs.splice(s,1)}else P.tabs.push(a);else P.tabs.splice(1,1,a)}}});return e}const wn="p",un=pt(wn,()=>{const n="Prestige",e="#4BDC13",t=tt(0,"prestige points"),i=ni(()=>({formula:f=>f.div(10).sqrt(),baseResource:xt.points,gainResource:t})),r=ii(()=>({thingsToReset:()=>[un]})),a=Tt(()=>({layerID:wn,color:e,reset:r})),u=Io(a,()=>({display:uo(t),pinnable:!0})),s=ai(()=>({conversion:i,tree:xt.tree,treeNode:a})),c=vo(()=>({description:"Reset for prestige points",key:"p",onPress:s.onClick}));return{name:n,color:e,points:t,tooltip:u,display:()=>m(U,null,[m(dt,{resource:t,color:e},null),W(s)]),treeNode:a,hotkey:c}}),Fo=j({__name:"Bar",props:{width:{},height:{},direction:{},borderStyle:{},baseStyle:{},textStyle:{},fillStyle:{},progress:{},display:{}},setup(n){const e=n,t=F(()=>{const a=o(e.progress),u=a instanceof l?a.toNumber():Number(a);return(1-Math.min(Math.max(u,0),1))*100}),i=F(()=>{const a={width:o(e.width)+.5+"px",height:o(e.height)+.5+"px"};switch(e.direction){case K.Up:a.clipPath=`inset(${t.value}% 0% 0% 0%)`,a.width=o(e.width)+1+"px";break;case K.Down:a.clipPath=`inset(0% 0% ${t.value}% 0%)`,a.width=o(e.width)+1+"px";break;case K.Right:a.clipPath=`inset(0% ${t.value}% 0% 0%)`;break;case K.Left:a.clipPath=`inset(0% 0% 0% ${t.value}%)`;break;case K.Default:a.clipPath="inset(0% 50% 0% 0%)";break}return a}),r=()=>e.display?W(e.display):null;return(a,u)=>(N(),x("div",{style:fe({width:o(a.width)+"px",height:o(a.height)+"px"}),class:"bar"},[g("div",{class:"overlayTextContainer border",style:fe([{width:o(a.width)+"px",height:o(a.height)+"px"},o(a.borderStyle)??{}])},[a.display?(N(),x("span",{key:0,class:"overlayText",style:fe(o(a.textStyle))},[m(r)],4)):q("",!0)],4),g("div",{class:"border",style:fe([{width:o(a.width)+"px",height:o(a.height)+"px"},o(a.baseStyle)??{},o(a.borderStyle)??{}])},[g("div",{class:"fill",style:fe([i.value,o(a.fillStyle)??{}])},null,4)],4)],4))}}),Po=re(Fo,[["__scopeId","data-v-a6320140"]]),Ro=Symbol("Bar");function si(n){return Se(()=>{const e=n==null?void 0:n(),{width:t,height:i,direction:r,borderStyle:a,baseStyle:u,textStyle:s,fillStyle:c,progress:f,display:w,...h}=e,b={type:Ro,...h,...He("bar",e,()=>m(Po,{width:b.width,height:b.height,direction:b.direction,borderStyle:b.borderStyle,baseStyle:b.baseStyle,textStyle:b.textStyle,fillStyle:b.fillStyle,progress:b.progress,display:b.display},null)),width:E(t),height:E(i),direction:E(r),borderStyle:E(a),baseStyle:E(u),textStyle:E(s),fillStyle:E(c),progress:E(f),display:w};return b})}const Eo=Symbol("Repeatable");function we(n){const e=O(0);return Se(()=>{const t=n(),{requirements:i,display:r,limit:a,onClick:u,initialAmount:s,buttonStyle:c,...f}=t;if(t.classes==null)t.classes=F(()=>({bought:o(y.maxed)}));else{const C=E(t.classes);t.classes=F(()=>({...o(C),bought:o(y.maxed)}))}const w=He("repeatable",t,()=>m(Qt,{canClick:y.canClick,onClick:y.onClick,onHold:y.onClick,buttonStyle:y.buttonStyle,display:y.display},null)),h={requirementMet:F(()=>l.sub(o(y.limit),o(e))),requiresPay:!1,visibility:jt.None,canMaximize:!0},b=[...Array.isArray(i)?i:[i],h];w.visibility!=null&&b.push(Xn(w.visibility));let p;if(typeof r=="object"&&!Yt(r)){const{title:C,description:A,effectDisplay:I,showAmount:T}=r;p=()=>m("span",null,[C==null?null:m("div",null,[W(C,R=>m("h3",null,[R]))]),W(A),T===!1?null:m("div",null,[m("br",null,null),m(U,null,[k("Amount: "),et(o(e))]),l.isFinite(o(y.limit))?m(U,null,[k(" / "),et(o(y.limit))]):void 0]),I==null?null:m("div",null,[m("br",null,null),k("Currently: "),W(I)]),o(y.maxed)?null:m("div",null,[m("br",null,null),Ne(b,o(y.amountToIncrease))])])}else r!=null&&(p=r);e[Ue]=s??0;const y={type:Eo,...f,...w,amount:e,requirements:b,initialAmount:s,buttonStyle:E(c),limit:E(a)??l.dInf,classes:F(()=>{const C=o(w.classes)||{};return o(y.maxed)&&(C.bought=!0),C}),maxed:F(()=>l.gte(o(e),o(y.limit))),canClick:F(()=>on(b)),amountToIncrease:F(()=>l.clampMin(ei(b),1)),onClick(C){if(!o(y.canClick))return;const A=o(y.amountToIncrease)??1;ti(b,A),e.value=l.add(o(e),A),u==null||u(C)},display:p};return y})}const Cn="d",Do=pt(Cn,n=>{const e="Devotion",t="#8f8f8f",i=tt(0,"devotion"),r=F(()=>new l(1)),a=O(new l(0)),u=O(10),s=O(new l(5)),c=O(1.3),f=F(()=>l.gt(y.amount.value,0)?l.add(c.value,l.times(y.amount.value,.3)):c.value),w=F(()=>Ae(l.sub(f.value,1).times(100))),h=F(()=>C.isHolding.value?l.times(s.value,f.value):s.value),b=si(()=>({direction:K.Right,width:300,height:75,display:()=>m(U,null,[k("Devotion")]),progress:F(()=>l.div(a.value,u.value))})),p=we(()=>({requirements:ne(()=>({cost:d.variable(p.amount).pow_base(1.4).times(8),resource:X(i)})),limit:10,buttonStyle:{height:"300px"},display:{title:"Increase Devotion Progress Gain",description:"+1 devotion progress gain"}})),y=we(()=>({requirements:ne(()=>({cost:d.variable(y.amount).pow_base(1.3).times(12),resource:X(i)})),limit:5,display:{title:"Hold Multiplier",description:()=>(l.sub(f.value,1).times(100),`Increase while holding: Currently: ${w.value}%`)}}));n.on("update",Z=>{a.value=l.add(a.value,l.times(h.value,Z)),l.gte(a.value,u.value)&&(a.value=new l(0),i.value=l.add(i.value,r.value))});const C=ri(()=>({buttonStyle:{width:"300px"},display:()=>`Hold to increase devotion progress gain by ${w.value}%`})),A=ni(()=>({formula:Z=>Z.div(10).sqrt(),baseResource:xt.points,gainResource:i})),I=ii(()=>({thingsToReset:()=>[n]})),T=Tt(()=>({layerID:Cn,color:t,reset:I})),R=ai(()=>({conversion:A,tree:xt.tree,treeNode:T}));return{name:e,color:t,devotion:i,devotionBar:b,devotionGain:r,devotionProgress:a,devotionMaxProgress:u,progressGain:h,baseDevotionProgressGain:s,devotionGainClickable:C,devotionMultiplier:c,devotionProgressUpgrade:p,devotionHoldRepeatable:y,display:()=>m(U,null,[m(dt,{resource:i,color:t},null),W(b),W(C),sn(p,y),W(R)]),treeNode:T}}),Vo=j({__name:"Infobox",props:{color:{},titleStyle:{},bodyStyle:{},collapsed:{},display:{},title:{}},setup(n){const e=n,t=()=>W(e.title),i=()=>W(e.display),r=F(()=>mt[ee.theme].mergeAdjacent);return(a,u)=>(N(),x("div",{class:oe(["infobox",{collapsed:o(a.collapsed),stacked:r.value}]),style:fe({borderColor:o(a.color)})},[g("button",{class:"title",style:fe([{backgroundColor:o(a.color)},o(a.titleStyle)||[]]),onClick:u[0]||(u[0]=s=>a.collapsed.value=!o(a.collapsed))},[u[1]||(u[1]=g("span",{class:"toggle"},"▼",-1)),m(t)],4),m(Ri,null,{default:L(()=>[o(a.collapsed)?q("",!0):(N(),x("div",{key:0,class:"body",style:fe(o(a.bodyStyle))},[m(i)],4))]),_:1})],6))}}),$o=re(Vo,[["__scopeId","data-v-1b37ed74"]]),Bo=Symbol("Infobox");function oi(n){const e=O(!1,!1);return Se(()=>{const t=n(),{color:i,titleStyle:r,bodyStyle:a,title:u,display:s,...c}=t,f={type:Bo,...c,...He("infobox",t,()=>m($o,{color:f.color,titleStyle:f.titleStyle,bodyStyle:f.bodyStyle,collapsed:f.collapsed,title:f.title,display:f.display},null)),collapsed:e,color:E(i)??"--layer-color",titleStyle:E(r),bodyStyle:E(a),title:u,display:s};return f})}const Lt=""+new URL("01-_tk-7lSW.png",import.meta.url).href,li="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpX5UOthBxCFDdbKLijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdnBSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1C2i6baaTCTGbWxVDr+iFgAj6EZeZZcxJUgq+4+seAb7exXmW/7k/x4CatxgQEIlnmWHaxBvE05u2wXmfOMpKskp8Tjxu0gWJH7muePzGueiywDOjZiY9TxwlFosdrHQwK5ka8RRxTNV0yheyHquctzhrlRpr3ZO/MJzXV5a5TnMESSxiCRJEKKihjApsxGnVSbGQpv2Ej3/Y9UvkUshVBiPHAqrQILt+8D/43a1VmJzwksIJoPvFcT5GgdAu0Kw7zvex4zRPgOAzcKW3/dUGMPNJer2txY6AyDZwcd3WlD3gcgcYejJkU3alIE2hUADez+ibcsDgLdC35vXW2sfpA5ChrlI3wMEhMFak7HWfd/d09vbvmVZ/P2pbcqPqnUhNAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAADNJJREFUeNrNm2usXNdVx39r73POzJmZe6+dXCd2XGST+IZYUaryCKQQRe0XCkixEx6tYjdIBaEiCkJCAiFUISQ+oAqEeEj9QpH6obYqogQbyoeqH6K+SClQKY3StLHjmDq1E9v3MXPndR57Lz7M+N6ZO69zfcdpRxppNHNm77X/67/W+u919hHuwOvi554KFX0E4ReBXwfeB+jAu/cSsJEhWkRsyVsTqhHJcVmSZ3l+wyv/63L+o52451sds/rYR77i522rzHOw188+bUT1Z0H/BPgloDxpDlsyVO4tEy2VESP4vIPPki2M1Of4rIP63DvHO0nGP7US/v69T3557UcSgAtnnopB/xD4U2Bp2oyl/RHVQ1VMaId+0jzBpe1tkqji8zY+TwB8lvNKs8MnnPH/+cgvf1V/ZAB44+zJmlc+BXwcsBMnMxDfGxMfqCBm/NQ+7+LT9iAs+KyLzzsAOM9aN/V/sL6af/7RZ17yP3QALpw5WQb+AfhtwEycSKByKCY+UJ05q09bt7y+/V3Wxufd3mdPO0n142tdf/ZnTnxtTyCYPS3+7EkL/BHwW7PGiu8tEx+oFILchDEiZvQ7E/Y+GyqlSD69EJkP7dWBewJAlA8AfzaN9gClfSHxPdUeDQoNbJCwPEJWG1a2gDGGhWpZPv3KFz7wEz8UAC6cObGs8HdAddp1NjJU76tNjPmJhtkSYuzOLzFBaXtsw9HFWP/25fNPxO8qABfOnjQgvwc8PCvDVA7GmMjeBr0EsdHo17aMyPZ4YciHqjHPfuuFn5N3kwH3A78/K4mGtYBoX/n2Q8xGo2EjggnKQ1qqHMonIxseelcAuHj2hEH5XWB5RhhTuTfeNfWHx7BD3h4EZjBJWst74or5xEtnnjB3HABFDgO/WcT7YTUqPm7ucfWE7Hqb/EYb30zBK2LDIuEhpVB+Z6HGrlkQ7ObiS//yYXFZ8pGZ3hcoL8eFsr7mnuxqk+wHTXziQHWb6rWQ8L4SsqgjTBIbQZ5sqUZrWK7EPPu1597/qcd/4yW9IwzwWRIDz8zyvi1bwtps7/tWRuflGyQXN/CdHLxub5e84hsp3e/U6bxaR1O/IzwCxAyZL2EgH1uuhdU7GQI/BTwy66LSvmhm7LtmSueVG7h6MqMYCNnVDq1vr48BYRjkIOB+l8sTdwSAC2eeFoUnZ4WNWCFanO59TR3Jd9fw7Xx89hyMexEQIb/epfO9Oup1iAU7Q7oW669947lfsHeAAb7c3+JOp3/JYMtTMFIlebOOa6Tj2XP8p6l98ASmtm9goT0z07fapNc6Q1ViZ54xVn7lrgVbnTsACkeBmbIzWoymJr98IyG71hrPnnJMcPgIIpcJDshQGNwyInm9ge+6bcm8o0wGluVuKo/OHQBBHwfCWdk/rE25xCnZ9xu9ZDeOPfsPYYIuuBsE+8NtIAfw9B1HeqW91TIYoxOCpYp88MXPPiFzA6C365Ofn3W9BAZbnhx+bjMhX5uc9Oz+ZXDrfTaESGTG7trTK63thGjsGLbq4/sWTTg3AAQJ+309pm98BBPYiTGUvd3arvNjcoPdvx98o2dYyWJKduu3oWzUdaQ3un0GjC4htLx3MdbS/EJAdAE4NlNVVYKpmT9f606eohQhpQi0veV0s1DaRm9nLnmn0wslkRGGGEu1nvDQ3ABQx3FgJqLTsr9rZeit5DXOkKV7MJGCblcHu683pY7JGflqik89Mn4JwUJkfnKODOCBWU0PEbBTtr1uivcBgkNHgOaQN+1ihER2LAC9vUPW1wmj6yqX/X3zrAJHZ15rBBNOSLxecc2Bum8MEkRIUEJKFcL7HyY8fATym8NDxgHRkRoSCpj+e2CKvJFNKzjHiiys6Gbox2f3LxTET9zwaKen+iReIH7f+zH77gYT9CgsGWRXthLgUEK7r8rCwj34Tobmiu86ksstXD3Fb2YwqSXq5aF5AnCw2GVuQg7R3k4PCA/fja2tQ3qZnvUK6if/Vx0SCTbaltemGtD65k18K0cnVBURDs8TgOUCfUzw2cQKgNM+fevginey1Y2OaSoBBKanCCeJKjPl5sxt5IDl2SMpqh71bjwA/djNmvkuui8e/Oj1WQbq+qHl/bgqiRGieQJQKyCVAY+6dGwIbAXJRkrS9AXX71D1I4Kqed1tjamZn6RdzDwBKKCqFFT7AOhIFdiyK0lpXuni89lNm513hwBaG57kahfxvg+uGyuURJB5AjCTTqpshYDPs530GHCMYm42aFzLJ6rinvdzdEdOybrK+uWMcrM1DPweXkUBkCIEoE9XzbvD+n24dUWQpbirm3Trfor3h8dQDzcv55RWNzFuIM9MKr0qcwUgLbR+dVveG6SvhKPTRO0W3att1I/P/LqDRa11j7zTIkyTHfLTTzJI5wlAMjtgBQY84/MO2s/gJjJjY8asN3GpH8n8PmuPULt7I6PUbg/TMhQmKSHvxc0TgM7sHCD4wYSkik9bPVYEBglGpzJphuRuCBSXtsaWUtPqIjuShomm5RDpzhOA1UJFwDFkvHqHT5qIeGRMo0RMX0D1Pe/S5ljhA2DHxUqsE1fgtYDNu1CCN4sBIKjPh7q16h2OFhr0VdtAu1xCC1bweYJmndGaPwhAbNkpiUxNJqZno3JpngBcLxYCpqcDgvIIOlLyJPVNJAwQaxFAI4d3zULSOFgIhgBQ77GLwZQejnlzniFwuchFPjc99TZGvgbLJRTFpxmu0yXvdCH0TN7O7WBAxQx7O/TYWjCRjS6T788bgJmW+sz26s8YOWziALsUDRlpx3SQs67SbeqISJIoQKzZ7h/eJUgwsda7PAnfmCMAeqkQAKnt54KUnQVeAiE8OHyQQ3b0ENt1z7XXct7+bsbGVTcEgkQG+gv2zhEeiibGv8+tIzffmV9PEF4DstmbF8HntieJ3ah0iA6WB1rdgN1eQbeprL2REa/VWbq5SufNNps3tnd6YmUrgUrVE+wLp4Xiphp3cW4ACOYG8FYhANJgeyOzgwWmEhC9p7Ld0ur0fk/ays03MkprDcIkQbwn3tykebFNe6N3TZ73yqzPMqKjpR4gE5kYvEwWzVMHaAZ8u1BPqGv7Yerx2ah+Kh2pYSoWBFpvpay+5bj+eka0ukmYpkObprixyfqFLuvXPBs/yHGpQxY90b2lqdXIde23xMxmbGEAVk6fz4GXimy98iRA/a1YTUcSookt5QcXewcgGh06/9ehtNog6o46TLwnXm/QutQhv9aBvEt8vDrD+zZ3zr74wDPnCu0FdnFCRL8OkjPj/qB6g0sCgjijd8y1jRU7dAsrOhjjGhnJpSa1en26h5yjVt/A5Rnl4yWCpel3vPJuUFfPf817O4yqfRW4WiRj5u1o4H8elzV7ATzQryqvLBIdqRY6Oep9TmkloHQ4npmDXCf8isE05g6AGN8GvlQoDyQBPjfDcjhtwsA+QawQP7REfHxpuDKM9MUd5YcjykdmH7P13dBrbs4dO3UumzsAK6fOO+ALE/vXQ/t5IW9FI/09l272y6NugVA6WqP22AHKKwvYfRFSskjZEtwdUVoJqT5aITpYKsSUrBWtqZcv7qYjtKtTYqBfBrlC707R9FhsR4S1FBloWKh6XNpCTIIJyr3DzyLYWoA9tkD5gQXUe9SnqEtQirfPXRLgUvsCRm/uZkW7OyQlQQN4rkg18Lkha0UT+30ubZInG7ikgU+b+LSJyxq4rIF3nV0tHoW0UU5U5TMrp/7N3TEAVk694BU+V6RBApA1S0O5YFxXSH2OdyneZ/1ewu6bnK4b4hP7JSmoVW6fAb0+3GvAvxdyjBOyerzXxu3MOZJ6nKjKXx87dT654wA8eOpcJr0nRApJzawTDpXF+a4e0kYZzcw5gW/cybb4zv7nfwOfL2pkUo9xqZ37+vN2ibxVuqHIXxw7fT591wB48NT5DOSvinSKtmi6XkFzM7fFuyQg2Sg7Vf5S1H7vdse5fYuC8ALwySK64FavoLtanQsILgnorlZUvTwnyGeOffT5284ye3pq7OKZk2WFf6bAAeotxANH6a4OtpTfJu0jkvUY9fJNQU4eO33u7b2sYe+PzZ09uYzyPFD4kLIYJVxMCKsJYoo5T50hbZR72kJ5BeRXV06fu7hX++fy4OSFMyeOgpwFHtvNmDZyhLWUIE5BdPSf2lt41o7IWhGaGwW+LvCxY6fPX5yH7XN7dPbimacOKfqPwFPMOFE2YoRVbJQjoceY3k09dQafWnxmbvUX2sBnEfPnK6f+dXVeds/14ekLZ07G9B6i/GPgx9jjc4l9WdgFXhTlb0Tlqw88ey6fp81zBaAHwtOiqstG+LCiTwKPAvuBHKj3S+e4mh0iLKFEwBV6rfj/Ab6I8urKR2+vzs96/T/oJ/nrjA9jxQAAAABJRU5ErkJggg==",Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAABg2lDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV9TpX5UOthBxCFDdbKLijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxdnBSdJES/5cUWsR4cNyPd/ced+8AoVFhmtU1C2i6baaTCTGbWxVDr+iFgAj6EZeZZcxJUgq+4+seAb7exXmW/7k/x4CatxgQEIlnmWHaxBvE05u2wXmfOMpKskp8Tjxu0gWJH7muePzGueiywDOjZiY9TxwlFosdrHQwK5ka8RRxTNV0yheyHquctzhrlRpr3ZO/MJzXV5a5TnMESSxiCRJEKKihjApsxGnVSbGQpv2Ej3/Y9UvkUshVBiPHAqrQILt+8D/43a1VmJzwksIJoPvFcT5GgdAu0Kw7zvex4zRPgOAzcKW3/dUGMPNJer2txY6AyDZwcd3WlD3gcgcYejJkU3alIE2hUADez+ibcsDgLdC35vXW2sfpA5ChrlI3wMEhMFak7HWfd/d09vbvmVZ/P2pbcqPqnUhNAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAilJREFUeNrt289KG1EUBvDvjH8oGOtCUyVYlDapVUvfQBA33SijmxZUxMfoqtBd36Npqd2EoV0JgrjpuiD+idKFqBGtYGsEUeNx0b5AzDmBj7l3n4+T33xzL5MwAue1W4wHVfADQF8dH1MAX6UWzecXSjee80XeACr4UOeXBwAB8EZbbme853MFKBencwBeNxDxnhoAohP/r+Z91/DOp3iEFkCAKYOQceY94FXjmwgmKQF2inEOQJdB1BglgADPjaIy5c/xAB2ACsw2L1G8YNwDXhq2aZQR4JlZm+xup6YCFAyzhqgAjkqxAMilFqB6of3Gkd2/Pk4+oAG4heSsM2tR62MagEgka36sAo9oABTaY/9cpVkaAADmABCiBgDwuFq9TADdJKhuAA8dMruYADIOmZ0BIAAEABqADhJUN4A2h8x2JoBWkswAwATQFhpABNCS9gbQLC+AmkPmNRPADUkmFUBoQAAgAvCo6xUTwIVDZpUJwGPY8wAQAAIADcBfh8w/TAC/HTKPmQBO0g6Q7gaI2AOIEAGoOjRAmRqgemg+6DX2aQAyHWI97OmTxeSSBqBvJlEAB4aR206bteuPortpByib7SnAFiPAT8NTZZ0RYNNsyIgSILICqD6dTfboAApzpQqAM4OoNceWuv81tmyQ8Z0Z4JvBEbBKCyAareDfi9D3XRuF2WSTFiA/X6pAsdTAI+A754Y25e3xtwAqdT/7AV+kFiXe890BuwCBfv3GoX4AAAAASUVORK5CYII=",ui=""+new URL("07-DaWoJC7Y.png",import.meta.url).href,_t=""+new URL("09-CwSQIsmg.png",import.meta.url).href,ci=""+new URL("11-BWA-WbSr.png",import.meta.url).href,di=""+new URL("14-DuAw19AL.png",import.meta.url).href,qo=Symbol("Upgrade");function ve(n){const e=O(!1,!1);return Se(()=>{const t=n(),{requirements:i,display:r,onHold:a,buttonStyle:u,...s}=t;if(t.classes==null)t.classes=F(()=>({bought:o(h.bought)}));else{const b=E(t.classes);t.classes=F(()=>({...o(b),bought:o(h.bought)}))}const c=He("upgrade",t,()=>m(Qt,{onClick:h.purchase,onHold:h.onHold,canClick:h.canPurchase,display:h.display,buttonStyle:h.buttonStyle},null)),f=Array.isArray(i)?i:[i];c.visibility!=null&&f.push(Xn(c.visibility));let w;if(typeof r=="object"&&!Yt(r)){const{title:b,description:p,effectDisplay:y}=r;w=()=>m("span",null,[b!=null?m("div",null,[W(b,C=>m("h3",null,[C]))]):null,W(p,C=>m("div",null,[C])),y!=null?m("div",null,[k("Currently: "),W(y)]):null,e.value?null:m(U,null,[m("br",null,null),Ne(f)])])}else r!=null&&(w=r);const h={type:qo,...s,...c,bought:e,canPurchase:F(()=>!e.value&&on(f)),requirements:f,buttonStyle:E(u),display:w,onHold:a,purchase(){var b;o(h.canPurchase)&&(ti(f),e.value=!0,(b=t.onPurchase)==null||b.call(t))}};return h})}const Sn="C",fi=pt(Sn,n=>{const e="Coin Flip!",t="#A0724D",i=tt(0,"cash"),r=Tt(()=>({layerID:Sn,color:t})),a=oi(()=>({title:"Welcome to the Casino!",display:()=>"Since you're so broke, its best to just start with the coin flip game. This ones easy- flip heads, get paid."})),u={width:"100%",height:"50px",fontWeight:"normal",padding:"0px 10px",margin:"0px"};n.on("update",G=>{A.forEach($=>{if($.isFlipping.value){for($.frameAccumulator+=G*o($.framesPerSecond);$.frameAccumulator>=1;)$.currentFrame.value=($.currentFrame.value+1)%w.length,$.frameAccumulator-=1;$.flipTimer.value+=G,$.flipTimer.value>=$.flipDuration.value&&($.isFlipping.value=!1,$.flipTimer.value=0,$.resultDisplayTimer.value=0,$.isHeads.value&&(i.value=l.add(i.value,l.add($.pointGainValue.value,o($.valueRepeatable.amount)))))}else $.isHeads.value!==null&&($.resultDisplayTimer.value+=G);$.isHeads.value!==null&&$.resultDisplayTimer.value>=s&&($.isHeads.value=null)})});const s=5,c=({coin:G})=>m("div",{style:{width:"150px",margin:0,padding:0}},[m("img",{src:G.isFlipping.value?w[G.currentFrame.value]:G.isHeads.value?Lt:_t,onClick:()=>{G.isFlipping.value||(G.isHeads.value=f(G.flipChance.value),G.isFlipping.value=!0,G.flipTimer.value=0,G.resultDisplayTimer.value=0)}},null),m("br",null,null),G.isFlipping.value?"Flipping...":G.isHeads.value!==null&&G.resultDisplayTimer.value<s?G.isHeads.value?"Heads!":"Tails!":"Click to flip!",Kn(G.valueRepeatable,G.flipSpeedRepeatable,G.evRepeatable,G.coinTierUpgrade)]),f=G=>Math.random()<G,w=[Lt,li,Ht,ui,_t,ci,Ht,di],h=O(1),b=O(1),p={frameAccumulator:0,currentFrame:O(0),isFlipping:O(!1),isHeads:O(null),flipTimer:B(0),resultDisplayTimer:O(0),flipDuration:O(1),framesPerSecond:O(15),pointGainValue:O(1),flipChance:O(.5),valueRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(p.valueRepeatable.amount).pow_base(1.8).times(5),resource:X(i)})),visibility:()=>o(I.bought),buttonStyle:u,style:{width:"100%"},display:()=>m(U,null,[m("u",null,[k("Heads Payout +1")]),m("br",null,null),k("Current"),p.valueRepeatable.amount.value?`[${o(p.valueRepeatable.amount)}]`:"",k(": +$"),o(p.valueRepeatable.amount),m("br",null,null),Ne(p.valueRepeatable.requirements)])})),flipSpeedRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(p.flipSpeedRepeatable.amount).pow_base(1.5).times(5),resource:X(i)})),limit:10,visibility:()=>o(T.bought),onClick:()=>{p.flipDuration.value=p.flipDuration.value*.9,p.framesPerSecond.value=p.framesPerSecond.value*1.06},buttonStyle:u,style:{width:"100%"},display:()=>m(U,null,[m("u",null,[k("Flip Speed 10%")]),m("br",null,null),k("Current"),p.flipSpeedRepeatable.amount.value?`[${o(p.flipSpeedRepeatable.amount)}]`:"",k(": "),p.flipDuration.value.toFixed(2),k("s"),m("br",null,null),Ne(p.flipSpeedRepeatable.requirements)])})),evRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(p.evRepeatable.amount).pow_base(1.7).times(20),resource:X(i)})),visibility:()=>o(R.bought),style:{width:"100%"},buttonStyle:u,display:()=>m(U,null,[m("u",null,[k("Heads Chance+")]),m("br",null,null),k("Current"),p.evRepeatable.amount.value?`[${o(p.evRepeatable.amount)}]`:"",k(": "),l.times(o(p.flipChance),100).toFixed(0),k("%"),m("br",null,null),Ne(p.evRepeatable.requirements)])})),autoFlipUpgrade:ve(()=>({requirements:ne(()=>({cost:1,resource:X(i)})),style:{width:"100%"},buttonStyle:u,visibility:()=>!0,display:{title:"Auto Flip",description:"Click begone!"}})),coinTierUpgrade:ve(()=>({requirements:ne(()=>({cost:1,resource:X(i)})),buttonStyle:{...u,height:"auto"},style:{width:"100%",height:"auto"},visibility:()=>o(Z.bought),display:{title:"Tier Up",description:"Reset coin progress and replaces with higher tier."}}))},y={frameAccumulator:0,currentFrame:O(0),isFlipping:O(!1),isHeads:O(null),flipTimer:B(0),resultDisplayTimer:O(0),flipDuration:O(1),framesPerSecond:O(15),pointGainValue:O(1),flipChance:O(.5),valueRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(y.valueRepeatable.amount).pow_base(1.8).times(5),resource:X(i)})),visibility:()=>o(I.bought),buttonStyle:u,style:{width:"100%"},display:()=>m(U,null,[m("u",null,[k("Heads Payout +1")]),m("br",null,null),k("Current"),y.valueRepeatable.amount.value?`[${o(y.valueRepeatable.amount)}]`:"",k(": +$"),o(y.valueRepeatable.amount),m("br",null,null),Ne(y.valueRepeatable.requirements)])})),flipSpeedRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(y.flipSpeedRepeatable.amount).pow_base(1.5).times(5),resource:X(i)})),limit:10,visibility:()=>o(T.bought),onClick:()=>{y.flipDuration.value=y.flipDuration.value*.9,y.framesPerSecond.value=y.framesPerSecond.value*1.06},buttonStyle:u,style:{width:"100%"},display:()=>m(U,null,[m("u",null,[k("Flip Speed 10%")]),m("br",null,null),k("Current"),y.flipSpeedRepeatable.amount.value?`[${o(y.flipSpeedRepeatable.amount)}]`:"",k(": "),y.flipDuration.value.toFixed(2),k("s"),m("br",null,null),Ne(y.flipSpeedRepeatable.requirements)])})),evRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(y.evRepeatable.amount).pow_base(1.7).times(20),resource:X(i)})),visibility:()=>o(R.bought),style:{width:"100%"},buttonStyle:u,display:()=>m(U,null,[m("u",null,[k("Heads Chance+")]),m("br",null,null),k("Current"),y.evRepeatable.amount.value?`[${o(y.evRepeatable.amount)}]`:"",k(": "),l.times(o(y.flipChance),100).toFixed(0),k("%"),m("br",null,null),Ne(y.evRepeatable.requirements)])})),autoFlipUpgrade:ve(()=>({requirements:ne(()=>({cost:1,resource:X(i)})),style:{width:"100%"},buttonStyle:u,visibility:()=>!0,display:{title:"Auto Flip",description:"Click begone!"}})),coinTierUpgrade:ve(()=>({requirements:ne(()=>({cost:1,resource:X(i)})),buttonStyle:{...u,height:"auto"},style:{width:"100%",height:"auto"},visibility:()=>o(Z.bought),display:{title:"Tier Up",description:"Reset coin progress and replaces with higher tier."}}))},C={frameAccumulator:0,currentFrame:O(0),isFlipping:O(!1),isHeads:O(null),flipTimer:B(0),resultDisplayTimer:O(0),flipDuration:O(1),framesPerSecond:O(15),pointGainValue:O(1),flipChance:O(.5),valueRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(C.valueRepeatable.amount).pow_base(1.8).times(5),resource:X(i)})),visibility:()=>o(I.bought),buttonStyle:u,style:{width:"100%"},display:()=>m(U,null,[m("u",null,[k("Heads Payout +1")]),m("br",null,null),k("Current"),C.valueRepeatable.amount.value?`[${o(C.valueRepeatable.amount)}]`:"",k(": +$"),o(C.valueRepeatable.amount),m("br",null,null),Ne(C.valueRepeatable.requirements)])})),flipSpeedRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(C.flipSpeedRepeatable.amount).pow_base(1.5).times(5),resource:X(i)})),limit:10,visibility:()=>o(T.bought),onClick:()=>{C.flipDuration.value=C.flipDuration.value*.9,C.framesPerSecond.value=C.framesPerSecond.value*1.06},buttonStyle:u,style:{width:"100%"},display:()=>m(U,null,[m("u",null,[k("Flip Speed 10%")]),m("br",null,null),k("Current"),C.flipSpeedRepeatable.amount.value?`[${o(C.flipSpeedRepeatable.amount)}]`:"",k(": "),C.flipDuration.value.toFixed(2),k("s"),m("br",null,null),Ne(C.flipSpeedRepeatable.requirements)])})),evRepeatable:we(()=>({requirements:ne(()=>({cost:d.variable(C.evRepeatable.amount).pow_base(1.7).times(20),resource:X(i)})),visibility:()=>o(R.bought),style:{width:"100%"},buttonStyle:u,display:()=>m(U,null,[m("u",null,[k("Heads Chance+")]),m("br",null,null),k("Current"),C.evRepeatable.amount.value?`[${o(C.evRepeatable.amount)}]`:"",k(": "),l.times(o(C.flipChance),100).toFixed(0),k("%"),m("br",null,null),Ne(C.evRepeatable.requirements)])})),coinTierUpgrade:ve(()=>({requirements:ne(()=>({cost:1,resource:X(i)})),buttonStyle:{...u,height:"auto"},style:{width:"100%",height:"auto"},visibility:()=>o(Z.bought),display:{title:"Tier Up",description:"Reset coin progress and replaces with higher tier."}})),autoFlipUpgrade:ve(()=>({requirements:ne(()=>({cost:1,resource:X(i)})),style:{width:"100%"},buttonStyle:u,visibility:()=>!0,display:{title:"Auto Flip",description:"Click begone!"}}))},A=[p,y,C],I=ve(()=>({requirements:ne(()=>({cost:3,resource:X(i)})),display:{title:"Extra Value",description:"Unlocks the value increase upgrade."}})),T=ve(()=>({requirements:ne(()=>({cost:15,resource:X(i)})),visibility:()=>o(I.bought),display:{title:"Why do they flip so slow?",description:"Unlocks the flip speed upgrade."}})),R=ve(()=>({requirements:ne(()=>({cost:25,resource:X(i)})),visibility:()=>o(T.bought),display:{title:"Tilt the Odds",description:"Better chances of heads."}})),Z=ve(()=>({requirements:ne(()=>({cost:100,resource:X(i)})),visibility:()=>o(R.bought),display:{title:"Coin Tiers!",description:"Unnlocks coin teirs. Higher tiers = more $"}}));return{name:e,color:t,points:i,casinoExplanation:a,coinFrames:w,coin1:p,coin2:y,coin3:C,pointGainValue:h,unlockValueRepeatable:I,unlockFlipSpeedRepeatable:T,unlockEVRepeatable:R,unlockCoinTiers:Z,maxCoins:b,display:()=>m(U,null,[W(a),m(dt,{resource:i,color:t},null),m("div",{style:{display:"flex",flexDirection:"row",gap:"10px",alignItems:"center",justifyContent:"center"}},[m(c,{coin:p},null),m(c,{coin:y},null),m(c,{coin:C},null)]),sn(I,T,R,Z)]),treeNode:r}}),Nn="$",mi=pt(Nn,n=>{const e="Coins!",t="#A0724D",i=tt(0,"Cash"),r=tt(1,"Coins"),a=5,u=Tt(()=>({layerID:Nn,color:t})),s={width:"100%",height:"50px",fontWeight:"normal",padding:"0px 10px",margin:"0px"},c=jn(r),f=Jn(r),w=[Lt,li,Ht,ui,_t,ci,Ht,di],h=$=>Math.random()<$;function b($){const V={};return V.id=O($),V.frameAccumulator=0,V.currentFrame=O(0),V.isFlipping=O(!1),V.isHeads=O(null),V.flipTimer=B(0),V.resultDisplayTimer=O(0),V.flipDuration=O(1),V.framesPerSecond=O(15),V.pointGainValue=O(1),V.flipChance=O(.5),V.valueRepeatable=we(()=>({requirements:ne(()=>({cost:d.variable(V.valueRepeatable.amount).pow_base(1.8).times(5),resource:X(i)})),display:()=>m(U,null,[m("u",null,[k("Heads Payout +1")]),m("br",null,null),k("Current"),V.valueRepeatable.amount.value?`[${o(V.valueRepeatable.amount)}]`:"",k(": +$"),o(V.valueRepeatable.amount),m("br",null,null),Ne(V.valueRepeatable.requirements)]),buttonStyle:s,style:{width:"100%"},visibility:()=>o(I.bought)})),V.flipSpeedRepeatable=we(()=>({requirements:ne(()=>({cost:d.variable(V.flipSpeedRepeatable.amount).pow_base(1.5).times(5),resource:X(i)})),onClick:()=>{V.flipDuration.value*=.9,V.framesPerSecond.value*=1.06},display:()=>m(U,null,[m("u",null,[k("Speed Up")]),m("br",null,null),k("Duration: "),V.flipDuration.value.toFixed(2),k("s")]),buttonStyle:s,style:{width:"100%"},visibility:()=>o(T.bought)})),V.evRepeatable=we(()=>({requirements:ne(()=>({cost:d.variable(V.evRepeatable.amount).pow_base(1.7).times(20),resource:X(i)})),style:{width:"100%"},buttonStyle:s,display:()=>m(U,null,[m("u",null,[k("Heads Chance+")]),m("br",null,null),k("Current"),V.evRepeatable.amount.value?`[${o(V.evRepeatable.amount)}]`:"",k(": "),l.times(o(V.flipChance),100).toFixed(0),k("%"),m("br",null,null),Ne(V.evRepeatable.requirements)]),visibility:()=>o(R.bought)})),V.autoFlipUpgrade=ve(()=>({requirements:ne(()=>({cost:1,resource:X(r)})),style:{width:"100%"},buttonStyle:s,display:()=>m(U,null,[m("u",null,[k("Autoflip")]),m("br",null,null),m("i",null,[k("No clicky 4 flippy")]),m("br",null,null),Ne(V.autoFlipUpgrade.requirements)]),visibility:()=>o(G.bought)})),V}const p=[];for(let $=0;$<8;$++)p.push(b(`${$}`));const y=F(()=>p.slice(0,Math.min(r.value,8))),C=we(()=>({requirements:ne(()=>({cost:d.variable(o(r)-1).pow_base(1.6).times(1e3),resource:X(i)})),visibility:!0,onClick:()=>{r.value=l.add(r.value,1);const $=b(`${p.length}`);p.push($)},display:{title:"Add a coin!",description:"Purchase a second coin."}})),A=({coin:$,coinId:V})=>m("div",{style:{width:"150px",margin:0,padding:0}},[m("img",{src:$.isFlipping.value?w[$.currentFrame.value]:$.isHeads.value?Lt:_t,onClick:()=>{!$.isFlipping.value&&!Ft.value&&($.isHeads.value=h($.flipChance.value),$.isFlipping.value=!0,$.flipTimer.value=0,$.resultDisplayTimer.value=0)}},null),m("br",null,null),$.isFlipping.value?"Flipping...":$.isHeads.value!==null&&$.resultDisplayTimer.value<a?$.isHeads.value?"Heads!":"Tails!":"Click to flip!",Kn($.valueRepeatable,$.flipSpeedRepeatable,$.evRepeatable,$.autoFlipUpgrade)]),I=ve(()=>({requirements:ne(()=>({cost:3,resource:X(i)})),display:{title:"Extra Value",description:"Unlocks the value increase upgrade."}})),T=ve(()=>({requirements:ne(()=>({cost:15,resource:X(i)})),visibility:()=>o(I.bought),display:{title:"Flip Speed",description:"Unlocks the flip speed upgrade."}})),R=ve(()=>({requirements:ne(()=>({cost:25,resource:X(i)})),visibility:()=>o(T.bought),display:{title:"Tilt the Odds",description:"Unlocks the heads chance upgrade."}})),Z=ve(()=>({requirements:ne(()=>({cost:100,resource:X(i)})),visibility:()=>o(R.bought),display:{title:"Coin Tiers",description:"Unlocks the ability to add more coins."}})),G=ve(()=>({requirements:ne(()=>({cost:1,resource:X(r)})),visibility:()=>o(R.bought),display:{title:"Autoflip",description:"Time to stop clicking."}}));return n.on("update",$=>{p.forEach(V=>{if(V.isFlipping.value){for(V.frameAccumulator+=$*o(V.framesPerSecond);V.frameAccumulator>=1;)V.currentFrame.value=(V.currentFrame.value+1)%w.length,V.frameAccumulator-=1;V.flipTimer.value+=$,V.flipTimer.value>=V.flipDuration.value&&(V.isFlipping.value=!1,V.flipTimer.value=0,V.resultDisplayTimer.value=0,V.isHeads.value&&(i.value=l.add(i.value,l.add(V.pointGainValue.value,o(V.valueRepeatable.amount)))))}else V.isHeads.value!==null&&(V.resultDisplayTimer.value+=$);V.isHeads.value!==null&&V.resultDisplayTimer.value>=a&&(V.isHeads.value=null)})}),{name:e,color:t,points:i,coins:r,coinInstances:p,bestCoins:c,totalCoins:f,CoinDisplay:A,addCoin:C,unlockValueRepeatable:I,unlockFlipSpeedRepeatable:T,unlockEVRepeatable:R,unlockCoinTiers:Z,unlockAutoFlip:G,display:()=>m(U,null,[m(dt,{resource:i,color:t},null),m(dt,{resource:r,color:t},null),m("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px",justifyContent:"center",margin:"20px 0"}},[y.value.map(($,V)=>m(A,{key:$.id.value,coin:$,coinId:V},null))]),sn(I,T,R,Z,G),W(C)]),treeNode:u}}),pi=Symbol("Action");function kn(n){const e=O(0);return Se(()=>{const t=(n==null?void 0:n())??{},{style:i,duration:r,canClick:a,autoStart:u,display:s,barOptions:c,onClick:f,...w}=t,h=E(a)??!0,b=E(i),p=si(()=>({direction:K.Right,width:100,height:10,borderStyle:{borderColor:"black"},baseStyle:{marginTop:"-1px"},progress:()=>l.div(e.value,o(C.duration)),...c}));let y;typeof s=="object"&&!Yt(s)?y=()=>m("span",null,[s.title!=null?m("div",null,[W(s.title,A=>m("h3",null,[A]))]):null,W(s.description,A=>m("div",null,[A]))]):s!=null&&(y=s);const C={type:pi,...w,...He("action",{...t,style:()=>({cursor:l.gte(e.value,o(C.duration))?"pointer":"progress",display:"flex",flexDirection:"column",...o(b)})},()=>m(Qt,{canClick:C.canClick,onClick:C.onClick,onHold:C.onClick,display:C.display},null)),progress:e,isHolding:B(!1),duration:E(r),canClick:F(()=>o(h)&&l.gte(e.value,o(C.duration))),autoStart:E(u)??!1,display:()=>m(U,null,[m("div",{style:"flex-grow: 1"},null),y==null?null:W(y),m("div",{style:"flex-grow: 1"},null),W(p)]),progressBar:p,onClick:function(){if(o(C.canClick)===!1)return;const A=l.div(e.value,o(C.duration));f==null||f.call(C,A),e.value=0},update:function(A){const I=o(C.duration);l.gte(e.value,I)?e.value=I:(e.value=l.add(e.value,A),(C.isHolding.value||o(C.autoStart))&&C.onClick())}};return C})}const wt={};me.on("addLayer",n=>{const e=an(n,pi);wt[n.id]=n.on("postUpdate",t=>{e.forEach(i=>i.update(t))})});me.on("removeLayer",n=>{var e;(e=wt[n.id])==null||e.call(wt),wt[n.id]=void 0});const xn="S",gi=pt(xn,()=>{const n="Slots",e="#918039",t=tt(5e3,"credits"),i=Tt(()=>({layerID:xn,color:e})),r=oi(()=>({title:"Welcome to the Casino!",display:()=>"Slot machines can be fun. Pull the lever to test your luck!"})),a={A:1,B:2,C:4,D:6,E:8,F:10,G:15,H:20,I:25,J:30},u={A:"🍒",B:"🍋",C:"🍊",D:"🍉",E:"🍇",F:"🍓",G:"🍍",H:"🍎",I:"🍏",J:"🍌"},s=O(0),c=O(0),f=O(0),w=F(()=>{const ie={...a};return s.value>0&&(ie.A+=s.value,ie.B+=s.value,ie.C+=s.value),c.value>0&&(ie.A+=c.value*2,ie.B+=c.value*2),f.value<0&&(ie.D+=f.value,ie.E+=f.value,ie.F+=f.value),ie}),h=F(()=>({A:1e3,B:400,C:200,D:100,E:60,F:40,G:25,H:15,I:10,J:8})),b=kn(()=>({duration:1.5,display:()=>`${I.value?"Spinning ..":"Spin!"} (Cost: ${se.value} cr)`,canClick:F(()=>l.gte(t.value,se.value)&&!I.value),onClick:()=>{t.value=l.sub(t.value,se.value);const ie=A();V(ie)},style:{alignItems:"center"}}));function p(ie){const be=h.value;let ue=0;const pe=[!1,!1,!1,!1,!1];for(let le=0;le<=3;le++){const ye=ie[le];let Fe=1;for(let Ie=le+1;Ie<5&&ie[Ie]===ye;Ie++)Fe++;if(console.log(`Position ${le}, symbol ${ye}, count: ${Fe}`),Fe>=2){console.log(`Found match at position ${le}: ${Fe} consecutive ${ye}s`);const Ie=be[ye]??0;ue+=Ie*Math.pow(2,Fe-2);for(let Kt=le;Kt<le+Fe;Kt++)pe[Kt]=!0;break}}return{winnings:ue,winningPositions:pe}}const y=F(()=>Object.values(w.value).reduce((ie,be)=>ie+be,0));function C(){const ie=w.value,be=y.value;let ue=Math.random()*be;for(const[pe,le]of Object.entries(ie))if(ue-=le,ue<=0)return pe;return"J"}function A(){const ie=[];for(let be=0;be<5;be++){const ue=[];for(let pe=0;pe<3;pe++)ue.push(C());ie.push(ue)}return ie}const I=O(!1),T=O([!1,!1,!1,!1,!1]),R=O([]),Z=O([]),G=200,$=50;function V(ie){Z.value=[],I.value=!0,T.value=[!0,!0,!0,!0,!0];const be=setInterval(()=>{if(I.value){const ue=[];for(let pe=0;pe<5;pe++){const le=[];for(let ye=0;ye<3;ye++)le.push(C());ue.push(le)}R.value=ue}},100);for(let ue=0;ue<5;ue++)setTimeout(()=>{T.value[ue]=!1;const pe=[...R.value];pe[ue]=ie[ue],R.value=pe,ue===4&&(I.value=!1,clearInterval(be),R.value=ie,Q.value=ie,setTimeout(()=>{const le=ie.map(Ie=>Ie[1]),{winnings:ye,winningPositions:Fe}=p(le);if(console.log("Middle row:",le,"Winnings:",ye,"Positions:",Fe),console.log("What display shows:",(R.value.length>0?R.value:Q.value).map(Ie=>Ie[1]).map(Ie=>u[Ie])),ye>0){t.value=l.add(t.value,ye);const Ie=[[!1,!1,!1,!1,!1],Fe,[!1,!1,!1,!1,!1]];Z.value=Ie,setTimeout(()=>{Z.value=[]},3e3)}},200))},G+ue*$)}const he=kn(()=>({duration:1.5,display:()=>m("div",{style:"font-size: 20px; text-align: center; color: #fff; text-shadow: 1px 1px 2px #000;"},[k("🎰"),m("br",null,null),k("PULL")]),canClick:F(()=>l.gte(t.value,se.value)&&!I.value),onClick:()=>{t.value=l.sub(t.value,se.value);const ie=A();V(ie)},style:{minHeight:"200px",width:"60px",background:"linear-gradient(180deg, #D2B48C 0%, #8B4513 50%, #654321 100%)",border:"2px solid #4A4A4A",borderRadius:"10px",boxShadow:"2px 2px 5px rgba(0,0,0,0.3)",margin:"0 10px"},barOptions:{direction:K.Right,width:56,height:8,baseStyle:{background:"#333",borderRadius:"0 0 8px 8px"},borderStyle:{border:"1px solid #666"}}})),Q=O([]),se=F(()=>l.add(10,s.value*5));return{name:n,color:e,points:t,casinoExplanation:r,spinReelButton:b,luckyCharmLevel:s,wildCardBoost:c,rareSymbolBoost:f,symbolWeights:w,symbolPayouts:h,spinReel:C,totalWeight:y,lastSpinResult:Q,spinCost:se,performSpin:A,isSpinning:I,spinningReels:T,startSpinAnimation:V,displayResult:R,winningCells:Z,calculateWinnings:p,slotDisplays:u,slotHandleAction:he,display:()=>m(U,null,[W(r),m(dt,{resource:t,color:e},null),m("div",{style:"border: 2px solid gold; padding: 20px; margin: 10px; background: #1a1a1a;"},[m("h3",null,[k("🎰 SLOT MACHINE 🎰")]),m("div",{style:"background: #000; border: 2px solid #333; border-radius: 10px; padding: 15px; margin: 10px 0;"},[(R.value.length>0?R.value:Q.value).length>0&&m("div",{style:"font-family: monospace; font-size: 28px;"},[(R.value.length>0?R.value:Q.value)[0].map((ie,be)=>m("div",{key:be,style:"display: flex; justify-content: space-around; margin: 8px 0; padding: 8px 0; border-bottom: 1px solid #444;"},[(R.value.length>0?R.value:Q.value).map((ue,pe)=>{var Fe;const le=((Fe=Z.value[be])==null?void 0:Fe[pe])||!1,ye=T.value[pe];return m("span",{key:pe,style:{minWidth:"60px",textAlign:"center",backgroundColor:le?"#FFD700":ye?"#444":"#222",color:le?"#000":"#fff",border:le?"3px solid #FFA500":"2px solid gold",borderRadius:"8px",padding:"12px 8px",transition:"all 0.3s ease",filter:ye?"blur(1px)":"none",animation:ye?"pulse 0.1s infinite":le?"glow 1s infinite alternate":"none",boxShadow:le?"0 0 15px #FFD700":"none",transform:le?"scale(1.1)":"scale(1)"}},[u[ue[be]]||ue[be]])})]))]),I.value&&m("div",{style:"text-align: center; color: gold; font-weight: bold; margin-top: 10px;"},[k("🎰 SPINNING... 🎰")])]),W(b),W(he)]),m("style",null,[`
									@keyframes pulse {
											0% { transform: scale(1); }
											50% { transform: scale(1.05); }
											100% { transform: scale(1); }
									}
									
									@keyframes glow {
											0% { box-shadow: 0 0 15px #FFD700; }
											100% { box-shadow: 0 0 25px #FFA500, 0 0 35px #FFD700; }
									}
							`])]),treeNode:i}}),xt=pt("main",n=>{const e=tt(0,"favor"),t=jn(e),i=Jn(e),r=F(()=>new l(0));n.on("update",s=>{e.value=l.add(e.value,l.times(r.value,s))});const a=Us(e,r),u=oo(()=>({nodes:X([[fi.treeNode,gi.treeNode,mi.treeNode]]),branches:[],onReset(){e.value=fn(u.resettingNode.value)===fn(un.treeNode)?0:10,t.value=e.value,i.value=e.value},resetPropagation:lo}));return{name:"Tree",links:u.links,display:()=>m(U,null,[P.devSpeed===0?m("div",null,[k("Game Paused"),m(yt,{id:"paused"},null)]):null,P.devSpeed!=null&&P.devSpeed!==0&&P.devSpeed!==1?m("div",null,[k("Dev Speed: "),Ee(P.devSpeed),k("x"),m(yt,{id:"devspeed"},null)]):null,P.offlineTime!=null&&P.offlineTime!==0?m("div",null,[k("Offline Time: "),Gt(P.offlineTime),m(yt,{id:"offline"},null)]):null,m("div",null,[l.lt(e.value,"1e1000")?m("span",null,[k("You have ")]):null,m("h2",null,[Ee(e.value)]),l.lt(e.value,"1e1e6")?m("span",null,[k(" points")]):null]),l.gt(r.value,0)?m("div",null,[k("("),a.value,k(")"),m(yt,{id:"oomps"},null)]):null,m(Bs,null,null),W(u)]),points:e,best:t,total:i,oomps:a,tree:u}}),Oo=n=>[xt,un,Do,fi,gi,mi],at=F(()=>!1);function qe(n={}){return Object.assign({id:`${Y.id}-0`,name:"Default Save",tabs:Y.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:Y.id,modVersion:Y.versionNumber,layers:{}},n)}function ge(n){const e=Je.compressToUTF16(lt(n??P));return localStorage.setItem((n??P).id,e),e}async function Uo(){zo();try{let n=localStorage.getItem(ee.active);if(n==null){await Oe(st());return}if(n=je(n),n==null)throw"Unable to determine save encoding";const e=JSON.parse(n);if(e.modID!==Y.id){await Oe(st());return}e.id=ee.active,await Oe(e)}catch(n){console.error(`Failed to load save. Falling back to new save.
`,n),await Oe(st())}}function je(n){if(n[0]!=="{")if(n[0]==="e")n=decodeURIComponent(escape(atob(n)));else if(n[0]==="ᯡ")n=Je.decompressFromUTF16(n);else return console.warn("Unable to determine preset encoding",n),null;return n}function st(){const n=Ct(),e=qe({id:n});return ge(e),ee.saves.push(n),e}function Ct(){let n,e=0;do n=`${Y.id}-${e++}`;while(localStorage.getItem(n)!=null);return n}const Ft=B(!1);async function Oe(n){console.info("Loading save",n),Ft.value=!0;for(const e in Ce){const t=Ce[e];t!=null&&Vs(t)}Oo().forEach(e=>Ds(e,n)),n=qe(n),n.offlineProd&&n.time!=null&&n.time&&n.devSpeed!==0&&(n.offlineTime==null&&(n.offlineTime=0),n.offlineTime+=Math.min(n.offlineTime+(Date.now()-n.time)/1e3,Y.offlineLimit*3600)),n.time=Date.now(),n.modVersion!==Y.versionNumber&&(n.modVersion,n.modVersion=Y.versionNumber),Object.assign(P,n),ee.active=P.id,me.emit("onLoad")}const Re=Wt({});function Lo(n){if(Re[n]==null){let e=localStorage.getItem(n);if(e==null)Re[n]={error:"Save doesn't exist in localStorage",id:n};else if(e==="dW5kZWZpbmVk")Re[n]={error:"Save is undefined",id:n};else try{if(e=je(e),e==null)return console.warn("Unable to determine preset encoding",e),Re[n]={error:"Unable to determine preset encoding",id:n},Re[n];Re[n]={...JSON.parse(e),id:n}}catch(t){Re[n]={error:t,id:n},console.warn(`Failed to load info about save with id ${n}:
${t}
${e}`)}}return Re[n]}function Ho(){Object.keys(Re).forEach(n=>delete Re[n])}function Et(n){Re[n]=void 0}setInterval(()=>{P.autosave&&ge()},1e3);window.onbeforeunload=()=>{P.autosave&&ge()};window.save=ge;const _o=window.hardReset=async()=>{await Oe(st())};window.deleteLowerSaves=()=>{const n=Object.values(ee.saves).indexOf(P.id)+1;Object.values(ee.saves).slice(n).forEach(e=>localStorage.removeItem(e)),ee.saves=ee.saves.slice(0,n)};const It=ft({active:"",saves:[],showTPS:!0,theme:rn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0});xe(It,n=>{const e=Je.compressToUTF16(JSON.stringify(n));localStorage.setItem(Y.id,e)},{deep:!0});const ee=window.settings=It;window.hardResetSettings=()=>{const n={active:"",saves:[],showTPS:!0,theme:rn.Nordic,unthrottled:!1,alignUnits:!1,showHealthWarning:!0};me.emit("loadSettings",n),Object.assign(It,n),_o()};function zo(){try{let n=localStorage.getItem(Y.id);if(n!=null&&n!==""){if(n=je(n),n==null){console.warn("Unable to determine settings encoding",n);return}const e=JSON.parse(n);typeof e=="object"&&Object.assign(It,e)}me.emit("loadSettings",It)}catch{}}const Wo=ft([]),vi=ft([]);function Go(n){vi.push(n)}const jo=ft([]),Te=B(),De=B([]),gt=B([]);function Jo(){var n;((n=Te.value)==null?void 0:n.loggedIn)===!0&&(De.value.length>0||Te.value.getSaveList().then(hi).then(e=>{gt.value=e.map(t=>t.content.id)}).catch(console.error))}Ei({supportsSaving:!0,supportsSaveManager:!0,onLoggedInChanged:In}).then(n=>{Te.value=n,In(n)}).catch(console.error);function In(n){n.loggedIn===!0&&(De.value.length>0||(n.getSaveList().then(e=>{const t=hi(e);if(gt.value=t.map(i=>i.content.id),P.timePlayed<120*1e3&&t.length>0){const i=t.reduce((r,a)=>r.content.time<a.content.time?a:r);Oe(i.content)}}).catch(console.error),setInterval(Jo,60*1e3)))}function hi(n){const e=new Set(ee.saves.slice()),t=new Set(new Array(11).fill(0).map((r,a)=>a)),i=Object.keys(n).map(r=>{const{label:a,content:u}=n[parseInt(r)];try{return{slot:parseInt(r),label:a,content:JSON.parse(je(u)??"")}}catch{return null}}).filter(r=>r!=null&&typeof r.content.id=="string"&&typeof r.content.time=="number"&&typeof r.content.timePlayed=="number").filter(r=>{var u;r.label!=null&&(r.content.name=r.label),t.delete(r.slot);const a=ee.saves.find(s=>s===r.content.id);if(a==null)ee.saves.push(r.content.id),ge(qe(r.content));else{e.delete(a);try{const s=JSON.parse(je(localStorage.getItem(a)??"")??"");if(s==null)return!1;s.id=a,s.time=s.time??0,s.timePlayed=s.timePlayed??0;const c=Math.abs(s.timePlayed-r.content.timePlayed),f=Math.abs(s.time-r.content.time);c<120*1e3&&f<120*1e3?s.time<r.content.time?(ge(qe(r.content)),ee.active===a&&Oe(r.content)):((u=Te.value)==null||u.save(r.slot,Je.compressToUTF16(lt(qe(s))),s.name??r.label).catch(console.error),r.content=s):De.value.push({id:a,cloud:r.content,local:s,slot:r.slot})}catch{return!1}}return!0});return e.forEach(r=>{var a;try{if(t.size>0){const u=localStorage.getItem(r)??"",s=JSON.parse(je(u)??""),c=t.values().next().value;if(c==null)return;(a=Te.value)==null||a.save(c,u,s.name).then(()=>gt.value.push(s.id)).catch(console.error),t.delete(c)}}catch{}}),i}const Yo={class:"field"},Qo={key:0,class:"field-title"},bi=j({__name:"Select",props:{title:{},modelValue:{},options:{},placeholder:{},closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title?W(t.title,s=>m("span",null,[s])):m(U,null,null),a=B(t.options.find(s=>s.value===t.modelValue)??null);xe(Xe(t,"modelValue"),s=>{o(a)!==s&&(a.value=t.options.find(c=>c.value===s)??null)});function u(s){i("update:modelValue",s.value)}return(s,c)=>(N(),x("div",Yo,[s.title?(N(),x("span",Qo,[m(r)])):q("",!0),m(o(Vi),{options:s.options,modelValue:a.value,"onUpdate:modelValue":[c[0]||(c[0]=f=>a.value=f),u],min:1,placeholder:s.placeholder,"close-on-select":s.closeOnSelect,"label-by":"label"},null,8,["options","modelValue","placeholder","close-on-select"])]))}}),Ko={class:"field"},Zo={key:0,class:"field-title"},Xo=["placeholder"],el=j({__name:"Text",props:{title:{},modelValue:{},textArea:{type:Boolean},placeholder:{},maxHeight:{},submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(n,{emit:e}){const t=n,i=e,r=()=>t.title==null?m(U,null,null):W(t.title,f=>m("span",null,[f])),a=Mt(null);At(()=>{var f;(f=a.value)==null||f.focus()});const u=F({get(){return o(t.modelValue)??""},set(f){i("update:modelValue",f)}});function s(){i("submit")}function c(){t.submitOnBlur!==!1?i("submit"):i("cancel")}return(f,w)=>(N(),x("form",{onSubmit:St(s,["prevent"])},[g("div",Ko,[f.title?(N(),x("span",Zo,[m(r)])):q("",!0),f.textArea?(N(),ae(o($i),{key:1,modelValue:u.value,"onUpdate:modelValue":w[0]||(w[0]=h=>u.value=h),placeholder:f.placeholder,maxHeight:f.maxHeight,onBlur:c,ref_key:"field",ref:a},null,8,["modelValue","placeholder","maxHeight"])):tn((N(),x("input",{key:2,type:"text","onUpdate:modelValue":w[1]||(w[1]=h=>u.value=h),placeholder:f.placeholder,class:oe({fullWidth:!f.title}),onBlur:c,ref_key:"field",ref:a},null,42,Xo)),[[Ai,u.value]])])],32))}}),yi=re(el,[["__scopeId","data-v-495d5085"]]),tl={key:0},nl=["disabled"],il={key:0},rl=j({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(n,{emit:e}){const t=n,i=e,r=B(!1);xe(r,s=>{i("confirmingChanged",s)});function a(){if(t.skipConfirm){i("click");return}r.value&&i("click"),r.value=!r.value}function u(){r.value=!1}return(s,c)=>(N(),x("span",{class:oe(["container",{confirming:r.value}])},[r.value?(N(),x("span",tl,"Are you sure?")):q("",!0),g("button",{onClick:St(a,["stop"]),class:"button danger",disabled:s.disabled},[r.value?(N(),x("span",il,"Yes")):Be(s.$slots,"default",{key:1},void 0,!0)],8,nl),r.value?(N(),x("button",{key:1,class:"button",onClick:St(u,["stop"])},"No")):q("",!0)],2))}}),al=re(rl,[["__scopeId","data-v-b3b9693a"]]),sl={key:0,class:"handle material-icons"},ol={key:1,class:"actions"},ll={key:2,class:"actions"},ul={key:3,class:"details"},cl=["disabled"],dl={class:"save-version"},fl={key:1,class:"time"},ml={key:4,class:"details"},pl={key:5,class:"details error"},gl=j({__name:"Save",props:{save:{},readonly:{type:Boolean}},emits:["export","open","duplicate","delete","editName"],setup(n,{emit:e}){const t=n,i=e,r=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=B(!1),u=B(!1),s=B("");xe(a,()=>s.value=t.save.name??"");const c=F(()=>t.save!=null&&t.save.id===P.id&&!t.readonly),f=F(()=>c.value?P.time:(t.save!=null&&t.save.time)??0),w=F(()=>{var b;return!t.readonly&&((b=Te.value)==null?void 0:b.loggedIn)===!0&&gt.value.includes(t.save.id)});function h(){i("editName",s.value),a.value=!1}return(b,p)=>(N(),x("div",{class:oe(["save",{active:c.value,readonly:b.readonly}])},[b.readonly!==!0?(N(),x("div",sl,"drag_handle")):q("",!0),!a.value&&b.readonly!==!0?(N(),x("div",ol,[b.save.error==null&&!u.value?(N(),ae(nn,{key:0,onClick:p[0]||(p[0]=y=>i("export")),class:"button",left:""},{default:L(()=>[m(de,{display:"Export",direction:o(K).Left,class:"info"},{default:L(()=>p[8]||(p[8]=[g("span",{class:"material-icons"},"content_paste",-1)])),_:1},8,["direction"])]),_:1})):q("",!0),b.save.error==null&&!u.value?(N(),x("button",{key:1,onClick:p[1]||(p[1]=y=>i("duplicate")),class:"button"},[m(de,{display:"Duplicate",direction:o(K).Left,class:"info"},{default:L(()=>p[9]||(p[9]=[g("span",{class:"material-icons"},"content_copy",-1)])),_:1},8,["direction"])])):q("",!0),b.save.error==null&&!u.value?(N(),x("button",{key:2,onClick:p[2]||(p[2]=y=>a.value=!a.value),class:"button"},[m(de,{display:"Edit Name",direction:o(K).Left,class:"info"},{default:L(()=>p[10]||(p[10]=[g("span",{class:"material-icons"},"edit",-1)])),_:1},8,["direction"])])):q("",!0),m(al,{disabled:c.value,onClick:p[3]||(p[3]=y=>i("delete")),onConfirmingChanged:p[4]||(p[4]=y=>u.value=y)},{default:L(()=>[m(de,{display:"Delete",direction:o(K).Left,class:"info"},{default:L(()=>p[11]||(p[11]=[g("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)])),_:1},8,["direction"])]),_:1},8,["disabled"])])):b.readonly!==!0?(N(),x("div",ll,[g("button",{onClick:h,class:"button"},[m(de,{display:"Save",direction:o(K).Left,class:"info"},{default:L(()=>p[12]||(p[12]=[g("span",{class:"material-icons"},"check",-1)])),_:1},8,["direction"])]),g("button",{onClick:p[5]||(p[5]=y=>a.value=!a.value),class:"button"},[m(de,{display:"Cancel",direction:o(K).Left,class:"info"},{default:L(()=>p[13]||(p[13]=[g("span",{class:"material-icons"},"close",-1)])),_:1},8,["direction"])])])):q("",!0),b.save.error==null&&!a.value?(N(),x("div",ul,[w.value?(N(),ae(de,{key:0,display:"Synced!",direction:o(K).Right},{default:L(()=>p[14]||(p[14]=[g("span",{class:"material-icons synced"},"cloud",-1)])),_:1},8,["direction"])):q("",!0),g("button",{class:"button open",onClick:p[6]||(p[6]=y=>i("open")),disabled:b.readonly},[g("h3",null,H(b.save.name),1)],8,cl),g("span",dl,"v"+H(b.save.modVersion),1),p[15]||(p[15]=g("br",null,null,-1)),f.value?(N(),x("div",fl," Last played "+H(o(r).format(f.value)),1)):q("",!0)])):b.save.error==null&&a.value?(N(),x("div",ml,[m(yi,{modelValue:s.value,"onUpdate:modelValue":p[7]||(p[7]=y=>s.value=y),class:"editname",onSubmit:h},null,8,["modelValue"])])):(N(),x("div",pl,[k(" Error: Failed to load save with id "+H(b.save.id),1),p[16]||(p[16]=g("br",null,null,-1)),k(H(b.save.error),1)]))],2))}}),en=re(gl,[["__scopeId","data-v-0058f767"]]),vl={key:0,style:{color:"var(--danger)"}},hl={class:"modal-footer"},bl={class:"field"},yl={class:"field-buttons"},wl={class:"footer"},Cl=j({__name:"SavesManager",setup(n,{expose:e}){const t=B(!1),i=B(null);e({open(){t.value=!0}});const r=B(!1),a=B(""),u=B(null);xe(a,I=>{I?ot(()=>{try{if(I=je(I)??"",I===""){console.warn("Unable to determine preset encoding",I),r.value=!0;return}const T=JSON.parse(I);if(typeof T!="object"){r.value=!0;return}const R=Ct();T.id=R,ge(T),a.value="",r.value=!1,ee.saves.push(R)}catch{r.value=!0}}):r.value=!1});let s=Object.assign({}),c=B(Object.keys(s).reduce((I,T)=>(I.push({label:T.split("/").slice(-1)[0].slice(0,-4),value:s[T]}),I),[]));xe(t,I=>{I&&Ho()});const f=F(()=>ee.saves.reduce((I,T)=>(I[T]=Lo(T),I),{})),w=F(()=>{var I;return((I=Te.value)==null?void 0:I.loggedIn)===!0&&ee.saves.length<gt.value.length});function h(I){let T;switch(P.id===I?T=lt(P):T=JSON.stringify(f.value[I]),Y.exportEncoding){default:console.warn(`Unknown save encoding: ${Y.exportEncoding}. Defaulting to lz`);case"lz":T=Je.compressToUTF16(T);break;case"base64":T=btoa(unescape(encodeURIComponent(T)));break;case"plain":break}const R=document.createElement("textarea");R.value=T,document.body.appendChild(R),R.select(),R.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(R)}function b(I){P.id===I&&ge();const T={...f.value[I],id:Ct()};ge(T),ee.saves.push(T.id)}function p(I){var T;((T=Te.value)==null?void 0:T.loggedIn)===!0&&Te.value.getSaveList().then(R=>{var G;const Z=Object.keys(R).find($=>{const V=R[parseInt($)].content;try{if(JSON.parse(V).id===I)return!0}catch{return!1}});Z!=null&&((G=Te.value)==null||G.save(parseInt(Z),"","").catch(console.error))}),ee.saves=ee.saves.filter(R=>R!==I),localStorage.removeItem(I),Et(I)}function y(I){f.value[P.id].time=P.time,ge(),Et(P.id),Oe(f.value[I]),Et(I)}function C(I){if(u.value=I,ot(()=>{u.value=null}),I=je(I)??"",I===""){console.warn("Unable to determine preset encoding",I);return}const T=JSON.parse(I);T.id=Ct(),ge(T),ee.saves.push(T.id),y(T.id)}function A(I,T){const R=f.value[I];R!=null&&(R.name=T,P.id===I?(P.name=T,ge()):(ge(R),Et(I)))}return(I,T)=>(N(),ae(Ye,{modelValue:t.value,"onUpdate:modelValue":T[4]||(T[4]=R=>t.value=R),ref_key:"modal",ref:i},{header:L(()=>T[5]||(T[5]=[g("h2",null,"Saves Manager",-1)])),body:L(({shown:R})=>[w.value?(N(),x("div",vl," Not all saves are synced! You may need to delete stale saves. ")):q("",!0),R?(N(),ae(o(Di),{key:1,list:o(ee).saves,handle:".handle",itemKey:Z=>Z},{item:L(({element:Z})=>[m(en,{save:f.value[Z],onOpen:G=>y(Z),onExport:G=>h(Z),onEditName:G=>A(Z,G),onDuplicate:G=>b(Z),onDelete:G=>p(Z)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):q("",!0)]),footer:L(()=>[g("div",hl,[m(yi,{modelValue:a.value,"onUpdate:modelValue":T[0]||(T[0]=R=>a.value=R),title:"Import Save",placeholder:"Paste your save here!",class:oe({importingFailed:r.value})},null,8,["modelValue","class"]),g("div",bl,[T[6]||(T[6]=g("span",{class:"field-title"},"Create Save",-1)),g("div",yl,[g("button",{class:"button",onClick:T[1]||(T[1]=R=>y(o(st)().id))},"New Game"),Object.keys(o(c)).length>0?(N(),ae(bi,{key:0,options:o(c),modelValue:u.value,"onUpdate:modelValue":T[2]||(T[2]=R=>C(R)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):q("",!0)])]),g("div",wl,[T[7]||(T[7]=g("div",{style:{"flex-grow":"1"}},null,-1)),g("button",{class:"button modal-default-button",onClick:T[3]||(T[3]=R=>t.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}}),cn=re(Cl,[["__scopeId","data-v-99458d64"]]),Sl={class:"vga-footer"},Nl=j({__name:"AddictionWarning",setup(n){const e=B(!1);Rn(()=>{Y.disableHealthWarning===!1&&ee.showHealthWarning&&te.mouseActivity.filter(i=>i).length>6&&(e.value=!0)});function t(){ee.showHealthWarning=!1,e.value=!1}return(i,r)=>(N(),x(U,null,[m(Ye,Le({modelValue:e.value,"onUpdate:modelValue":r[1]||(r[1]=a=>e.value=a)},i.$attrs),{header:L(()=>r[2]||(r[2]=[g("div",{class:"vga-modal-header"},[g("h2",null,"Kindly consider taking a break.")],-1)])),body:L(()=>r[3]||(r[3]=[g("p",null," You've been actively enjoying this game for awhile recently - and it's great that you've been having a good time! That said, there are dangers to games like these that you should be aware of: ",-1),g("p",null," While incremental games can be fun and even healthy in certain contexts, they can exacerbate video game addiction even more than other genres. If you feel like playing incremental games is taking priority over other things in your life, or manipulating your sleep schedule, it may be prudent to seek help. ",-1),g("h4",null,"Resources:",-1),g("p",null,[g("span",null,[g("a",{style:{display:"inline"},href:"https://www.samhsa.gov/",target:"_blank"}," SAMHSA "),k(" ("),g("a",{style:{display:"inline"},href:"tel:1-800-662-4357"},"1-800-662-HELP"),k(") ")]),g("br"),g("a",{href:"https://www.reddit.com/r/StopGaming/"},"r/StopGaming")],-1)])),footer:L(()=>[g("div",Sl,[g("button",{onClick:t,class:"button"},"Never show this again"),g("button",{onClick:r[0]||(r[0]=a=>e.value=!1),class:"button"},"Close")])]),_:1},16,["modelValue"]),m(cn,{ref:"savesManager"},null,512)],64))}}),kl=re(Nl,[["__scopeId","data-v-84eac81b"]]),xl={class:"cloud-saves-modal-header"},Il=["onClick"],Al={key:0,class:"note"},Ml={key:1,class:"note"},Tl=["onClick"],Fl={key:0,class:"note"},Pl={key:1,class:"note"},Rl=["onClick"],El=j({__name:"CloudSaveResolver",setup(n){const e=B(!1),t=B([]),i=F(()=>De.value.length>1?"saves":"save"),r=B(null);xe(()=>De.value.length>0,f=>{f&&(t.value=De.value.map(({local:w,cloud:h})=>(w.time??0)<(h.time??0)?"cloud":"local"),e.value=!0)},{immediate:!0}),xe(()=>{var f;return(f=r.value)==null?void 0:f.isOpen},f=>{f===!1&&(De.value=[])});function a(f){t.value[f]="local"}function u(f){t.value[f]="cloud"}function s(f){t.value[f]="both"}function c(){var f,w;for(let h=0;h<t.value.length;h++){const{slot:b,local:p,cloud:y}=De.value[h];switch(t.value[h]){case"local":(f=Te.value)==null||f.save(b,Je.compressToUTF16(lt(qe(p))),y.name).catch(console.error);break;case"cloud":ge(qe(y));break;case"both":const C=Ct();ge({...qe(y),id:C}),ee.saves.push(C),(w=Te.value)==null||w.save(b,Je.compressToUTF16(lt(qe(p))),y.name).catch(console.error);break}}e.value=!1}return(f,w)=>(N(),ae(Ye,{modelValue:e.value,"onUpdate:modelValue":w[0]||(w[0]=h=>e.value=h),width:"960px",ref_key:"modal",ref:r,"prevent-closing":!0},{header:L(()=>[g("div",xl,[g("h2",null,"Cloud "+H(i.value)+" loaded!",1)])]),body:L(()=>[g("div",null," Upon loading, your cloud "+H(i.value)+" "+H(o(De).length>1?"appear":"appears")+" to be out of sync with your local "+H(i.value)+". Which "+H(i.value)+" do you want to keep? ",1),w[4]||(w[4]=g("br",null,null,-1)),(N(!0),x(U,null,ze(o(o(De)),(h,b)=>(N(),x("div",{key:h.id,class:"conflict-container"},[g("div",{onClick:p=>u(b),class:oe({selected:t.value[b]==="cloud"})},[g("h2",null,[w[1]||(w[1]=k(" Cloud ")),(h.cloud.time??0)>(h.local.time??0)?(N(),x("span",Al,"(more recent)")):q("",!0),(h.cloud.timePlayed??0)>(h.local.timePlayed??0)?(N(),x("span",Ml,"(more playtime)")):q("",!0)]),m(en,{save:h.cloud,readonly:!0},null,8,["save"])],10,Il),g("div",{onClick:p=>a(b),class:oe({selected:t.value[b]==="local"})},[g("h2",null,[w[2]||(w[2]=k(" Local ")),(h.cloud.time??0)<=(h.local.time??0)?(N(),x("span",Fl,"(more recent)")):q("",!0),(h.cloud.timePlayed??0)<=(h.local.timePlayed??0)?(N(),x("span",Pl,"(more playtime)")):q("",!0)]),m(en,{save:h.local,readonly:!0},null,8,["save"])],10,Tl),g("div",{onClick:p=>s(b),class:oe({selected:t.value[b]==="both"}),style:{"flex-basis":"30%"}},w[3]||(w[3]=[g("h2",null,"Both",-1),g("div",{class:"save"},"Keep Both",-1)]),10,Rl)]))),128))]),footer:L(()=>[g("div",{class:"cloud-saves-footer"},[g("button",{onClick:c,class:"button"},"Confirm")])]),_:1},8,["modelValue"]))}}),Dl=re(El,[["__scopeId","data-v-c79a1b2e"]]),Vl={class:"field"},$l=j({__name:"Toggle",props:{title:{},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,r=()=>W(t.title??"",u=>m("span",null,[u])),a=F({get(){return!!t.modelValue},set(u){i("update:modelValue",u)}});return(u,s)=>(N(),x("label",Vl,[tn(g("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":s[0]||(s[0]=c=>a.value=c)},null,512),[[Mi,a.value]]),m(r)]))}}),Ve=re($l,[["__scopeId","data-v-faad62a6"]]),Bl={class:"game-over-modal-header"},ql=["src","alt"],Ol={class:"game-over-modal-title"},Ul={key:0},Ll={key:0},Hl=["href"],_l={key:1},zl=j({__name:"GameOverScreen",setup(n){const{title:e,logo:t,discordName:i,discordLink:r,versionNumber:a,versionTitle:u}=Y,s=F(()=>Gt(P.timePlayed)),c=F(()=>at.value&&!P.keepGoing),f=Xe(P,"autosave");function w(){P.keepGoing=!0}function h(){Oe(st())}return(b,p)=>(N(),ae(Ye,{"model-value":c.value},{header:L(()=>[g("div",Bl,[o(t)?(N(),x("img",{key:0,class:"game-over-modal-logo",src:o(t),alt:o(e)},null,8,ql)):q("",!0),g("div",Ol,[p[1]||(p[1]=g("h2",null,"Congratulations!",-1)),g("h4",null,"You've beaten "+H(o(e))+" v"+H(o(a))+": "+H(o(u)),1)])])]),body:L(({shown:y})=>[y?(N(),x("div",Ul,[g("div",null,"It took you "+H(s.value)+" to beat the game.",1),p[4]||(p[4]=g("br",null,null,-1)),p[5]||(p[5]=g("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),p[6]||(p[6]=g("br",null,null,-1)),o(r)&&o(i)?(N(),x("div",Ll,[g("a",{href:o(r),class:"game-over-modal-discord-link"},[p[2]||(p[2]=g("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),k(" "+H(o(i)),1)],8,Hl)])):(N(),x("div",_l,p[3]||(p[3]=[g("a",{href:"https://discord.gg/yJ4fjnjU54",class:"game-over-modal-discord-link"},[g("span",{class:"material-icons game-over-modal-discord"},"discord"),k(" Profectus & Friends ")],-1)]))),m(Ve,{title:"Autosave",modelValue:f.value,"onUpdate:modelValue":p[0]||(p[0]=C=>f.value=C)},null,8,["modelValue"])])):q("",!0)]),footer:L(()=>[g("div",{class:"game-over-footer"},[g("button",{onClick:w,class:"button"},"Keep Going"),g("button",{onClick:h,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}}),Wl=re(zl,[["__scopeId","data-v-c9c5bad4"]]),Gl={key:0},jl=["href"],Jl={class:"nan-footer"},Yl=j({__name:"NaNScreen",setup(n){const{discordName:e,discordLink:t}=Y,i=B(!0),r=B(!0),a=Xe(te,"hasNaN"),u=B(null);xe(a,b=>{b?(i.value=P.autosave,r.value=P.devSpeed===0):(P.autosave=i.value,P.devSpeed=r.value?0:null)});const s=F(()=>{var b;return(b=te.NaNPath)==null?void 0:b.join(".")}),c=F(()=>te.NaNPersistent!=null?te.NaNPersistent.value:null);function f(){te.NaNPersistent!=null&&(te.NaNPersistent.value=new l(0),te.hasNaN=!1)}function w(){te.NaNPersistent&&(te.NaNPersistent.value=new l(1),te.hasNaN=!1)}function h(){te.NaNPersistent&&(te.NaNPersistent.value=new l(NaN),te.hasNaN=!1)}return(b,p)=>(N(),x(U,null,[m(Ye,Le({modelValue:a.value,"onUpdate:modelValue":p[4]||(p[4]=y=>a.value=y)},b.$attrs),{header:L(()=>p[5]||(p[5]=[g("div",{class:"nan-modal-header"},[g("h2",null,"NaN value detected!")],-1)])),body:L(()=>[g("div",null,[k(' Attempted to assign "'+H(s.value)+'" to NaN',1),c.value?(N(),x("span",Gl,H(" ")+"(previously "+H(o(Ee)(c.value))+")",1)):q("",!0),k(". Auto-saving has been "+H(i.value?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),p[7]||(p[7]=g("br",null,null,-1)),g("div",null,[g("a",{href:o(t)||"https://discord.gg/yJ4fjnjU54",class:"nan-modal-discord-link"},[p[6]||(p[6]=g("span",{class:"material-icons nan-modal-discord"},"discord",-1)),k(" "+H(o(e)||"Profectus & Friends"),1)],8,jl)]),p[8]||(p[8]=g("br",null,null,-1)),m(Ve,{title:"Autosave",modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=y=>i.value=y)},null,8,["modelValue"]),o(Y).enablePausing?(N(),ae(Ve,{key:0,title:"Pause game",modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=y=>r.value=y)},null,8,["modelValue"])):q("",!0)]),footer:L(()=>[g("div",Jl,[g("button",{onClick:p[2]||(p[2]=y=>{var C;return(C=u.value)==null?void 0:C.open()}),class:"button"},"Open Saves Manager"),g("button",{onClick:f,class:"button"},"Set to 0"),g("button",{onClick:w,class:"button"},"Set to 1"),c.value&&o(l).neq(c.value,0)&&o(l).neq(c.value,1)?(N(),x("button",{key:0,onClick:p[3]||(p[3]=y=>a.value=!1),class:"button"}," Set to previous ")):q("",!0),g("button",{onClick:h,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),m(cn,{ref_key:"savesManager",ref:u},null,512)],64))}}),Ql=re(Yl,[["__scopeId","data-v-cab8d401"]]),Kl={key:1},Zl=j({__name:"Layer",props:{display:{},minimizedDisplay:{},minimized:{},name:{},color:{},minimizable:{},nodes:{},forceHideGoBack:{},index:{}},setup(n){const e=n,t=()=>W(e.display),i=()=>e.minimizedDisplay==null?void 0:W(e.minimizedDisplay),r=F(()=>Y.allowGoBack&&!o(e.forceHideGoBack)&&e.index>0&&!o(e.minimized));function a(){P.tabs.splice(o(e.index),1/0)}function u(c){e.nodes.value=c}const s=B([]);return Ti((c,f,w)=>(console.warn(`Error caught in "${e.name}" layer`,c,f,w),s.value.push(c instanceof Error?c:new Error(JSON.stringify(c))),!1)),(c,f)=>s.value.length>0?(N(),ae(Dn,{key:0,errors:s.value},null,8,["errors"])):(N(),x("div",Le({key:1,class:"layer-container",style:{"--layer-color":o(c.color)}},c.$attrs),[r.value?(N(),x("button",{key:0,class:"goBack",onClick:a},"❌")):q("",!0),o(c.minimized)?(N(),x("button",{key:1,class:"layer-tab minimized",onClick:f[0]||(f[0]=w=>c.$emit("setMinimized",!1))},[c.minimizedDisplay?(N(),ae(i,{key:0})):(N(),x("div",Kl,H(o(c.name)),1))])):(N(),x("div",{key:2,class:oe(["layer-tab",{showGoBack:r.value}])},[m(Vn,{onUpdateNodes:u},{default:L(()=>[m(t)]),_:1})],2)),o(c.minimizable)?(N(),x("button",{key:3,class:"minimize",onClick:f[1]||(f[1]=w=>c.$emit("setMinimized",!0))}," ▼ ")):q("",!0)],16))}}),Xl=re(Zl,[["__scopeId","data-v-bac44152"]]),eu=j({__name:"Changelog",setup(n,{expose:e}){const t=B(!1);return e({open(){t.value=!0}}),(i,r)=>(N(),ae(Ye,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=a=>t.value=a)},{header:L(()=>r[1]||(r[1]=[g("h2",null,"Changelog",-1)])),body:L(()=>r[2]||(r[2]=[g("details",{open:""},[g("summary",null,[k("v0.0 Initial Commit - "),g("time",null,"2021-09-04")]),k(" This is the first release :D "),g("ul",null,[g("li",{class:"feature"},"Did everything"),g("li",{class:"fix"},"Had some fun"),g("li",{class:"breaking"},"Removed everything"),g("li",{class:"balancing"},"Created some bugs to fix later")])],-1)])),_:1},8,["modelValue"]))}}),tu=re(eu,[["__scopeId","data-v-0fdea059"]]),nu={class:"info-modal-header"},iu=["src","alt"],ru={class:"info-modal-title"},au={key:0},su={key:0},ou={key:0},lu=["href"],uu=j({__name:"Info",emits:["openChangelog"],setup(n,{expose:e,emit:t}){const{title:i,logo:r,author:a,discordName:u,discordLink:s,versionNumber:c,versionTitle:f}=Y,w=t,h=B(!1),b=F(()=>Gt(P.timePlayed)),p=()=>vi.map(y=>W(y));return e({open(){h.value=!0}}),(y,C)=>(N(),ae(Ye,{modelValue:h.value,"onUpdate:modelValue":C[1]||(C[1]=A=>h.value=A)},{header:L(()=>[g("div",nu,[o(r)?(N(),x("img",{key:0,class:"info-modal-logo",src:o(r),alt:o(i)},null,8,iu)):q("",!0),g("div",ru,[g("h2",null,H(o(i)),1),g("h4",null,[k(" v"+H(o(c)),1),o(f)?(N(),x("span",au,": "+H(o(f)),1)):q("",!0)])])])]),body:L(({shown:A})=>[A?(N(),x("div",su,[o(a)?(N(),x("div",ou,"By "+H(o(a)),1)):q("",!0),C[3]||(C[3]=g("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),C[4]||(C[4]=g("br",null,null,-1)),g("div",{class:"link",onClick:C[0]||(C[0]=I=>w("openChangelog"))},"Changelog"),C[5]||(C[5]=g("br",null,null,-1)),g("div",null,[o(s)?(N(),x("a",{key:0,href:o(s),class:"info-modal-discord-link",target:"_blank"},[C[2]||(C[2]=g("span",{class:"material-icons info-modal-discord"},"discord",-1)),k(" "+H(o(u)),1)],8,lu)):q("",!0)]),C[6]||(C[6]=g("div",null,[g("a",{href:"https://discord.gg/yJ4fjnjU54",class:"info-modal-discord-link",target:"_blank"},[g("span",{class:"material-icons info-modal-discord"},"discord"),k(" Profectus & Friends ")])],-1)),C[7]||(C[7]=g("div",null,[g("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link",target:"_blank"},[g("span",{class:"material-icons info-modal-discord"},"discord"),k(" The Modding Tree ")])],-1)),C[8]||(C[8]=g("br",null,null,-1)),g("div",null,"Time Played: "+H(b.value),1),m(p)])):q("",!0)]),_:1},8,["modelValue"]))}}),cu=re(uu,[["__scopeId","data-v-e80d3d22"]]),du={class:"header"},fu={class:"option-tabs"},mu={key:0},pu={key:1},gu=j({__name:"Options",setup(n,{expose:e}){const t=B(!1),i=B("behaviour");function r(he){return he==i.value}function a(he){i.value=he}e({isTab:r,setTab:a,save:ge,open(){t.value=!0}});const u=Object.keys(mt).map(he=>({label:ea(he),value:he})),s=()=>Wo.map(he=>W(he)),{showTPS:c,theme:f,unthrottled:w,alignUnits:h,showHealthWarning:b}=mn(ee),{autosave:p,offlineProd:y}=mn(P),C=F({get(){return P.devSpeed===0},set(he){P.devSpeed=he?0:null}}),A=m("span",{class:"option-title"},[k("Unthrottled"),m("desc",null,[k("Allow the game to run as fast as possible. Not battery friendly.")])]),I=m("span",{class:"option-title"},[k("Offline production"),m(de,{display:"Save-specific",direction:K.Right},{default:()=>[k("*")]}),m("desc",null,[k("Simulate production that occurs while the game is closed.")])]),T=m("span",{class:"option-title"},[k("Show videogame addiction warning"),m("desc",null,[k("Show a helpful warning after playing for a long time about video game addiction and encouraging you to take a break.")])]),R=m("span",{class:"option-title"},[k("Autosave"),m(de,{display:"Save-specific",direction:K.Right},{default:()=>[k("*")]}),m("desc",null,[k("Automatically save the game every second or when the game is closed.")])]),Z=m("span",{class:"option-title"},[k("Pause game"),m(de,{display:"Save-specific",direction:K.Right},{default:()=>[k("*")]}),m("desc",null,[k("Stop everything from moving.")])]),G=m("span",{class:"option-title"},[k("Theme"),m("desc",null,[k("How the game looks.")])]),$=m("span",{class:"option-title"},[k("Show TPS"),m("desc",null,[k("Show TPS meter at the bottom-left corner of the page.")])]),V=m("span",{class:"option-title"},[k("Align modifier units"),m("desc",null,[k("Align numbers to the beginning of the unit in modifier view.")])]);return(he,Q)=>(N(),ae(Ye,{modelValue:t.value,"onUpdate:modelValue":Q[11]||(Q[11]=se=>t.value=se)},{header:L(()=>[g("div",du,[Q[12]||(Q[12]=g("h2",null,"Settings",-1)),g("div",fu,[g("button",{class:oe({selected:r("behaviour")}),onClick:Q[0]||(Q[0]=se=>a("behaviour"))},"Behaviour",2),g("button",{class:oe({selected:r("appearance")}),onClick:Q[1]||(Q[1]=se=>a("appearance"))},"Appearance",2)])])]),body:L(()=>[r("behaviour")?(N(),x("div",mu,[m(Ve,{title:o(A),modelValue:o(w),"onUpdate:modelValue":Q[2]||(Q[2]=se=>ke(w)?w.value=se:null)},null,8,["title","modelValue"]),o(Y).enablePausing?(N(),ae(Ve,{key:0,title:o(Z),modelValue:C.value,"onUpdate:modelValue":Q[3]||(Q[3]=se=>C.value=se)},null,8,["title","modelValue"])):q("",!0),m(Ve,{title:o(I),modelValue:o(y),"onUpdate:modelValue":Q[4]||(Q[4]=se=>ke(y)?y.value=se:null)},null,8,["title","modelValue"]),o(Y).disableHealthWarning?q("",!0):(N(),ae(Ve,{key:1,title:o(T),modelValue:o(b),"onUpdate:modelValue":Q[5]||(Q[5]=se=>ke(b)?b.value=se:null)},null,8,["title","modelValue"])),m(Ve,{title:o(R),modelValue:o(p),"onUpdate:modelValue":Q[6]||(Q[6]=se=>ke(p)?p.value=se:null)},null,8,["title","modelValue"]),o(p)?q("",!0):(N(),ae(nn,{key:2,class:"button save-button",onClick:Q[7]||(Q[7]=se=>o(ge)())},{default:L(()=>Q[13]||(Q[13]=[k("Manually save")])),_:1}))])):q("",!0),r("appearance")?(N(),x("div",pu,[m(bi,{title:o(G),options:o(u),modelValue:o(f),"onUpdate:modelValue":Q[8]||(Q[8]=se=>ke(f)?f.value=se:null)},null,8,["title","options","modelValue"]),m(s),m(Ve,{title:o($),modelValue:o(c),"onUpdate:modelValue":Q[9]||(Q[9]=se=>ke(c)?c.value=se:null)},null,8,["title","modelValue"]),m(Ve,{title:o(V),modelValue:o(h),"onUpdate:modelValue":Q[10]||(Q[10]=se=>ke(h)?h.value=se:null)},null,8,["title","modelValue"])])):q("",!0)]),_:1},8,["modelValue"]))}}),vu=["src","alt"],hu={key:1,class:"title"},bu={class:"discord"},yu={class:"discord-links"},wu={key:0},Cu=["href"],Su={href:"https://forums.moddingtree.com/",target:"_blank"},Nu={href:"https://forums.moddingtree.com/",target:"_blank"},ku={class:"discord"},xu={class:"discord-links"},Iu={key:0},Au=["href"],Mu=j({__name:"Nav",setup(n){const e=B(null),t=B(null),i=B(null),r=B(null),{useHeader:a,banner:u,title:s,discordName:c,discordLink:f,versionNumber:w}=Y;function h(){window.open(f,"mywindow")}const b=F(()=>{var p;return((p=Te.value)==null?void 0:p.loggedIn)===!0&&!gt.value.includes(ee.active)});return(p,y)=>(N(),x(U,null,[o(a)?(N(),x("div",Le({key:0,class:"nav"},p.$attrs),[o(u)?(N(),x("img",{key:0,src:o(u),class:"banner",alt:o(s)},null,8,vu)):(N(),x("div",hu,H(o(s)),1)),g("div",{onClick:y[0]||(y[0]=C=>{var A;return(A=r.value)==null?void 0:A.open()}),class:"version-container"},[m(de,{display:"Changelog",direction:o(K).Down,class:"version"},{default:L(()=>[g("span",null,"v"+H(o(w)),1)]),_:1},8,["direction"])]),y[14]||(y[14]=g("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),g("div",bu,[g("span",{onClick:h,class:"material-icons"},"discord"),g("ul",yu,[o(f)?(N(),x("li",wu,[g("a",{href:o(f),target:"_blank"},H(o(c)),9,Cu)])):q("",!0),y[9]||(y[9]=g("li",null,[g("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),y[10]||(y[10]=g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])]),g("div",null,[g("a",Su,[m(de,{display:"Forums",direction:o(K).Down,yoffset:"5px"},{default:L(()=>y[11]||(y[11]=[g("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),g("div",{onClick:y[1]||(y[1]=C=>{var A;return(A=e.value)==null?void 0:A.open()})},[m(de,{display:"Info",direction:o(K).Down,class:"info"},{default:L(()=>y[12]||(y[12]=[g("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),g("div",{onClick:y[2]||(y[2]=C=>{var A;return(A=t.value)==null?void 0:A.open()})},[m(de,{display:"Saves",direction:o(K).Down,xoffset:"-20px"},{default:L(()=>[g("span",{class:oe(["material-icons",{needsSync:b.value}])},"library_books",2)]),_:1},8,["direction"])]),g("div",{onClick:y[3]||(y[3]=C=>{var A;return(A=i.value)==null?void 0:A.open()})},[m(de,{display:"Settings",direction:o(K).Down,xoffset:"-66px"},{default:L(()=>y[13]||(y[13]=[g("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])])],16)):(N(),x("div",Le({key:1,class:"overlay-nav"},p.$attrs),[g("div",{onClick:y[4]||(y[4]=C=>{var A;return(A=r.value)==null?void 0:A.open()}),class:"version-container"},[m(de,{display:"Changelog",direction:o(K).Right,xoffset:"25%",class:"version"},{default:L(()=>[g("span",null,"v"+H(o(w)),1)]),_:1},8,["direction"])]),g("div",{onClick:y[5]||(y[5]=C=>{var A;return(A=t.value)==null?void 0:A.open()})},[m(de,{display:"Saves",direction:o(K).Right},{default:L(()=>[g("span",{class:oe(["material-icons",{needsSync:b.value}])},"library_books",2)]),_:1},8,["direction"])]),g("div",{onClick:y[6]||(y[6]=C=>{var A;return(A=i.value)==null?void 0:A.open()})},[m(de,{display:"Settings",direction:o(K).Right},{default:L(()=>y[15]||(y[15]=[g("span",{class:"material-icons"},"settings",-1)])),_:1},8,["direction"])]),g("div",{onClick:y[7]||(y[7]=C=>{var A;return(A=e.value)==null?void 0:A.open()})},[m(de,{display:"Info",direction:o(K).Right},{default:L(()=>y[16]||(y[16]=[g("span",{class:"material-icons"},"info",-1)])),_:1},8,["direction"])]),g("div",null,[g("a",Nu,[m(de,{display:"Forums",direction:o(K).Right,xoffset:"7px"},{default:L(()=>y[17]||(y[17]=[g("span",{class:"material-icons"},"forum",-1)])),_:1},8,["direction"])])]),g("div",ku,[g("span",{onClick:h,class:"material-icons"},"discord"),g("ul",xu,[o(f)?(N(),x("li",Iu,[g("a",{href:o(f),target:"_blank"},H(o(c)),9,Au)])):q("",!0),y[18]||(y[18]=g("li",null,[g("a",{href:"https://discord.gg/yJ4fjnjU54",target:"_blank"},"Profectus & Friends")],-1)),y[19]||(y[19]=g("li",null,[g("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1))])])],16)),m(cu,{ref_key:"info",ref:e,onOpenChangelog:y[8]||(y[8]=C=>{var A;return(A=r.value)==null?void 0:A.open()})},null,512),m(cn,{ref_key:"savesManager",ref:t},null,512),m(gu,{ref_key:"options",ref:i},null,512),m(tu,{ref_key:"changelog",ref:r},null,512)],64))}}),wi=re(Mu,[["__scopeId","data-v-fcec1ed1"]]),Tu={class:"inner-tab"},Fu=j({__name:"Game",setup(n){const e=Xe(P,"tabs"),t=F(()=>Object.keys(Ce)),i=Y.useHeader;function r(a){const{display:u,name:s,color:c,minimizable:f,minimizedDisplay:w,minimized:h,nodes:b,forceHideGoBack:p}=a;return{display:u,name:s,color:c,minimizable:f,minimizedDisplay:w,minimized:h,nodes:b,forceHideGoBack:p}}return(a,u)=>(N(),x("div",{class:oe(["tabs-container",{useHeader:o(i)}])},[(N(!0),x(U,null,ze(e.value,(s,c)=>{var f,w;return N(),x("div",{key:c,class:oe(["tab",o((f=o(Ce)[s])==null?void 0:f.classes)]),style:fe(o((w=o(Ce)[s])==null?void 0:w.style))},[c===0&&!o(i)?(N(),ae(wi,{key:0})):q("",!0),g("div",Tu,[t.value.includes(s)?(N(),ae(Xl,Le({key:0,ref_for:!0},r(o(Ce)[s]),{index:c,onSetMinimized:h=>o(Ce)[s].minimized.value=h}),null,16,["index","onSetMinimized"])):(N(),ae(Fi(s),{key:1,index:c},null,8,["index"]))])],6)}),128))],2))}}),Pu=re(Fu,[["__scopeId","data-v-d0a3afce"]]),Ru={key:0,class:"tpsDisplay"},Eu=j({__name:"TPS",setup(n){const e=F(()=>l.div(te.lastTenTicks.length,te.lastTenTicks.reduce((t,i)=>t+i,0)));return(t,i)=>e.value.isNan()?q("",!0):(N(),x("div",Ru,"TPS: "+H(o(et)(e.value)),1))}}),Du=re(Eu,[["__scopeId","data-v-7df31503"]]),Vu=j({__name:"App",setup(n){const e=Y.useHeader,t=F(()=>mt[ee.theme].variables),i=Xe(ee,"showTPS"),r=Xe(te,"errors"),a=()=>jo.map(u=>W(u));return(u,s)=>r.value.length>0?(N(),x("div",{key:0,class:"error-container",style:fe(t.value)},[m(Dn,{errors:r.value},null,8,["errors"])],4)):(N(),x(U,{key:1},[g("div",{id:"modal-root",style:fe(t.value)},null,4),g("div",{class:oe(["app",{useHeader:o(e)}]),style:fe(t.value)},[o(e)?(N(),ae(wi,{key:0})):q("",!0),m(Pu),o(i.value)?(N(),ae(Du,{key:1})):q("",!0),m(kl),m(Wl),m(Ql),m(Dl),m(a)],6)],64))}}),$u=re(Vu,[["__scopeId","data-v-b45f2ee2"]]);me.on("setupVue",n=>n.use(Bi));const Bu="modulepreload",qu=function(n,e){return new URL(n,e).href},An={},Ou=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){const u=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),c=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(t.map(f=>{if(f=qu(f,i),f in An)return;An[f]=!0;const w=f.endsWith(".css"),h=w?'[rel="stylesheet"]':"";if(!!i)for(let y=u.length-1;y>=0;y--){const C=u[y];if(C.href===f&&(!w||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${h}`))return;const p=document.createElement("link");if(p.rel=w?"stylesheet":Bu,w||(p.as="script"),p.crossOrigin="",p.href=f,c&&p.setAttribute("nonce",c),document.head.appendChild(p),w)return new Promise((y,C)=>{p.addEventListener("load",y),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(u){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=u,window.dispatchEvent(s),!s.defaultPrevented)throw u}return r.then(u=>{for(const s of u||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};function Uu(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:u}=n;let s,c;const f=async(h=!0)=>{await c};async function w(){if("serviceWorker"in navigator){if(s=await Ou(async()=>{const{Workbox:h}=await import("./workbox-window-D5gOYdM7.js");return{Workbox:h}},[],import.meta.url).then(({Workbox:h})=>new h("./sw.js",{scope:"./",type:"classic"})).catch(h=>{u==null||u(h)}),!s)return;s.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),s.addEventListener("installed",h=>{h.isUpdate||i==null||i()}),s.register({immediate:e}).then(h=>{a?a("./sw.js",h):r==null||r(h)}).catch(h=>{u==null||u(h)})}}return c=w(),f}function Lu(n={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:r,onRegisteredSW:a,onRegisterError:u}=n,s=B(!1),c=B(!1);return{updateServiceWorker:Uu({immediate:e,onNeedRefresh(){s.value=!0,t==null||t()},onOfflineReady(){c.value=!0,i==null||i()},onRegistered:r,onRegisteredSW:a,onRegisterError:u}),offlineReady:c,needRefresh:s}}let it=null;function zt(){const n=Date.now();let e=(n-P.time)/1e3;P.time=n;const t=e;if(te.lastTenTicks.push(t),te.lastTenTicks.length>10&&(te.lastTenTicks=te.lastTenTicks.slice(1)),!(at!=null&&at.value&&!P.keepGoing)&&!te.hasNaN&&(e=Math.max(e,0),P.devSpeed!==0)){if(Ft.value=!1,P.offlineTime!=null){if(l.gt(P.offlineTime,Y.offlineLimit*3600)&&(P.offlineTime=Y.offlineLimit*3600),l.gt(P.offlineTime,0)&&P.devSpeed!==0){const i=Math.max(P.offlineTime/10,e);P.offlineTime=P.offlineTime-i,e+=i}else P.devSpeed===0&&(P.offlineTime+=e);(!P.offlineProd||l.lt(P.offlineTime,0))&&(P.offlineTime=null)}e=Math.min(e,Y.maxTickLength),P.devSpeed!=null&&(e*=P.devSpeed),Number.isFinite(e)||(e=1e308),!l.eq(e,0)&&(P.timePlayed+=e,Number.isFinite(P.timePlayed)||(P.timePlayed=1e308),me.emit("update",e,t),ee.unthrottled?(requestAnimationFrame(zt),it!=null&&(clearInterval(it),it=null)):it==null&&(it=setInterval(zt,50)))}}async function Hu(){ee.unthrottled?requestAnimationFrame(zt):it=setInterval(zt,50)}xe(at,n=>{n&&me.emit("gameWon")});setInterval(()=>{te.mouseActivity=[...te.mouseActivity.slice(-7),!1]},1e3*60*60);const dn=console.error;console.error=function(...n){dn(...n)};window.onerror=function(n,e,t,i,r){return te.errors.push(r instanceof Error?r:new Error(JSON.stringify(r))),dn(r),!0};window.onunhandledrejection=function(n){te.errors.push(n.reason instanceof Error?n.reason:new Error(JSON.stringify(n.reason))),dn(n.reason)};document.title=Y.title;window.projInfo=Y;Y.id===""&&console.error("Project ID is empty!","Please select a unique ID for this project in /src/data/projInfo.json");requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await Uo();const n=window.vue=Pi($u);n.config.errorHandler=function(e,t,i){console.error(e,i,t)},me.emit("setupVue",n),n.mount("#app"),ot(()=>{const e=qi();Lu({immediate:!0,onOfflineReady(){e.info("App ready to work offline")},onRegisterError:console.warn,onRegistered:console.info})}),Hu()});
