<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #grid-Container {
            display: grid;
            grid-template-rows: repeat(3, 1fr);
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            height: 100vh;         
        }

        .grid-item {
            border: 1px solid #ccc;
            text-align: center;
            width: 85%;
            height: 85%;
        }

        .active {
            background-color: rgb(235, 235, 235);
            transition: all .2s ease-in-out;
            border-top: 1px solid #ccc;
            border-left: 1px solid #ccc;
            border-right: 2px solid #ccc;
            border-bottom: 2px solid #ccc;
            border-radius: 100%;
            box-shadow: 2px 2px 4px rgb(54, 54, 54);
            margin: 0px 0px 0px 0px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="grid-Container">
    </div>

    <script>

    document.addEventListener("DOMContentLoaded", function() {
      const url_string = window.location;
      const url = new URL(url_string);
      const gSize = url.searchParams.get("gSize");

      const arbLength = parseInt(gSize, 10) || 5; // Default to 5 if gSize is not provided

      const gridElement = document.getElementById('grid-Container');
      createGrid(arbLength);
    });



        let arbLength = 9
        const gridElement = document.getElementById('grid-Container')
        let count = 0

        function howManyLayers(size) {
            if(size <= 1) {
                return 0 // no layers
            }
            let layers = 0;
            currentSize = size;

            while (currentSize >= 3) {
                currentSize -= 2;
                layers++;
            }

            return layers;
        }


        function makeASquare(area, id) {
            let newSquare = document.createElement('div')
                newSquare.classList.add('grid-item')
                newSquare.classList.add('active')
                newSquare.style.gridArea = area
                newSquare.textContent = id
                newSquare.id = id
            return newSquare
        }

        function createGrid(size) {
            gridElement.innerHTML = ''
            gridElement.style.gridTemplateRows = `repeat(${size}, 1fr)`
            gridElement.style.gridTemplateColumns = `repeat(${size}, 1fr)`

            let howMany = howManyLayers(size)

            let thisLayerLength = size;
            thisLayerOffset = 0
            thisLayerVertical = 0
            let layerLetter;
            let calcLength = size + 1

            for (let z = howMany; z > 0; z--) {
                let count = 0
                console.log(`build layer ${String.fromCharCode(96+z)} it should be ${thisLayerLength} with the offset ${thisLayerOffset}`)
                layerLetter = String.fromCharCode(96+z)

                // top
                for (let top = 1; top < thisLayerLength; top++) {
                    console.log(`draw top`)
                    let gridArea = `${thisLayerOffset+1} / ${top+thisLayerOffset} / ${thisLayerOffset+2} / ${top+thisLayerOffset+1}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)
                }

                //right
                for (let right = 1; right < thisLayerLength; right++) {
                    console.log(`draw right`)
                    let gridArea = `${right + thisLayerOffset} / ${thisLayerLength+thisLayerOffset} / ${right + thisLayerOffset + 1} / ${thisLayerLength + 1 + thisLayerOffset}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)  
                }

                for (let bottom = 1; bottom < thisLayerLength; bottom++) {
                    console.log(`draw bottom`)
                    let gridArea = `${calcLength - 1} / ${calcLength - bottom} / ${calcLength} / ${calcLength - bottom + 1}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)  
                }

                for (let left = 1; left < thisLayerLength; left++) {
                    console.log(`draw left`)
                    let gridArea = `${calcLength - left} / ${thisLayerOffset + 1} / ${calcLength - left + 1} / ${thisLayerOffset + 2}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)  
                }

                calcLength--
                thisLayerLength-=2
                thisLayerOffset++                 

            }

            
        }

    </script>
</body>
</html>