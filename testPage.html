<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #grid-Container {
            display: grid;
            grid-template-rows: repeat(3, 1fr);
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            width: 100%;
            height: 100vh;         
        }

        .grid-item {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="grid-Container">
    </div>

    <script>

        let arbLength = 9
        const gridElement = document.getElementById('grid-Container')
        let count = 0

        function howManyLayers(size) {
            if(size <= 1) {
                return 0 // no layers
            }
            let layers = 0;
            currentSize = size;

            while (currentSize >= 3) {
                currentSize -= 2;
                layers++;
            }

            return layers;
        }

        function resetGrid(num) {
            arbLength = document.getElementById("gridSize").value
            gridElement.innerHTML = ''
            createGrid(arbLength)
        }


        function makeASquare(area, id) {
            let newSquare = document.createElement('div')
                newSquare.classList.add('grid-item')
                newSquare.style.gridArea = area
                newSquare.textContent = id
                newSquare.id = id
            return newSquare
        }

        function createGrid(size) {
            gridElement.innerHTML = ''
            gridElement.style.gridTemplateRows = `repeat(${size}, 1fr)`
            gridElement.style.gridTemplateColumns = `repeat(${size}, 1fr)`

            let howMany = howManyLayers(size)

            let thisLayerLength = size;
            thisLayerOffset = 0
            thisLayerVertical = 0
            let layerLetter;
            let calcLength = size + 1

            for (let z = howMany; z > 0; z--) {
                let count = 0
                console.log(`build layer ${String.fromCharCode(96+z)} it should be ${thisLayerLength} with the offset ${thisLayerOffset}`)
                layerLetter = String.fromCharCode(96+z)

                // top
                for (let top = 1; top < thisLayerLength; top++) {
                    let gridArea = `${thisLayerOffset+1} / ${top+thisLayerOffset} / ${thisLayerOffset+2} / ${top+thisLayerOffset+1}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)
                }

                //right

                for (let right = 1; right < thisLayerLength; right++) {
                    let gridArea = `${right + thisLayerOffset} / ${thisLayerLength+thisLayerOffset} / ${right + thisLayerOffset + 1} / ${thisLayerLength + 1 + thisLayerOffset}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)  
                }

                for (let bottom = 1; bottom < thisLayerLength; bottom++) {
                    let gridArea = `${calcLength - 1} / ${calcLength - bottom} / ${calcLength} / ${calcLength - bottom + 1}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)  
                }

                for (let left = 1; left < thisLayerLength; left++) {
                    let gridArea = `${calcLength - left} / ${thisLayerOffset + 1} / ${calcLength - left + 1} / ${thisLayerOffset + 2}`
                    let id = `${layerLetter}${count}`
                    let newSquare = makeASquare(gridArea, id)
                    count++
                    gridElement.appendChild(newSquare)  
                }

                calcLength--
                thisLayerLength-=2
                thisLayerOffset++                 

            }
            let center = document.createElement('div')
            let gridArea = `${size / 2} / ${size / 2} / ${size / 2 + 1} / ${size / 2 + 1}`
            center.classList.add('grid-item')
            center.style.gridArea = gridArea
            center.textContent = 'Center'
            let textArea = document.createElement('input')
            textArea.id = 'gridSize'
            center.appendChild(textArea)
            textArea.placeholder = '5'
            let subbtn = document.createElement('button')
            subbtn.textContent = 'Change size'
            subbtn.addEventListener('click', () => {
                resetGrid()
            })
            center.appendChild(subbtn)
            gridElement.appendChild(center)
            
        }

    createGrid(arbLength)

    </script>
</body>
</html>